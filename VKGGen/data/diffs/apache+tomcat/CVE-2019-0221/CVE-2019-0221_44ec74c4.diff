commit 44ec74c44dcd05cd7e90967c04d40b51440ecd7e
Author:     Mark Thomas <markt@apache.org>
AuthorDate: Mon Mar 11 11:33:03 2019 +0000
Commit:     Mark Thomas <markt@apache.org>
CommitDate: Wed Apr 10 11:58:59 2019 +0100

    Escape debug output to aid readability
    
    # Conflicts:
    #       java/org/apache/catalina/ssi/SSIPrintenv.java

diff --git a/java/org/apache/catalina/ssi/SSIPrintenv.java b/java/org/apache/catalina/ssi/SSIPrintenv.java
index b882eea0fe..13d965099a 100644
--- a/java/org/apache/catalina/ssi/SSIPrintenv.java
+++ b/java/org/apache/catalina/ssi/SSIPrintenv.java
@@ -22,7 +22,7 @@ import java.util.Collection;
 import java.util.Iterator;
 /**
  * Implements the Server-side #printenv command
- * 
+ *
  * @author Dan Sandberg
  * @author David Becker
  */
@@ -43,8 +43,7 @@ public class SSIPrintenv implements SSICommand {
             Iterator<String> iter = variableNames.iterator();
             while (iter.hasNext()) {
                 String variableName = iter.next();
-                String variableValue = ssiMediator
-                        .getVariableValue(variableName);
+                String variableValue = ssiMediator.getVariableValue(variableName, "entity");
                 //This shouldn't happen, since all the variable names must
                 // have values
                 if (variableValue == null) {
diff --git a/webapps/docs/changelog.xml b/webapps/docs/changelog.xml
index 71aeca6407..3f3357cddd 100644
--- a/webapps/docs/changelog.xml
+++ b/webapps/docs/changelog.xml
@@ -131,6 +131,9 @@
         Tomcat used to resolve standard XML DTDs and schemas when Tomcat is
         configured to validate XML configuration files such as web.xml. (markt)
       </fix>
+      <fix>
+        Encode the output of the SSI <code>printenv</code> command. (markt)
+      </fix>
     </changelog>
   </subsection>
   <subsection name="Coyote">
