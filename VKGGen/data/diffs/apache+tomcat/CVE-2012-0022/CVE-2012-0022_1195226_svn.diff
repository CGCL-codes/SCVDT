Index: tc7.0.x/trunk/test/org/apache/tomcat/util/http/TestParameters.java
===================================================================
--- tc7.0.x/trunk/test/org/apache/tomcat/util/http/TestParameters.java	(revision 1195225)
+++ tc7.0.x/trunk/test/org/apache/tomcat/util/http/TestParameters.java	(revision 1195226)
@@ -127,7 +127,8 @@
         assertNull(values);
 
         // Add a parameter with two values
-        p.addParameterValues("foo", new String[] {"value1", "value2"});
+        p.addParameter("foo", "value1");
+        p.addParameter("foo", "value2");
 
         names = p.getParameterNames();
         assertTrue(names.hasMoreElements());
@@ -140,7 +141,8 @@
         assertEquals("value2", values[1]);
 
         // Add two more values
-        p.addParameterValues("foo", new String[] {"value3", "value4"});
+        p.addParameter("foo", "value3");
+        p.addParameter("foo", "value4");
 
         names = p.getParameterNames();
         assertTrue(names.hasMoreElements());
Index: tc7.0.x/trunk/java/org/apache/tomcat/util/http/Parameters.java
===================================================================
--- tc7.0.x/trunk/java/org/apache/tomcat/util/http/Parameters.java	(revision 1195225)
+++ tc7.0.x/trunk/java/org/apache/tomcat/util/http/Parameters.java	(revision 1195226)
@@ -101,6 +101,7 @@
     // Access to the current name/values, no side effect ( processing ).
     // You must explicitly call handleQueryParameters and the post methods.
     
+    @Deprecated
     public void addParameterValues(String key, String[] newValues) {
         if (key == null) {
             return;
@@ -170,7 +171,7 @@
     }
 
 
-    private void addParam( String key, String value ) {
+    public void addParameter( String key, String value ) {
         if( key==null ) return;
         ArrayList<String> values = paramHashValues.get(key);
         if (values == null) {
@@ -339,7 +340,7 @@
                     value = tmpValue.toString();
                 }
 
-                addParam(name, value);
+                addParameter(name, value);
             } catch (IOException e) {
                 decodeFailCount++;
                 if (decodeFailCount == 1 || log.isDebugEnabled()) {
Index: tc7.0.x/trunk/java/org/apache/catalina/connector/Request.java
===================================================================
--- tc7.0.x/trunk/java/org/apache/catalina/connector/Request.java	(revision 1195225)
+++ tc7.0.x/trunk/java/org/apache/catalina/connector/Request.java	(revision 1195226)
@@ -2687,13 +2687,13 @@
                         if (encoding == null) {
                             encoding = Parameters.DEFAULT_ENCODING;
                         }
-                        parameters.addParameterValues(part.getName(),
-                                new String[] { part.getString(encoding) });
+                        parameters.addParameter(part.getName(),
+                                part.getString(encoding));
                     } catch (UnsupportedEncodingException uee) {
                         try {
-                            parameters.addParameterValues(part.getName(),
-                                    new String[] {part.getString(
-                                            Parameters.DEFAULT_ENCODING)});
+                            parameters.addParameter(part.getName(),
+                                    part.getString(
+                                            Parameters.DEFAULT_ENCODING));
                         } catch (UnsupportedEncodingException e) {
                             // Should not be possible
                         }
Index: tc7.0.x/trunk
===================================================================
--- tc7.0.x/trunk	(revision 1195225)
+++ tc7.0.x/trunk	(revision 1195226)

Property changes on: tc7.0.x/trunk
___________________________________________________________________
Modified: svn:mergeinfo
## -0,0 +0,1 ##
   Merged /tomcat/trunk:r1195223
