Index: tc7.0.x/trunk/java/org/apache/tomcat/util/http/Parameters.java
===================================================================
--- tc7.0.x/trunk/java/org/apache/tomcat/util/http/Parameters.java	(revision 1195536)
+++ tc7.0.x/trunk/java/org/apache/tomcat/util/http/Parameters.java	(revision 1195537)
@@ -22,8 +22,10 @@
 import java.nio.charset.Charset;
 import java.util.ArrayList;
 import java.util.Enumeration;
-import java.util.Hashtable;
+import java.util.HashMap;
+import java.util.Map;
 
+import org.apache.catalina.util.Enumerator;
 import org.apache.tomcat.util.buf.B2CConverter;
 import org.apache.tomcat.util.buf.ByteChunk;
 import org.apache.tomcat.util.buf.CharChunk;
@@ -43,8 +45,8 @@
     protected static final StringManager sm =
         StringManager.getManager("org.apache.tomcat.util.http");
 
-    private final Hashtable<String,ArrayList<String>> paramHashValues =
-        new Hashtable<String,ArrayList<String>>();
+    private final HashMap<String,ArrayList<String>> paramHashValues =
+        new HashMap<String,ArrayList<String>>();
 
     private boolean didQueryParameters=false;
     
@@ -130,7 +132,7 @@
  
     public Enumeration<String> getParameterNames() {
         handleQueryParameters();
-        return paramHashValues.keys();
+        return new Enumerator<String>(paramHashValues.keySet());
     }
 
     // Shortcut.
@@ -406,12 +408,10 @@
      */
     public String paramsAsString() {
         StringBuilder sb = new StringBuilder();
-        Enumeration<String> en = paramHashValues.keys();
-        while (en.hasMoreElements()) {
-            String k = en.nextElement();
-            sb.append(k).append('=');
-            ArrayList<String> values = paramHashValues.get(k);
-            for(String value : values) {
+        for (Map.Entry<String, ArrayList<String>> e : paramHashValues.entrySet()) {
+            sb.append(e.getKey()).append('=');
+            ArrayList<String> values = e.getValue();
+            for (String value : values) {
                 sb.append(value).append(',');
             }
             sb.append('\n');
Index: tc7.0.x/trunk/webapps/docs/changelog.xml
===================================================================
--- tc7.0.x/trunk/webapps/docs/changelog.xml	(revision 1195536)
+++ tc7.0.x/trunk/webapps/docs/changelog.xml	(revision 1195537)
@@ -154,7 +154,7 @@
       <add>
         Improve performance of parameter processing for GET and POST requests.
         Also add an option to limit the maximum number of parameters processed
-        per request. This defaults to 10000. (markt)
+        per request. This defaults to 10000. (markt/kkolinko)
       </add>
       <fix>
         <bug>52091</bug>: Address performance issues related to lock contention
Index: tc7.0.x/trunk
===================================================================
--- tc7.0.x/trunk	(revision 1195536)
+++ tc7.0.x/trunk	(revision 1195537)

Property changes on: tc7.0.x/trunk
___________________________________________________________________
Modified: svn:mergeinfo
## -0,0 +0,1 ##
   Merged /tomcat/trunk:r1195531
