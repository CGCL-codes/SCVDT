Index: tc7.0.x/trunk/java/org/apache/tomcat/util/http/Parameters.java
===================================================================
--- tc7.0.x/trunk/java/org/apache/tomcat/util/http/Parameters.java	(revision 1195224)
+++ tc7.0.x/trunk/java/org/apache/tomcat/util/http/Parameters.java	(revision 1195225)
@@ -105,13 +105,12 @@
         if (key == null) {
             return;
         }
-        ArrayList<String> values;
-        if (paramHashValues.containsKey(key)) {
-            values = paramHashValues.get(key);
-            values.ensureCapacity(values.size() + newValues.length);
-        } else {
+        ArrayList<String> values = paramHashValues.get(key);
+        if (values == null) {
             values = new ArrayList<String>(newValues.length);
             paramHashValues.put(key, values);
+        } else {
+            values.ensureCapacity(values.size() + newValues.length);
         }
         for (String newValue : newValues) {
             values.add(newValue);
@@ -173,10 +172,8 @@
 
     private void addParam( String key, String value ) {
         if( key==null ) return;
-        ArrayList<String> values;
-        if (paramHashValues.containsKey(key)) {
-            values = paramHashValues.get(key);
-        } else {
+        ArrayList<String> values = paramHashValues.get(key);
+        if (values == null) {
             values = new ArrayList<String>(1);
             paramHashValues.put(key, values);
         }
Index: tc7.0.x/trunk
===================================================================
--- tc7.0.x/trunk	(revision 1195224)
+++ tc7.0.x/trunk	(revision 1195225)

Property changes on: tc7.0.x/trunk
___________________________________________________________________
Modified: svn:mergeinfo
## -0,0 +0,1 ##
   Merged /tomcat/trunk:r1195222
