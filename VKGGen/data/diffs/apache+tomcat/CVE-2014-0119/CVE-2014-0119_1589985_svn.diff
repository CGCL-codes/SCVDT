Index: trunk/java/org/apache/jasper/compiler/TagPluginManager.java
===================================================================
--- trunk/java/org/apache/jasper/compiler/TagPluginManager.java	(revision 1589984)
+++ trunk/java/org/apache/jasper/compiler/TagPluginManager.java	(revision 1589985)
@@ -94,16 +94,6 @@
 
             parser = new TagPluginParser(ctxt, blockExternal);
 
-        } finally {
-            if (Constants.IS_SECURITY_ENABLED) {
-                PrivilegedSetTccl pa = new PrivilegedSetTccl(original);
-                AccessController.doPrivileged(pa);
-            } else {
-                Thread.currentThread().setContextClassLoader(original);
-            }
-        }
-
-        try {
             Enumeration<URL> urls =
                     ctxt.getClassLoader().getResources(META_INF_JASPER_TAG_PLUGINS_XML);
             if (urls != null) {
@@ -119,6 +109,13 @@
             }
         } catch (IOException | SAXException e) {
             throw new JasperException(e);
+        } finally {
+            if (Constants.IS_SECURITY_ENABLED) {
+                PrivilegedSetTccl pa = new PrivilegedSetTccl(original);
+                AccessController.doPrivileged(pa);
+            } else {
+                Thread.currentThread().setContextClassLoader(original);
+            }
         }
 
         Map<String, String> plugins = parser.getPlugins();
