commit e3ee6bd6c48b97a1f28e7e2be1f749e417a0fd83
Author:     Mark Thomas <markt@apache.org>
AuthorDate: Fri Apr 25 10:44:05 2014 +0000
Commit:     Mark Thomas <markt@apache.org>
CommitDate: Fri Apr 25 10:44:05 2014 +0000

    Fix indents and copy/paste errors
    This is part 4 of 7 of the fix for CVE-2014-0119
    
    git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1589983 13f79535-47bb-0310-9956-ffa450edef68

diff --git a/java/org/apache/jasper/compiler/TagPluginManager.java b/java/org/apache/jasper/compiler/TagPluginManager.java
index 3d2f205fe7..007230d930 100644
--- a/java/org/apache/jasper/compiler/TagPluginManager.java
+++ b/java/org/apache/jasper/compiler/TagPluginManager.java
@@ -79,17 +79,17 @@ public class TagPluginManager {
         if (Constants.IS_SECURITY_ENABLED) {
             PrivilegedGetTccl pa = new PrivilegedGetTccl();
             original = AccessController.doPrivileged(pa);
-            } else {
-                original = Thread.currentThread().getContextClassLoader();
-            }
+        } else {
+            original = Thread.currentThread().getContextClassLoader();
+        }
         try {
             if (Constants.IS_SECURITY_ENABLED) {
                 PrivilegedSetTccl pa =
-                        new PrivilegedSetTccl(JspDocumentParser.class.getClassLoader());
+                        new PrivilegedSetTccl(TagPluginManager.class.getClassLoader());
                 AccessController.doPrivileged(pa);
             } else {
                 Thread.currentThread().setContextClassLoader(
-                        JspDocumentParser.class.getClassLoader());
+                        TagPluginManager.class.getClassLoader());
             }
 
             parser = new TagPluginParser(ctxt, blockExternal);
