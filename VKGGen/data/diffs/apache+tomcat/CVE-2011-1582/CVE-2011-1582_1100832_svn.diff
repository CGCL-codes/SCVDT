Index: trunk/java/org/apache/catalina/core/StandardWrapper.java
===================================================================
--- trunk/java/org/apache/catalina/core/StandardWrapper.java	(revision 1100831)
+++ trunk/java/org/apache/catalina/core/StandardWrapper.java	(revision 1100832)
@@ -1136,7 +1136,8 @@
         if (getServlet() == null) {
             Class<?> clazz = null;
             try {
-                clazz = getParentClassLoader().loadClass(getServletClass());
+                clazz = getParent().getLoader().getClassLoader().loadClass(
+                        getServletClass());
                 processServletSecurityAnnotation(clazz);
             } catch (ClassNotFoundException e) {
                 // Safe to ignore. No class means no annotations to process
Index: trunk/webapps/docs/changelog.xml
===================================================================
--- trunk/webapps/docs/changelog.xml	(revision 1100831)
+++ trunk/webapps/docs/changelog.xml	(revision 1100832)
@@ -61,6 +61,10 @@
         Use safe equality test when determining event type in the
         MapperListener. (markt)
       </fix>
+      <fix>
+        Use correct class loader when loading Servlet classes in
+        StandardWrapper. (markt)
+      </fix>
     </changelog>
   </subsection>
 </section>
