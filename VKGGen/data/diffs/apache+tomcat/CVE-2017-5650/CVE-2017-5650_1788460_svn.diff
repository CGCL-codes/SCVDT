Index: trunk/java/org/apache/coyote/http2/Http2UpgradeHandler.java
===================================================================
--- trunk/java/org/apache/coyote/http2/Http2UpgradeHandler.java	(revision 1788459)
+++ trunk/java/org/apache/coyote/http2/Http2UpgradeHandler.java	(revision 1788460)
@@ -983,6 +983,11 @@
 
     private void close() {
         connectionState.set(ConnectionState.CLOSED);
+        for (Stream stream : streams.values()) {
+            // The connection is closing. Close the associated streams as no
+            // longer required.
+            stream.receiveReset(Http2Error.CANCEL.getCode());
+        }
         try {
             socketWrapper.close();
         } catch (IOException ioe) {
