Index: trunk/java/org/apache/catalina/servlets/DefaultServlet.java
===================================================================
--- trunk/java/org/apache/catalina/servlets/DefaultServlet.java	(revision 1793467)
+++ trunk/java/org/apache/catalina/servlets/DefaultServlet.java	(revision 1793468)
@@ -787,7 +787,7 @@
             return;
         }
 
-        boolean isError = response.getStatus() >= HttpServletResponse.SC_BAD_REQUEST;
+        boolean isError = DispatcherType.ERROR == request.getDispatcherType();
 
         boolean included = false;
         // Check if the conditions specified in the optional If headers are
Index: trunk/webapps/docs/changelog.xml
===================================================================
--- trunk/webapps/docs/changelog.xml	(revision 1793467)
+++ trunk/webapps/docs/changelog.xml	(revision 1793468)
@@ -83,6 +83,11 @@
         the number of places the associated <code>Charset</code> needs to be
         looked up. (markt)
       </scode>
+      <fix>
+        Use a more reliable mechanism for the <code>DefaultServlet</code> when
+        determining if the current request is for custom error page or not.
+        (markt)
+      </fix>
     </changelog>
   </subsection>
   <subsection name="Coyote">
