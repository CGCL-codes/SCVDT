Index: tc5.5.x/trunk/STATUS.txt
===================================================================
--- tc5.5.x/trunk/STATUS.txt	(revision 1066317)
+++ tc5.5.x/trunk/STATUS.txt	(revision 1066318)
@@ -96,8 +96,3 @@
      2) do not change visibility of defaultProtocol, defaultKeystoreType 
    markt:
      Happy to include those changes
-
-* Improve HTTP specification compliance
-  http://svn.apache.org/viewvc?rev=1066244&view=rev
-  +1: kkolinko, rjung, markt
-  -1:
Index: tc5.5.x/trunk/container/webapps/docs/changelog.xml
===================================================================
--- tc5.5.x/trunk/container/webapps/docs/changelog.xml	(revision 1066317)
+++ tc5.5.x/trunk/container/webapps/docs/changelog.xml	(revision 1066318)
@@ -47,8 +47,16 @@
       </fix>
     </changelog>
   </subsection>
+  <subsection name="Catalina">
+    <changelog>
+      <fix>
+        Improve HTTP specification compliance in support of
+        <code>Accept-Language</code> header. (kkolinko)
+      </fix>
+    </changelog>
+  </subsection>
 </section>
-<section name="Tomcat 5.5.32 (jim)" rtext="tagged 2011-01-22">
+<section name="Tomcat 5.5.32 (jim)" rtext="released 2011-02-01">
   <subsection name="General">
     <changelog>
       <update>
Index: tc5.5.x/trunk/container/catalina/src/share/org/apache/catalina/connector/Request.java
===================================================================
--- tc5.5.x/trunk/container/catalina/src/share/org/apache/catalina/connector/Request.java	(revision 1066317)
+++ tc5.5.x/trunk/container/catalina/src/share/org/apache/catalina/connector/Request.java	(revision 1066318)
@@ -2588,7 +2588,12 @@
             int semi = entry.indexOf(";q=");
             if (semi >= 0) {
                 try {
-                    quality = Double.parseDouble(entry.substring(semi + 3));
+                    String strQuality = entry.substring(semi + 3);
+                    if (strQuality.length() <= 5) {
+                        quality = Double.parseDouble(strQuality);
+                    } else {
+                        quality = 0.0;
+                    }
                 } catch (NumberFormatException e) {
                     quality = 0.0;
                 }
