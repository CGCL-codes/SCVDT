diff --git a/core/src/main/java/io/undertow/server/protocol/http/HttpResponseConduit.java b/core/src/main/java/io/undertow/server/protocol/http/HttpResponseConduit.java
index 3fdf29ff5..a3b87670f 100644
--- a/core/src/main/java/io/undertow/server/protocol/http/HttpResponseConduit.java
+++ b/core/src/main/java/io/undertow/server/protocol/http/HttpResponseConduit.java
@@ -294,8 +294,9 @@ private static void writeString(ByteBuffer buffer, String string) {
         int length = string.length();
         for (int charIndex = 0; charIndex < length; charIndex++) {
             char c = string.charAt(charIndex);
-            if(c != '\r' && c != '\n') {
-                buffer.put((byte) c);
+            byte b = (byte) c;
+            if(b != '\r' && b != '\n') {
+                buffer.put(b);
             } else {
                 buffer.put((byte) ' ');
             }
