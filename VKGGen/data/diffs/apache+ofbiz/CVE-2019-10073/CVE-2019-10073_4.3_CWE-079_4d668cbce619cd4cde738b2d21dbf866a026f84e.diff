commit 4d668cbce619cd4cde738b2d21dbf866a026f84e
Author:     Jacopo Cappellato <jacopoc@apache.org>
AuthorDate: Tue Jun 4 13:23:44 2019 +0000
Commit:     Jacopo Cappellato <jacopoc@apache.org>
CommitDate: Tue Jun 4 13:23:44 2019 +0000

    Applied fix from trunk for revision: 1860613
    ===
    
    Fixed: fine tuned the sanitization of user input by allowing "safe" content;
    thanks to Jacques for the suggestion.
    
    Fixes CVE-2019-10073
    
    git-svn-id: https://svn.apache.org/repos/asf/ofbiz/branches/release16.11@1860616 13f79535-47bb-0310-9956-ffa450edef68

diff --git a/applications/party/servicedef/services.xml b/applications/party/servicedef/services.xml
index ab56c1f899..8c86195f48 100644
--- a/applications/party/servicedef/services.xml
+++ b/applications/party/servicedef/services.xml
@@ -750,6 +750,10 @@ under the License.
         <attribute name="orderId" type="String" mode="IN" optional="true"/>
         <attribute name="custRequestId" type="String" mode="IN" optional="true"/>
         <attribute name="action" type="String" mode="IN" optional="true"/><!-- to indicate any special action like: REPLY, REPLYALL, FORWARD or empty for no special action-->
+        <override name="headerString" allow-html="safe"/>
+        <override name="content" allow-html="safe"/>
+        <override name="messageId" allow-html="safe"/>
+        <override name="subject" allow-html="safe"/>
     </service>
     <service name="createCommunicationEvent" engine="simple"
             location="component://party/minilang/communication/CommunicationEventServices.xml" invoke="createCommunicationEventWithPermission" auth="true">
