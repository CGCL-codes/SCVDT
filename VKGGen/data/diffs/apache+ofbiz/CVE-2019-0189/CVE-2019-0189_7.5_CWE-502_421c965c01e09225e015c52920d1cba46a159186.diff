commit 421c965c01e09225e015c52920d1cba46a159186
Author:     Jacques Le Roux <jleroux@apache.org>
AuthorDate: Thu Mar 14 08:28:51 2019 +0000
Commit:     Jacques Le Roux <jleroux@apache.org>
CommitDate: Thu Mar 14 08:28:51 2019 +0000

    "Applied fix from trunk framework for revision: 1855492"
    ------------------------------------------------------------------------
    r1855492 | jleroux | 2019-03-14 09:28:27 +0100 (jeu. 14 mars 2019) | 11 lignes
    
    Improved: Improve ObjectInputStream class
    (OFBIZ-10837)
    
    Fixes CVE-2019-0189
    
    The white list was still not complete as reported by Wolfgang Rauchholz on user
    ML
    This adds java.util.Date
    
    It seems the warning in SafeObjectInputStream::resolveClass is not enough.
    Anyway I'll not change it.
    
    Thanks: Wolfgang Rauchholz
    ------------------------------------------------------------------------
    
    
    git-svn-id: https://svn.apache.org/repos/asf/ofbiz/branches/release16.11@1855495 13f79535-47bb-0310-9956-ffa450edef68

diff --git a/framework/base/src/main/java/org/apache/ofbiz/base/util/UtilObject.java b/framework/base/src/main/java/org/apache/ofbiz/base/util/UtilObject.java
index cf0eff6a9a..4024267021 100644
--- a/framework/base/src/main/java/org/apache/ofbiz/base/util/UtilObject.java
+++ b/framework/base/src/main/java/org/apache/ofbiz/base/util/UtilObject.java
@@ -147,7 +147,7 @@ public final class UtilObject {
                         Thread.currentThread().getContextClassLoader(),
                         java.util.Arrays.asList("byte\\[\\]", "Number", "Long", "foo", "SerializationInjector",
                                 "java.util.HashMap", "Boolean", "Number", "Integer", "FlexibleStringExpander",
-                                "sun.util.calendar.ZoneInfo", "java.sql.Timestamp"));) {
+                                "sun.util.calendar.ZoneInfo", "java.sql.Timestamp", "java.util.Date"));) {
             return wois.readObject();
         }
     }
