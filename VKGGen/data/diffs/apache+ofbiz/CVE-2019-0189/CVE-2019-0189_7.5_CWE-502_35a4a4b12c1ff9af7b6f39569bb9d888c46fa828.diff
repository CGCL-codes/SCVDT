commit 35a4a4b12c1ff9af7b6f39569bb9d888c46fa828
Author:     Jacques Le Roux <jleroux@apache.org>
AuthorDate: Thu Mar 14 07:43:20 2019 +0000
Commit:     Jacques Le Roux <jleroux@apache.org>
CommitDate: Thu Mar 14 07:43:20 2019 +0000

    "Applied fix from trunk framework for revision: 1855488"
    ------------------------------------------------------------------------
    r1855488 | jleroux | 2019-03-14 08:42:17 +0100 (jeu. 14 mars 2019) | 11 lignes
    
    Improved: Improve ObjectInputStream class
    (OFBIZ-10837)
    
    Fixes CVE-2019-0189
    
    The white list was still not complete as reported by Wolfgang Rauchholz on user
    ML
    This adds java.sql.Timestamp
    
    It seems the warning in SafeObjectInputStream::resolveClass is not enough.
    Anyway I'll not change it.
    
    Thanks: Wolfgang Rauchholz
    ------------------------------------------------------------------------
    
    
    git-svn-id: https://svn.apache.org/repos/asf/ofbiz/branches/release16.11@1855491 13f79535-47bb-0310-9956-ffa450edef68

diff --git a/framework/base/src/main/java/org/apache/ofbiz/base/util/UtilObject.java b/framework/base/src/main/java/org/apache/ofbiz/base/util/UtilObject.java
index 3946d70428..cf0eff6a9a 100644
--- a/framework/base/src/main/java/org/apache/ofbiz/base/util/UtilObject.java
+++ b/framework/base/src/main/java/org/apache/ofbiz/base/util/UtilObject.java
@@ -147,7 +147,7 @@ public final class UtilObject {
                         Thread.currentThread().getContextClassLoader(),
                         java.util.Arrays.asList("byte\\[\\]", "Number", "Long", "foo", "SerializationInjector",
                                 "java.util.HashMap", "Boolean", "Number", "Integer", "FlexibleStringExpander",
-                                "sun.util.calendar.ZoneInfo"));) {
+                                "sun.util.calendar.ZoneInfo", "java.sql.Timestamp"));) {
             return wois.readObject();
         }
     }
