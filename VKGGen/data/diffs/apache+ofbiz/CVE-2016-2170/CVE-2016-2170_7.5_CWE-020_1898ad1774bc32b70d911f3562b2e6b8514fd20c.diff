commit 1898ad1774bc32b70d911f3562b2e6b8514fd20c
Author:     Jacques Le Roux <jleroux@apache.org>
AuthorDate: Tue Mar 22 08:59:27 2016 +0000
Commit:     Jacques Le Roux <jleroux@apache.org>
CommitDate: Tue Mar 22 08:59:27 2016 +0000

    Some errors slipped in while doing changes by hand for r1736092
    
    Fixes "Comment out RMI related code because of the Java deserialization issue" - https://issues.apache.org/jira/browse/OFBIZ-6942
    
    We decided to comment out as less as possible because once, in the start and both properties; the rmi part is off and the related test services are off there is no RMI related danger left (test services are not a danger but would fail during tests run).
    It's then easier for users who need RMI in their projects to have only to uncomment those and not digg everywhere.
    
    [CVE-2016-2170] The infamous Java serialization vulnerability
    
    git-svn-id: https://svn.apache.org/repos/asf/ofbiz/branches/release13.07@1736154 13f79535-47bb-0310-9956-ffa450edef68

diff --git a/framework/base/ofbiz-component.xml b/framework/base/ofbiz-component.xml
index da1d92f4d9..de584fb49c 100644
--- a/framework/base/ofbiz-component.xml
+++ b/framework/base/ofbiz-component.xml
@@ -29,8 +29,7 @@ under the License.
     <test-suite loader="main" location="testdef/basetests.xml"/>
 
     <!-- load the cached classloader container (always second) -->
-    <!-- <container name="classloader-container" loaders="main,rmi,pos,install,test" class="org.ofbiz.base.container.ClassLoaderContainer"/> -->
-    <container name="classloader-container" loaders="main,pos,install,test" class="org.ofbiz.base.container.ClassLoaderContainer"/>
+    <container name="classloader-container" loaders="main,rmi,pos,install,test" class="org.ofbiz.base.container.ClassLoaderContainer"/>
 
     <!-- load the naming (JNDI) server -->
     <container name="naming-container" loaders="rmi" class="org.ofbiz.base.container.NamingServiceContainer">
diff --git a/framework/service/ofbiz-component.xml b/framework/service/ofbiz-component.xml
index d96029fd2c..32330464a4 100644
--- a/framework/service/ofbiz-component.xml
+++ b/framework/service/ofbiz-component.xml
@@ -44,7 +44,7 @@ under the License.
     <keystore name="rmitrust" type="jks" password="changeit" is-truststore="true"
               is-certstore="false" loader="main" location="config/rmitrust.jks"/>
 
-    <container name="service-container" loaders="main,rmi,pos,load-data,test" class="org.ofbiz.service.ServiceContainer">
+    <container name="service-container" loaders="main,rmi,pos,install,test" class="org.ofbiz.service.ServiceContainer">
         <property name="dispatcher-factory" value="org.ofbiz.service.GenericDispatcherFactory"/>
     </container>
 
