commit 9acd878c000c4f2dac5432705733d325bf3ef046
Author:     Jacopo Cappellato <jacopoc@apache.org>
AuthorDate: Wed Feb 10 15:05:51 2016 +0000
Commit:     Jacopo Cappellato <jacopoc@apache.org>
CommitDate: Wed Feb 10 15:05:51 2016 +0000

    Applied fix from trunk for revision: 1729609
    ===
    
    OFBIZ-6568: upgraded Groovy to the latest version (2.4.5).
    [CVE-2016-2170] The infamous Java serialization vulnerability
    
    
    git-svn-id: https://svn.apache.org/repos/asf/ofbiz/branches/release14.12@1729623 13f79535-47bb-0310-9956-ffa450edef68

diff --git a/.classpath b/.classpath
index d50787467e..bcacb96726 100644
--- a/.classpath
+++ b/.classpath
@@ -85,7 +85,7 @@
     <classpathentry kind="lib" path="framework/base/lib/scripting/asm-3.2.jar"/>
     <classpathentry kind="lib" path="framework/base/lib/scripting/bsf-2.4.0.jar"/>
     <classpathentry kind="lib" path="framework/base/lib/scripting/bsh-2.0b4.jar"/>
-    <classpathentry kind="lib" path="framework/base/lib/scripting/groovy-all-2.2.1.jar"/>
+    <classpathentry kind="lib" path="framework/base/lib/scripting/groovy-all-2.4.5.jar"/>
     <classpathentry kind="lib" path="framework/base/lib/scripting/jakarta-oro-2.0.8.jar"/>
     <classpathentry kind="lib" path="framework/base/lib/scripting/jython-nooro.jar"/>
     <classpathentry kind="lib" path="specialpurpose/birt/lib/org.eclipse.birt.runtime_4.3.1.v20130918-1142.jar"/>
diff --git a/LICENSE b/LICENSE
index b714a4ba4c..b7c12c126e 100644
--- a/LICENSE
+++ b/LICENSE
@@ -70,7 +70,7 @@ framework/base/lib/j2eespecs/servlet-api-3.0.jar
 framework/base/lib/owasp-java-html-sanitizer-r239.jar
 framework/base/lib/scripting/bsf-2.4.0.jar
 framework/base/lib/scripting/jakarta-oro-2.0.8.jar
-framework/base/lib/scripting/groovy-all-2.2.1.jar
+framework/base/lib/scripting/groovy-all-2.4.5.jar
 framework/base/lib/scripting/jansi-1.2.1.jar
 framework/base/lib/xmlrpc-client-3.1.2.jar
 framework/base/lib/xmlrpc-common-3.1.2.jar
diff --git a/applications/commonext/webapp/ofbizsetup/organization/changeOrgPartyId.groovy b/applications/commonext/webapp/ofbizsetup/organization/changeOrgPartyId.groovy
index a5418e039c..00d31dedac 100644
--- a/applications/commonext/webapp/ofbizsetup/organization/changeOrgPartyId.groovy
+++ b/applications/commonext/webapp/ofbizsetup/organization/changeOrgPartyId.groovy
@@ -17,6 +17,8 @@
  * under the License.
  */
 
+@BaseScript(org.ofbiz.service.engine.GroovyBaseScript)
+import groovy.transform.BaseScript
 import org.ofbiz.base.util.*;
 
 //partyAcctgPrefAndGroupList
diff --git a/framework/base/lib/scripting/groovy-all-2.2.1.jar b/framework/base/lib/scripting/groovy-all-2.2.1.jar
deleted file mode 100644
index 98daf6df78..0000000000
Binary files a/framework/base/lib/scripting/groovy-all-2.2.1.jar and /dev/null differ
diff --git a/framework/base/lib/scripting/groovy-all-2.4.5.jar b/framework/base/lib/scripting/groovy-all-2.4.5.jar
new file mode 100644
index 0000000000..07835093c0
Binary files /dev/null and b/framework/base/lib/scripting/groovy-all-2.4.5.jar differ
diff --git a/macros.xml b/macros.xml
index fa87a93c88..91d62dff4e 100644
--- a/macros.xml
+++ b/macros.xml
@@ -48,7 +48,7 @@ under the License.
  <patternset id="src.exc.set"/>
 
  <path id="groovy.class.path">
-  <pathelement location="${ofbiz.home.dir}/framework/base/lib/scripting/groovy-all-2.2.1.jar"/>
+  <pathelement location="${ofbiz.home.dir}/framework/base/lib/scripting/groovy-all-2.4.5.jar"/>
  </path>
  <path id="rhino.class.path">
   <pathelement location="${ofbiz.home.dir}/extension/rhino/lib/js-1.7.R1.jar"/>
diff --git a/specialpurpose/ecommerce/webapp/ecommerce/WEB-INF/actions/order/ShipmentStatus.groovy b/specialpurpose/ecommerce/webapp/ecommerce/WEB-INF/actions/order/ShipmentStatus.groovy
index 55757e906c..b4a838de24 100644
--- a/specialpurpose/ecommerce/webapp/ecommerce/WEB-INF/actions/order/ShipmentStatus.groovy
+++ b/specialpurpose/ecommerce/webapp/ecommerce/WEB-INF/actions/order/ShipmentStatus.groovy
@@ -17,6 +17,8 @@
  * under the License.
  */
 
+@BaseScript(org.ofbiz.service.engine.GroovyBaseScript)
+import groovy.transform.BaseScript
 import org.ofbiz.base.util.UtilMisc;
 import org.ofbiz.entity.Delegator;
 import org.ofbiz.entity.*;
