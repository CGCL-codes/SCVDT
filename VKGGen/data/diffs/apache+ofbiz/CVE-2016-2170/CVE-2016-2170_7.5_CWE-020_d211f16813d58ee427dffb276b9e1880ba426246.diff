commit d211f16813d58ee427dffb276b9e1880ba426246
Author:     Jacopo Cappellato <jacopoc@apache.org>
AuthorDate: Wed Feb 10 15:17:02 2016 +0000
Commit:     Jacopo Cappellato <jacopoc@apache.org>
CommitDate: Wed Feb 10 15:17:02 2016 +0000

    Applied fix from trunk for revision: 1729609
    ===
    
    OFBIZ-6568: upgraded Groovy to the latest version (2.4.5).
    [CVE-2016-2170] The infamous Java serialization vulnerability
    
    
    
    git-svn-id: https://svn.apache.org/repos/asf/ofbiz/branches/release13.07@1729627 13f79535-47bb-0310-9956-ffa450edef68

diff --git a/.classpath b/.classpath
index 9c4452d43f..446f65d803 100644
--- a/.classpath
+++ b/.classpath
@@ -95,7 +95,7 @@
     <classpathentry kind="lib" path="framework/base/lib/scripting/asm-util-3.2.jar"/>
     <classpathentry kind="lib" path="framework/base/lib/scripting/bsf-2.4.0.jar"/>
     <classpathentry kind="lib" path="framework/base/lib/scripting/bsh-2.0b4.jar"/>
-    <classpathentry kind="lib" path="framework/base/lib/scripting/groovy-all-2.2.1.jar"/>
+    <classpathentry kind="lib" path="framework/base/lib/scripting/groovy-all-2.4.5.jar"/>
     <classpathentry kind="lib" path="framework/base/lib/scripting/jakarta-oro-2.0.8.jar"/>
     <classpathentry kind="lib" path="framework/base/lib/scripting/jython-nooro.jar"/>
     <!--  classpathentry kind="lib" path="specialpurpose/birt/lib/org.eclipse.birt.runtime_3.7.2.v20120214-1408.jar"/>
diff --git a/LICENSE b/LICENSE
index 34ec9d9df7..c85035c7ad 100644
--- a/LICENSE
+++ b/LICENSE
@@ -74,7 +74,7 @@ framework/base/lib/j2eespecs/jsp-api-2.2.jar
 framework/base/lib/j2eespecs/servlet-api-3.0.jar
 framework/base/lib/scripting/bsf-2.4.0.jar
 framework/base/lib/scripting/jakarta-oro-2.0.8.jar
-framework/base/lib/scripting/groovy-all-2.2.1.jar
+framework/base/lib/scripting/groovy-all-2.4.5.jar
 framework/base/lib/scripting/jansi-1.2.1.jar
 framework/base/lib/xmlrpc-client-3.1.2.jar
 framework/base/lib/xmlrpc-common-3.1.2.jar
diff --git a/applications/commonext/webapp/ofbizsetup/organization/changeOrgPartyId.groovy b/applications/commonext/webapp/ofbizsetup/organization/changeOrgPartyId.groovy
index a5418e039c..00d31dedac 100644
--- a/applications/commonext/webapp/ofbizsetup/organization/changeOrgPartyId.groovy
+++ b/applications/commonext/webapp/ofbizsetup/organization/changeOrgPartyId.groovy
@@ -17,6 +17,8 @@
  * under the License.
  */
 
+@BaseScript(org.ofbiz.service.engine.GroovyBaseScript)
+import groovy.transform.BaseScript
 import org.ofbiz.base.util.*;
 
 //partyAcctgPrefAndGroupList
diff --git a/framework/base/lib/scripting/groovy-all-2.2.1.jar b/framework/base/lib/scripting/groovy-all-2.2.1.jar
deleted file mode 100644
index 98daf6df78..0000000000
Binary files a/framework/base/lib/scripting/groovy-all-2.2.1.jar and /dev/null differ
diff --git a/framework/base/lib/scripting/groovy-all-2.4.5.jar b/framework/base/lib/scripting/groovy-all-2.4.5.jar
new file mode 100644
index 0000000000..07835093c0
Binary files /dev/null and b/framework/base/lib/scripting/groovy-all-2.4.5.jar differ
diff --git a/macros.xml b/macros.xml
index bc85d9ebc9..e6268e27e1 100644
--- a/macros.xml
+++ b/macros.xml
@@ -54,7 +54,7 @@ under the License.
  <patternset id="src.exc.set"/>
 
  <path id="groovy.class.path">
-  <pathelement location="${ofbiz.home.dir}/framework/base/lib/scripting/groovy-all-2.2.1.jar"/>
+  <pathelement location="${ofbiz.home.dir}/framework/base/lib/scripting/groovy-all-2.4.5.jar"/>
  </path>
  <path id="rhino.class.path">
   <pathelement location="${ofbiz.home.dir}/extension/rhino/lib/js-1.7.R1.jar"/>
diff --git a/specialpurpose/ecommerce/webapp/ecommerce/WEB-INF/actions/order/ShipmentStatus.groovy b/specialpurpose/ecommerce/webapp/ecommerce/WEB-INF/actions/order/ShipmentStatus.groovy
index 13b17276e6..40e58c517c 100644
--- a/specialpurpose/ecommerce/webapp/ecommerce/WEB-INF/actions/order/ShipmentStatus.groovy
+++ b/specialpurpose/ecommerce/webapp/ecommerce/WEB-INF/actions/order/ShipmentStatus.groovy
@@ -17,6 +17,8 @@
  * under the License.
  */
 
+@BaseScript(org.ofbiz.service.engine.GroovyBaseScript)
+import groovy.transform.BaseScript
 import org.ofbiz.base.util.UtilMisc;
 import org.ofbiz.entity.Delegator;
 import org.ofbiz.entity.*;
