Index: branches/release16.11/framework/base/src/main/java/org/apache/ofbiz/base/util/test/UtilXmlTests.java
===================================================================
--- branches/release16.11/framework/base/src/main/java/org/apache/ofbiz/base/util/test/UtilXmlTests.java	(revision 1850016)
+++ branches/release16.11/framework/base/src/main/java/org/apache/ofbiz/base/util/test/UtilXmlTests.java	(nonexistent)
@@ -1,48 +0,0 @@
-/*******************************************************************************
- * Licensed to the Apache Software Foundation (ASF) under one
- * or more contributor license agreements.  See the NOTICE file
- * distributed with this work for additional information
- * regarding copyright ownership.  The ASF licenses this file
- * to you under the Apache License, Version 2.0 (the
- * "License"); you may not use this file except in compliance
- * with the License.  You may obtain a copy of the License at
- *
- * http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing,
- * software distributed under the License is distributed on an
- * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
- * KIND, either express or implied.  See the License for the
- * specific language governing permissions and limitations
- * under the License.
- *******************************************************************************/
-package org.apache.ofbiz.base.util.test;
-
-import org.apache.ofbiz.base.test.GenericTestCaseBase;
-import org.apache.ofbiz.base.util.UtilXml;
-
-public class UtilXmlTests extends GenericTestCaseBase {
-
-    public UtilXmlTests(String name) {
-        super(name);
-    }
-
-    public void testUnsupportedClassConverter() throws Exception {
-        String unsupportedClassInXml =
-            "<handler class=\"java.beans.EventHandler\">" +
-                " <target class=\"java.lang.ProcessBuilder\">" +
-                    " <command>" +
-                        " <string>open</string>" +
-                        " <string>.</string>" +
-                    " </command>" +
-                " </target>" +
-                " <action>start</action>" +
-            "</handler>";
-        try {
-            @SuppressWarnings("unused")
-            Object unsupportedObject = UtilXml.fromXml(unsupportedClassInXml);
-            fail("Unsupported class in XML");
-        } catch (Exception e) {
-        }
-    }
-}

Property changes on: branches/release16.11/framework/base/src/main/java/org/apache/ofbiz/base/util/test/UtilXmlTests.java
___________________________________________________________________
Deleted: svn:eol-style
## -1 +0,0 ##
-native
\ No newline at end of property
Deleted: svn:keywords
## -1 +0,0 ##
-Author Date Id Rev URL
\ No newline at end of property
Index: branches/release16.11/framework/base/src/main/java/org/apache/ofbiz/base/util/UtilXml.java
===================================================================
--- branches/release16.11/framework/base/src/main/java/org/apache/ofbiz/base/util/UtilXml.java	(revision 1850016)
+++ branches/release16.11/framework/base/src/main/java/org/apache/ofbiz/base/util/UtilXml.java	(revision 1850017)
@@ -91,7 +91,15 @@
 
     private static XStream createXStream() {
         XStream xstream = new XStream();
-        xstream.registerConverter(new UnsupportedClassConverter());
+        /* This method is a pure helper method for XStream 1.4.x. 
+         * It initializes an XStream instance with a white list of well-known and simply types of the Java runtime
+         *  as it is done in XStream 1.5.x by default. This method will do therefore nothing in XStream 1.5
+         *  and could be removed them  
+         */ 
+        XStream.setupDefaultSecurity(xstream); 
+        /* You may want to enhance the white list created by XStream::setupDefaultSecurity (or by default with XStream 1.5) 
+         * using xstream::allowTypesByWildcard with your own classes
+         */  
         return xstream;
     }
 
@@ -1116,6 +1124,11 @@
         }
     }
 
+    /** This method is now useless
+     * Enhance rather the white list created by XStream::setupDefaultSecurity
+     * using xstream::allowTypesByWildcard with your own classes  
+     */
+    @Deprecated
     private static class UnsupportedClassConverter implements Converter {
 
         @Override
@@ -1140,7 +1153,7 @@
     /**
      * get node name without any prefix
      * @param node
-     * @return
+     * @return nodeName
      */
     public static String getNodeNameIgnorePrefix(Node node){
         if (node==null) return null;
@@ -1155,8 +1168,8 @@
     /**
      * get tag name without any prefix
      * @param node
-     * @return
-     */
+     * @return tagName
+     */ 
     public static String getTagNameIgnorePrefix(Element element){
         if (element==null) return null;
         String tagName = element.getTagName();
@@ -1170,7 +1183,7 @@
     /**
      * get attribute value ignoring prefix in attribute name
      * @param node
-     * @return
+     * @return The value of the node, depending on its type; see the table Node class
      */
     public static String getAttributeValueIgnorePrefix(Element element, String attributeName){
         if (element==null) return "";
Index: branches/release16.11/framework/base/testdef/basetests.xml
===================================================================
--- branches/release16.11/framework/base/testdef/basetests.xml	(revision 1850016)
+++ branches/release16.11/framework/base/testdef/basetests.xml	(revision 1850017)
@@ -42,6 +42,5 @@
         <!--junit-test-suite class-name="org.apache.ofbiz.base.util.test.UtilIOTests"/-->
         <junit-test-suite class-name="org.apache.ofbiz.base.test.BaseUnitTests"/>
         <junit-test-suite class-name="org.apache.ofbiz.base.util.test.UtilPropertiesTests"/>
-        <junit-test-suite class-name="org.apache.ofbiz.base.util.test.UtilXmlTests"/>
     </test-group>
 </test-suite>
Index: branches/release16.11
===================================================================
--- branches/release16.11	(revision 1850016)
+++ branches/release16.11	(revision 1850017)

Property changes on: branches/release16.11
___________________________________________________________________
Modified: svn:mergeinfo
## -0,0 +0,1 ##
   Merged /ofbiz/ofbiz-framework/trunk:r1850015
