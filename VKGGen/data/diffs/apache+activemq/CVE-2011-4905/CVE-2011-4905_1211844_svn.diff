Index: trunk/activemq-core/src/main/java/org/apache/activemq/ActiveMQConnection.java
===================================================================
--- trunk/activemq-core/src/main/java/org/apache/activemq/ActiveMQConnection.java	(revision 1211843)
+++ trunk/activemq-core/src/main/java/org/apache/activemq/ActiveMQConnection.java	(revision 1211844)
@@ -1303,8 +1303,8 @@
                         }
                         JMSException jmsEx = null;
                         try {
-                         jmsEx = JMSExceptionSupport.create(er.getException());
-                        }catch(Throwable e) {
+                            jmsEx = JMSExceptionSupport.create(er.getException());
+                        } catch(Throwable e) {
                             LOG.error("Caught an exception trying to create a JMSException for " +er.getException(),e);
                         }
                         //dispose of transport for security exceptions
@@ -1313,10 +1313,10 @@
                             if (null != t){
                                 ServiceSupport.dispose(t);
                             }
-                            if(jmsEx !=null) {
-                                throw jmsEx;
-                            }
                         }
+                        if (jmsEx !=null) {
+                            throw jmsEx;
+                        }
                     }
                 }
                 return response;
