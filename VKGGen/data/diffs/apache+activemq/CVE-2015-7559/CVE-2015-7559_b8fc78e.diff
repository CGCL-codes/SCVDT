From b8fc78ec6c367cbe2a40a674eaec64ac3d7d1ecb Mon Sep 17 00:00:00 2001
From: Dejan Bosanac <dejan@nighttale.net>
Date: Tue, 18 Oct 2016 12:04:11 +0200
Subject: [PATCH] https://issues.apache.org/jira/browse/AMQ-6470 - Remove
 unused ControlCommand handling in client

(cherry picked from commit 338a74dfa42a7b19d39adecacfa5f626a050e807)
---
 .../apache/activemq/ActiveMQConnection.java   | 20 -------------------
 1 file changed, 20 deletions(-)

diff --git a/activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java b/activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java
index 1f360cb792..8e6c157918 100755
--- a/activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java
+++ b/activemq-client/src/main/java/org/apache/activemq/ActiveMQConnection.java
@@ -1873,7 +1873,6 @@ public void run() {
 
                     @Override
                     public Response processControlCommand(ControlCommand command) throws Exception {
-                        onControlCommand(command);
                         return null;
                     }
 
@@ -2221,25 +2220,6 @@ void send(ActiveMQDestination destination, ActiveMQMessage msg, MessageId messag
         }
     }
 
-    protected void onControlCommand(ControlCommand command) {
-        String text = command.getCommand();
-        if (text != null) {
-            if ("shutdown".equals(text)) {
-                LOG.info("JVM told to shutdown");
-                System.exit(0);
-            }
-
-            // TODO Should we handle the "close" case?
-            // if (false && "close".equals(text)){
-            //     LOG.error("Broker " + getBrokerInfo() + "shutdown connection");
-            //     try {
-            //         close();
-            //     } catch (JMSException e) {
-            //     }
-            // }
-        }
-    }
-
     protected void onConnectionControl(ConnectionControl command) {
         if (command.isFaultTolerant()) {
             this.optimizeAcknowledge = false;
