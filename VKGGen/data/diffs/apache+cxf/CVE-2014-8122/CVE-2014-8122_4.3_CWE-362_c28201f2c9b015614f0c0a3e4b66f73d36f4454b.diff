commit c28201f2c9b015614f0c0a3e4b66f73d36f4454b
Author:     Colm O hEigeartaigh <coheigea@apache.org>
AuthorDate: Tue Mar 15 11:35:09 2016 +0000
Commit:     Colm O hEigeartaigh <coheigea@apache.org>
CommitDate: Tue Mar 15 11:35:09 2016 +0000

    Updating Weld version due to CVE-2014-8122

diff --git a/parent/pom.xml b/parent/pom.xml
index a43e847e6b..0815e51b84 100644
--- a/parent/pom.xml
+++ b/parent/pom.xml
@@ -165,7 +165,7 @@
         <cxf.validation.api.package.version>[1.0.0,2)</cxf.validation.api.package.version>
         <cxf.cdi.api.version>1.1</cxf.cdi.api.version>
         <cxf.json.api.version>1.0</cxf.json.api.version>
-        <cxf.jboss.weld.version>2.1.2.Final</cxf.jboss.weld.version>
+        <cxf.jboss.weld.version>2.3.3.Final</cxf.jboss.weld.version>
         <cxf.jboss.logging.version>3.3.0.Final</cxf.jboss.logging.version>
         <cxf.osgi.validation.api.version>1.1.0</cxf.osgi.validation.api.version>
         <cxf.hibernate.validator.version>5.2.2.Final</cxf.hibernate.validator.version>
diff --git a/systests/cdi/src/test/java/org/apache/cxf/systest/jaxrs/cdi/WeldDiscoverableContainer.java b/systests/cdi/src/test/java/org/apache/cxf/systest/jaxrs/cdi/WeldDiscoverableContainer.java
index db726d899f..2fabdd1317 100644
--- a/systests/cdi/src/test/java/org/apache/cxf/systest/jaxrs/cdi/WeldDiscoverableContainer.java
+++ b/systests/cdi/src/test/java/org/apache/cxf/systest/jaxrs/cdi/WeldDiscoverableContainer.java
@@ -21,7 +21,8 @@ package org.apache.cxf.systest.jaxrs.cdi;
 import org.jboss.weld.environment.Container;
 import org.jboss.weld.environment.ContainerContext;
 import org.jboss.weld.environment.jetty.JettyContainer;
-import org.jboss.weld.environment.tomcat7.Tomcat7Container;
+import org.jboss.weld.environment.tomcat.TomcatContainer;
+import org.jboss.weld.resources.spi.ResourceLoader;
 
 /**
  * Because we are mixing several Servlet Containers in the same project, JBoss Weld
@@ -34,13 +35,13 @@ public class WeldDiscoverableContainer implements Container {
         if (JettyContainer.class.getName().equals(System.getProperty(Container.class.getName()))) {
             delegate = JettyContainer.INSTANCE;
         } else {
-            delegate = Tomcat7Container.INSTANCE;
+            delegate = TomcatContainer.INSTANCE;
         }
     }
 
     @Override
-    public boolean touch(ContainerContext context) throws Exception {
-        return delegate.touch(context);
+    public boolean touch(ResourceLoader loader, ContainerContext context) throws Exception {
+        return delegate.touch(loader, context);
     }
 
     @Override
diff --git a/systests/cdi/src/test/java/org/apache/cxf/systest/jaxrs/cdi/tomcat/AbstractTomcatServer.java b/systests/cdi/src/test/java/org/apache/cxf/systest/jaxrs/cdi/tomcat/AbstractTomcatServer.java
index a28cff335b..2ff0388b1d 100644
--- a/systests/cdi/src/test/java/org/apache/cxf/systest/jaxrs/cdi/tomcat/AbstractTomcatServer.java
+++ b/systests/cdi/src/test/java/org/apache/cxf/systest/jaxrs/cdi/tomcat/AbstractTomcatServer.java
@@ -26,7 +26,7 @@ import java.io.IOException;
 import org.apache.catalina.startup.Tomcat;
 import org.apache.cxf.testutil.common.AbstractBusTestServerBase;
 import org.jboss.weld.environment.Container;
-import org.jboss.weld.environment.tomcat7.Tomcat7Container;
+import org.jboss.weld.environment.tomcat.TomcatContainer;
 
 public abstract class AbstractTomcatServer extends AbstractBusTestServerBase {
 
@@ -44,7 +44,7 @@ public abstract class AbstractTomcatServer extends AbstractBusTestServerBase {
     protected void run() {
         System.setProperty("java.naming.factory.url", "org.eclipse.jetty.jndi");
         System.setProperty("java.naming.factory.initial", "org.eclipse.jetty.jndi.InitialContextFactory");
-        System.setProperty(Container.class.getName(), Tomcat7Container.class.getName());
+        System.setProperty(Container.class.getName(), TomcatContainer.class.getName());
                 
         server = new Tomcat();
         server.setPort(port);
