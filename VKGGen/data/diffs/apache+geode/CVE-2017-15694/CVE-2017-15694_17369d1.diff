From 17369d1664c890cc95afebd4ab26b5e2dffcd2f3 Mon Sep 17 00:00:00 2001
From: Bruce Schuchardt <bschuchardt@pivotal.io>
Date: Wed, 6 Dec 2017 09:00:57 -0800
Subject: [PATCH] GEODE-3923 Provide whitelist/blacklist capability for java
 serialization

Modifying build to require JDK 1.8.0_121 or later
---
 gradle/java.gradle | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/gradle/java.gradle b/gradle/java.gradle
index b20ebc8ec90..22fec1cb2f4 100644
--- a/gradle/java.gradle
+++ b/gradle/java.gradle
@@ -21,9 +21,15 @@ allprojects {
   targetCompatibility = 1.8
   compileJava.options.encoding = 'UTF-8'
 }
+
 subprojects {
   apply plugin: 'java'
 
+  String javaVersion = System.properties['java.version']
+  if (javaVersion.startsWith("1.8.0") && javaVersion.split("_")[1].toInteger() < 121) {
+    throw new GradleException("Java version 1.8.0_121 or later required, but was " + javaVersion)
+  }
+    
   // apply compiler options
   gradle.taskGraph.whenReady({ graph ->
     tasks.withType(JavaCompile).each { javac ->
