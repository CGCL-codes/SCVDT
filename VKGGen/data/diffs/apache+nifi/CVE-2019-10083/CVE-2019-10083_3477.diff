From 8a93d94292d8b42f2aa338fc1151399066c90a95 Mon Sep 17 00:00:00 2001
From: Matt Gilman <matt.c.gilman@gmail.com>
Date: Thu, 16 May 2019 10:02:01 -0400
Subject: [PATCH] NIFI-6302: - Ensuring Process Group contents are pruned when
 appropriate.

---
 .../org/apache/nifi/web/api/ProcessGroupResource.java  | 10 ++++++++++
 1 file changed, 10 insertions(+)

diff --git a/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-web/nifi-web-api/src/main/java/org/apache/nifi/web/api/ProcessGroupResource.java b/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-web/nifi-web-api/src/main/java/org/apache/nifi/web/api/ProcessGroupResource.java
index 4aa59614f2c..f76f6747d1b 100644
--- a/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-web/nifi-web-api/src/main/java/org/apache/nifi/web/api/ProcessGroupResource.java
+++ b/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-web/nifi-web-api/src/main/java/org/apache/nifi/web/api/ProcessGroupResource.java
@@ -475,6 +475,11 @@ public Response updateProcessGroup(
                     final ProcessGroupEntity entity = serviceFacade.updateProcessGroup(revision, processGroupEntity.getComponent());
                     populateRemainingProcessGroupEntityContent(entity);
 
+                    // prune response as necessary
+                    if (entity.getComponent() != null) {
+                        entity.getComponent().setContents(null);
+                    }
+
                     return generateOkResponse(entity).build();
                 }
         );
@@ -1597,6 +1602,11 @@ public Response removeProcessGroup(
                     // delete the process group
                     final ProcessGroupEntity entity = serviceFacade.deleteProcessGroup(revision, processGroupEntity.getId());
 
+                    // prune response as necessary
+                    if (entity.getComponent() != null) {
+                        entity.getComponent().setContents(null);
+                    }
+
                     // create the response
                     return generateOkResponse(entity).build();
                 }
