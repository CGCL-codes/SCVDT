diff --git a/src/main/java/hudson/plugins/favorite/FavoritePlugin.java b/src/main/java/hudson/plugins/favorite/FavoritePlugin.java
index 47f2c6d..9695ab9 100644
--- a/src/main/java/hudson/plugins/favorite/FavoritePlugin.java
+++ b/src/main/java/hudson/plugins/favorite/FavoritePlugin.java
@@ -1,32 +1,25 @@
 package hudson.plugins.favorite;
 
-import com.google.inject.Inject;
 import hudson.Plugin;
 import hudson.model.Item;
 import hudson.model.User;
 import hudson.plugins.favorite.Favorites.FavoriteException;
-import org.acegisecurity.Authentication;
+import jenkins.model.Jenkins;
 import org.kohsuke.stapler.QueryParameter;
 import org.kohsuke.stapler.StaplerRequest;
 import org.kohsuke.stapler.StaplerResponse;
 
-import java.io.IOException;
-import jenkins.model.Jenkins;
-
 import javax.annotation.Nonnull;
+import java.io.IOException;
 
 public class FavoritePlugin extends Plugin {
     // For stapler
-    public void doToggleFavorite(StaplerRequest req, StaplerResponse resp, @QueryParameter String job, @QueryParameter String userName, @QueryParameter Boolean redirect) throws IOException {
-        if ("".equals(userName) || userName == null) {
-            Authentication authentication = Jenkins.getAuthentication();
-            userName = authentication.getName();
-        }
+    public void doToggleFavorite(StaplerRequest req, StaplerResponse resp, @QueryParameter String job, @QueryParameter Boolean redirect) throws IOException {
         Jenkins jenkins = Jenkins.getInstance();
         if (jenkins == null) {
             throw new IllegalStateException("Jenkins not started");
         }
-        User user = jenkins.getUser(userName);
+        User user = User.current();
         if (user != null && !isAnonymous(user)) {
             try {
                 Favorites.toggleFavorite(user, getItem(job));
