commit 2129c9a66cbf8e302b145fd42363cb8df5435995
Author:     john-co <john.co@liferay.com>
AuthorDate: Fri Aug 24 15:53:59 2018 -0700
Commit:     Brian Chan <brian.chan@liferay.com>
CommitDate: Fri Aug 24 20:45:27 2018 -0700

    LPS-84443 Update tc Server due to CVE-2018-1336 DoS vulnerability

diff --git a/app.server.properties b/app.server.properties
index 76b4bd2c8032..4f5297a49e6a 100644
--- a/app.server.properties
+++ b/app.server.properties
@@ -151,7 +151,7 @@
 ## tc Server
 ##
 
-    app.server.tcserver.version=4.0.0
+    app.server.tcserver.version=4.0.2
     app.server.tcserver.dir=${app.server.parent.dir}/tc-server-${app.server.tcserver.version}
     app.server.tcserver.bin.dir=${app.server.tcserver.dir}/instances/liferay/bin
     app.server.tcserver.conf.dir=${app.server.tcserver.dir}/instances/liferay/conf
@@ -167,10 +167,10 @@
     app.server.tcserver.portal.context=ROOT
     app.server.tcserver.portal.dir=${app.server.tcserver.deploy.dir}/${app.server.tcserver.portal.context}
     app.server.tcserver.temp.dir=${app.server.tcserver.dir}/instances/liferay/temp
-    app.server.tcserver.tomcat.version=9.0.6.B.RELEASE
+    app.server.tcserver.tomcat.version=9.0.10.A.RELEASE
     app.server.tcserver.work.dir=${app.server.tcserver.dir}/instances/liferay/work
     app.server.tcserver.zip.name=pivotal-tc-server-developer-${app.server.tcserver.version}.RELEASE.zip
-    app.server.tcserver.zip.url=http://network.pivotal.io/products/pivotal-tcserver/releases/71506/file_groups/917/${app.server.tcserver.zip.name}
+    app.server.tcserver.zip.url=http://network.pivotal.io/products/pivotal-tcserver/releases/136576/${app.server.tcserver.zip.name}
 
 ##
 ## Tomcat
diff --git a/build-test.xml b/build-test.xml
index 5e75fcf9126b..b67127366c36 100644
--- a/build-test.xml
+++ b/build-test.xml
@@ -10331,7 +10331,7 @@ server.detector.server.id=jboss</echo>
 				<equals arg1="${app.server.type}" arg2="tcserver" />
 				<then>
 					<echo file="${liferay.home}/tools/portal-tools-db-upgrade-client/app-server.properties">dir=${app.server.dir}
-extra.lib.dirs=runtimes/tomcat-9.0.6.B.RELEASE/lib
+extra.lib.dirs=runtimes/tomcat-9.0.10.A.RELEASE/lib
 global.lib.dir=instances/liferay/lib
 portal.dir=instances/liferay/webapps/ROOT
 server.detector.server.id=tomcat</echo>
diff --git a/modules/util/portal-tools-db-upgrade-client/properties/app-server.properties b/modules/util/portal-tools-db-upgrade-client/properties/app-server.properties
index 7904f79a74d6..9f9cf042b0f7 100644
--- a/modules/util/portal-tools-db-upgrade-client/properties/app-server.properties
+++ b/modules/util/portal-tools-db-upgrade-client/properties/app-server.properties
@@ -32,8 +32,8 @@
 ## tc Server
 ##
 
-    #dir=../../../../tc-server-4.0.0
-    #extra.lib.dirs=/runtimes/tomcat-9.0.6.B.RELEASE/lib
+    #dir=../../../../tc-server-4.0.2
+    #extra.lib.dirs=/runtimes/tomcat-9.0.10.A.RELEASE/lib
     #global.lib.dir=/instances/liferay/lib
     #portal.dir=/instances/liferay/webapps/ROOT
     #server.detector.server.id=tomcat
diff --git a/modules/util/portal-tools-db-upgrade-client/src/main/java/com/liferay/portal/tools/db/upgrade/client/AppServer.java b/modules/util/portal-tools-db-upgrade-client/src/main/java/com/liferay/portal/tools/db/upgrade/client/AppServer.java
index 53bf79d686be..a9b57cb21479 100644
--- a/modules/util/portal-tools-db-upgrade-client/src/main/java/com/liferay/portal/tools/db/upgrade/client/AppServer.java
+++ b/modules/util/portal-tools-db-upgrade-client/src/main/java/com/liferay/portal/tools/db/upgrade/client/AppServer.java
@@ -45,8 +45,8 @@ public class AppServer {
 
 	public static AppServer getTCServerAppServer() {
 		return new AppServer(
-			"../../../../tc-server-4.0.0",
-			"/runtimes/tomcat-9.0.6.B.RELEASE/lib", "/instances/liferay/lib",
+			"../../../../tc-server-4.0.2",
+			"/runtimes/tomcat-9.0.10.A.RELEASE/lib", "/instances/liferay/lib",
 			"/instances/liferay/webapps/ROOT", "tomcat");
 	}
 
