From 63e078404c1696811a786671f0d19bcf0c7ba70e Mon Sep 17 00:00:00 2001
From: Diogo Moreira Lins <diogo.moreira@liferay.com>
Date: Tue, 7 Mar 2017 13:47:08 -0300
Subject: [PATCH 01/46] Revert "LPS-70780 Remove multiple select switch"

This reverts commit c2af35f4e5bf724e621f574a0bfd300d5cac1b45. (+1 squashed commit)
Squashed commits:
[9f7d813] Revert "LPS-70780 SF"

This reverts commit c1f4874ccac87a7ac58bdf72b9d0420e0a28656c.
---
 .../type/select/internal/SelectDDMFormFieldTypeSettings.java    | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/java/com/liferay/dynamic/data/mapping/type/select/internal/SelectDDMFormFieldTypeSettings.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/java/com/liferay/dynamic/data/mapping/type/select/internal/SelectDDMFormFieldTypeSettings.java
index 5c65636fd581f..3755d81f997b0 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/java/com/liferay/dynamic/data/mapping/type/select/internal/SelectDDMFormFieldTypeSettings.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/java/com/liferay/dynamic/data/mapping/type/select/internal/SelectDDMFormFieldTypeSettings.java
@@ -107,7 +107,7 @@
 
 	@DDMFormField(
 		label = "%allow-multiple-selections",
-		properties = {"showAsSwitcher=true"}, visibilityExpression = "FALSE"
+		properties = {"showAsSwitcher=true"}
 	)
 	public boolean multiple();
 

From 88176b33b03095bf30c95b16bfb05c12d5fe9e0a Mon Sep 17 00:00:00 2001
From: Diogo Moreira Lins <diogo.moreira@liferay.com>
Date: Tue, 14 Mar 2017 09:34:48 -0300
Subject: [PATCH 02/46] LPS-71082 Put a new label for multiple select property

---
 .../SelectDDMFormFieldTemplateContextContributor.java         | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/java/com/liferay/dynamic/data/mapping/type/select/internal/SelectDDMFormFieldTemplateContextContributor.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/java/com/liferay/dynamic/data/mapping/type/select/internal/SelectDDMFormFieldTemplateContextContributor.java
index b91670e892a62..641b36c1057ba 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/java/com/liferay/dynamic/data/mapping/type/select/internal/SelectDDMFormFieldTemplateContextContributor.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/java/com/liferay/dynamic/data/mapping/type/select/internal/SelectDDMFormFieldTemplateContextContributor.java
@@ -86,6 +86,10 @@
 			"chooseAnOption",
 			LanguageUtil.get(resourceBundle, "choose-an-option"));
 
+		stringsMap.put(
+			"chooseOptions",
+			LanguageUtil.get(resourceBundle, "choose-options"));
+
 		parameters.put("strings", stringsMap);
 		parameters.put(
 			"value", getValue(ddmFormFieldRenderingContext.getValue()));

From 451ca1795c90e69fcb2476645ab88dc8a430a976 Mon Sep 17 00:00:00 2001
From: Diogo Moreira Lins <diogo.moreira@liferay.com>
Date: Tue, 14 Mar 2017 09:35:28 -0300
Subject: [PATCH 03/46] LPS-71082 Adding new behavior for the multiple select
 field

---
 .../META-INF/resources/select_field.js        | 103 ++++++++----------
 .../resources/select_search_support.js        |  10 +-
 2 files changed, 52 insertions(+), 61 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select_field.js b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select_field.js
index 668eed2b90361..9a265c1564efa 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select_field.js
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select_field.js
@@ -1,7 +1,11 @@
 AUI.add(
 	'liferay-ddm-form-field-select',
 	function(A) {
-		var CSS_SELECT_TRIGGER_ACTION = 'form-builder-select-field';
+		var CSS_SELECT_BADGE_ITEM = A.getClassName('trigger', 'badge', 'item');
+
+		var CSS_SELECT_OPTION_ITEM = A.getClassName('select', 'option', 'item');
+
+		var CSS_SELECT_TRIGGER_ACTION = A.getClassName('form', 'builder', 'select', 'field');
 
 		var Lang = A.Lang;
 
@@ -30,6 +34,7 @@ AUI.add(
 					strings: {
 						value: {
 							chooseAnOption: Liferay.Language.get('choose-an-option'),
+							chooseOptions: Liferay.Language.get('choose-options'),
 							dynamicallyLoadedData: Liferay.Language.get('dynamically-loaded-data')
 						}
 					},
@@ -57,8 +62,9 @@ AUI.add(
 
 						instance._eventHandlers.push(
 							A.one('doc').after('click', A.bind(instance._afterClickOutside, instance)),
-							instance.bindContainerEvent('mousedown', instance._afterClickSelectTrigger, '.' + CSS_SELECT_TRIGGER_ACTION),
-							instance.bindContainerEvent('mousedown', instance._onClickItem, 'li')
+							instance.bindContainerEvent('click', instance._afterClickSelectTrigger, '.' + CSS_SELECT_TRIGGER_ACTION),
+							instance.bindContainerEvent('click', instance._onClickItem, '.' + CSS_SELECT_OPTION_ITEM),
+							instance.bindContainerEvent('click', instance._onClickBadgeItem, '.' + CSS_SELECT_BADGE_ITEM)
 						);
 					},
 
@@ -92,6 +98,7 @@ AUI.add(
 						return A.merge(
 							SelectField.superclass.getTemplateContext.apply(instance, arguments),
 							{
+								badgeCloseIcon: Liferay.Util.getLexiconIconTpl('times', 'icon-monospaced'),
 								options: instance.get('options'),
 								selectCaretDoubleIcon: Liferay.Util.getLexiconIconTpl('caret-double-l', 'icon-monospaced'),
 								selectSearchIcon: Liferay.Util.getLexiconIconTpl('search', 'icon-monospaced'),
@@ -106,24 +113,17 @@ AUI.add(
 
 						var inputNode = instance.getInputNode();
 
-						var value;
-
-						if (instance.get('multiple')) {
-							value = [];
+						var value = [];
 
-							inputNode.all('option').each(
-								function(optionNode) {
-									if (optionNode.attr('selected')) {
-										value.push(optionNode.val());
-									}
+						inputNode.all('option').each(
+							function(optionNode) {
+								if (optionNode.attr('selected')) {
+									value.push(optionNode.val());
 								}
-							);
+							}
+						);
 
-							value = value.join();
-						}
-						else {
-							value = inputNode.val();
-						}
+						value = value.join();
 
 						if (!value) {
 							var contextValue = instance._getContextValue();
@@ -149,10 +149,6 @@ AUI.add(
 
 						var values = instance._getOptionsSelected(value);
 
-						if (!instance.get('multiple')) {
-							values = values[0];
-						}
-
 						return values;
 					},
 
@@ -194,18 +190,10 @@ AUI.add(
 					setValue: function(value) {
 						var instance = this;
 
-						var inputNode = instance.getInputNode();
-
 						if (!Lang.isArray(value)) {
 							value = [value];
 						}
 
-						inputNode.all('option').each(
-							function(optionNode) {
-								instance._setSelectNodeOptions(optionNode, value);
-							}
-						);
-
 						instance.set('value', value);
 
 						instance.render();
@@ -239,7 +227,7 @@ AUI.add(
 						if (!instance.get('readOnly')) {
 							var target = event.target;
 
-							if (target.ancestor('.search-chosen')) {
+							if (target.ancestor('.search-chosen') || target.ancestor('.trigger-badge-item')) {
 								return;
 							}
 
@@ -330,9 +318,13 @@ AUI.add(
 					_isClickingOutSide: function(event) {
 						var instance = this;
 
-						var ancestor = event.target.ancestor('.' + CSS_SELECT_TRIGGER_ACTION);
+						var container = instance.get('container');
+
+						if (container.contains(event.target)) {
+							return false;
+						}
 
-						return !ancestor || ancestor !== instance._getSelectTriggerAction();
+						return true;
 					},
 
 					_isListOpen: function() {
@@ -349,46 +341,43 @@ AUI.add(
 						return !openList;
 					},
 
-					_onClickItem: function(event) {
+					_onClickBadgeItem: function(event) {
+						event.stopPropagation();
+
 						var instance = this;
 
-						var value = event.target.getAttribute('data-option-value');
+						var values = instance.get('value');
 
-						instance.setValue(value);
-					},
+						var value = event.currentTarget.getAttribute('data-badge-value');
 
-					_selectDOMOption: function(optionNode, value) {
-						var selected = false;
+						var index = values.indexOf(value);
 
-						if (Lang.isArray(value)) {
-							value = value[0];
+						if (index >= 0) {
+							values.splice(index, 1);
 						}
 
-						if (value) {
-							if (optionNode.val()) {
-								selected = value.indexOf(optionNode.val()) > -1;
-							}
-
-							if (selected) {
-								optionNode.attr('selected', selected);
-							}
-							else {
-								optionNode.removeAttribute('selected');
-							}
-						}
+						instance.setValue(values);
 					},
 
-					_setSelectNodeOptions: function(optionNode, value) {
+					_onClickItem: function(event) {
+						event.stopPropagation();
+
 						var instance = this;
 
+						var value;
+
 						if (instance.get('multiple')) {
-							for (var i = 0; i < value.length; i++) {
-								instance._selectDOMOption(optionNode, value[i]);
+							value = instance.get('value');
+
+							if (!event.target.getAttribute('data-option-selected')) {
+								value.push(event.target.getAttribute('data-option-value'));
 							}
 						}
 						else {
-							instance._selectDOMOption(optionNode, value);
+							value = event.target.getAttribute('data-option-value');
 						}
+
+						instance.setValue(value);
 					}
 				}
 			}
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select_search_support.js b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select_search_support.js
index d30c819b817fd..976b2dd8b951c 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select_search_support.js
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select_search_support.js
@@ -74,9 +74,9 @@ AUI.add(
 			_applyFilterStyleOnItem: function(term, item) {
 				var instance = this;
 
-				var content = item.getContent();
+				var content = item.one('span').getContent();
 
-				item.setContent(AHighlight.all(content, term));
+				item.one('span').setContent(AHighlight.all(content, term));
 			},
 
 			_containsString: function(fullString, term) {
@@ -102,7 +102,9 @@ AUI.add(
 
 				var template = instance._getTemplate(
 					{
-						options: options
+						multiple: instance.get('multiple'),
+						options: options,
+						value: instance.getValueSelected()
 					}
 				);
 
@@ -112,7 +114,7 @@ AUI.add(
 			_visitDOMListItems: function(callBack) {
 				var instance = this;
 
-				instance.get('container').all('li').each(callBack);
+				instance.get('container').all('li.select-option-item').each(callBack);
 
 				return instance;
 			}

From 1d7368e0ee0fe56b4c3f48b52468aca0106393ce Mon Sep 17 00:00:00 2001
From: Diogo Moreira Lins <diogo.moreira@liferay.com>
Date: Tue, 14 Mar 2017 09:35:49 -0300
Subject: [PATCH 04/46] LPS-71082 Adding styles for multiple select field

---
 .../META-INF/resources/css/main.scss          | 47 ++++++++++++++++++-
 1 file changed, 46 insertions(+), 1 deletion(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/css/main.scss b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/css/main.scss
index 2299e71888f95..57bae82a04810 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/css/main.scss
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/css/main.scss
@@ -220,7 +220,8 @@
 		border-bottom: 2px solid #869CAD;
 		color: #869CAD;
 		display: block;
-		padding: 10px 5px;
+		height: auto;
+		padding: 8px 5px;
 		text-decoration: none;
 
 		.option-selected-placeholder {
@@ -270,6 +271,11 @@
 				&.option-selected {
 					color: #65B3F0;
 				}
+
+				input[type='checkbox'] {
+					margin: 0;
+					margin-right: 10px;
+				}
 			}
 
 			li:last-child {
@@ -282,6 +288,45 @@
 			}
 		}
 	}
+
+	.multiple-badge-list {
+		display: flex;
+		flex-direction: row;
+		flex-wrap: wrap;
+		list-style: none;
+		margin: 0;
+		padding: 0;
+		padding-right: 20px;
+		width: auto;
+
+		li {
+			overflow: hidden;
+		}
+
+		.multiple-badge {
+			margin-bottom: 0;
+			margin-right: 6px;
+			margin-top: 0;
+			overflow: hidden;
+			padding-bottom: 3px;
+			padding-right: 20px;
+			position: relative;
+			text-overflow: ellipsis;
+			white-space: nowrap;
+
+			a {
+				position: absolute;
+				right: 8px;
+				top: 4px;
+
+				.icon-monospaced.lexicon-icon {
+					margin-bottom: 1px;
+					margin-left: 5px;
+					padding: 0;
+				}
+			}
+		}
+	}
 }
 
 //┌───────────┐

From 4b0a22139a1dfd981329c682e021cd8cf61d3664 Mon Sep 17 00:00:00 2001
From: Diogo Moreira Lins <diogo.moreira@liferay.com>
Date: Tue, 14 Mar 2017 09:38:20 -0300
Subject: [PATCH 05/46] LPS-71082 Prevent the render field if the field value
 is the same context value

---
 .../META-INF/resources/js/form_evaluation_support.js          | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_evaluation_support.js b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_evaluation_support.js
index 617c1b75f9395..447be4e8c431d 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_evaluation_support.js
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_evaluation_support.js
@@ -83,7 +83,9 @@ AUI.add(
 									delete fieldContext.valid;
 								}
 
-								field.setValue(fieldContext.value);
+								if (!Util.compare(field.get('value'), fieldContext.value)) {
+									field.setValue(fieldContext.value);
+								}
 							}
 
 							if (fieldContext.valid) {

From 18017e969e88b8c6f29bc90f6cd9f1ec2e7b6c37 Mon Sep 17 00:00:00 2001
From: Diogo Moreira Lins <diogo.moreira@liferay.com>
Date: Tue, 14 Mar 2017 09:49:16 -0300
Subject: [PATCH 06/46] LPS-71082 Add and Update unit tests

---
 .../src/test/testJS/select_field.js           | 50 ++++++++++++++++---
 .../src/test/testJS/select_search_support.js  |  6 +--
 2 files changed, 46 insertions(+), 10 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/test/testJS/select_field.js b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/test/testJS/select_field.js
index 6a1a95fe6d838..e330e2e4beb80 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/test/testJS/select_field.js
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/test/testJS/select_field.js
@@ -181,7 +181,7 @@ describe(
 					}
 				);
 
-				xit(
+				it(
 					'should return string values for multiple selectField',
 					function(done) {
 						selectField = createSelectField(
@@ -237,7 +237,7 @@ describe(
 
 						selectField.set('value', '19');
 
-						assert.equal(selectField.getValueSelected().label, 'b');
+						assert.equal(selectField.getValueSelected()[0].label, 'b');
 
 						done();
 					}
@@ -259,7 +259,7 @@ describe(
 
 						assert.isFalse(divSelect.hasClass('active'));
 
-						divSelect.simulate('mousedown');
+						divSelect.simulate('click');
 
 						assert.isTrue(divSelect.hasClass('active'));
 
@@ -281,7 +281,7 @@ describe(
 
 						var divSelect = container.one('.form-builder-select-field');
 
-						divSelect.simulate('mousedown');
+						divSelect.simulate('click');
 
 						assert.isNull(container.one('.drop-chosen.hide'));
 
@@ -302,7 +302,7 @@ describe(
 
 						var divSelect = container.one('.form-builder-select-field');
 
-						divSelect.simulate('mousedown');
+						divSelect.simulate('click');
 
 						assert.isTrue(divSelect.hasClass('active'));
 
@@ -352,16 +352,52 @@ describe(
 
 						var container = selectField.get('container');
 
-						container.one('.form-builder-select-field').simulate('mousedown');
+						container.one('.form-builder-select-field').simulate('click');
 
 						var item = container.one('.form-builder-select-field').one('.drop-chosen ul li');
 
-						item.simulate('mousedown');
+						item.simulate('click');
 
 						assert.equal(selectField.getValue(), 'foo');
 					}
 				);
 			}
 		);
+
+		describe(
+			'.clickBadgeItem()',
+			function() {
+				it(
+					'should click in a badge item and return a empty array value',
+					function(done) {
+						selectField = createSelectField(
+							{
+								multiple: true,
+								options: [{label: 'foo', value: 'foo'}, {label: 'bar', value: 'bar'}]
+							}
+						);
+
+						var container = selectField.get('container');
+
+						container.one('.form-builder-select-field').simulate('click');
+
+						var item = container.one('.form-builder-select-field').one('.drop-chosen ul li');
+
+						item.simulate('click');
+
+						window.setTimeout(
+							function() {
+								container.one('.trigger-badge-item').simulate('click');
+
+								assert.equal(selectField.get('value').length, 0);
+
+								done();
+							},
+							600
+						);
+					}
+				);
+			}
+		);
 	}
 );
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/test/testJS/select_search_support.js b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/test/testJS/select_search_support.js
index 3741b906ff3f7..229ac006cad57 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/test/testJS/select_search_support.js
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/test/testJS/select_search_support.js
@@ -171,7 +171,7 @@ describe(
 
 						var container = selectField.get('container');
 
-						var beforeSearchList = container.one('.drop-chosen ul').getHTML();
+						var beforeSearchListSize = container.all('.drop-chosen li').size();
 
 						var inputElement = container.one('input');
 
@@ -181,9 +181,9 @@ describe(
 
 						window.setTimeout(
 							function() {
-								var afterSearchList = container.one('.drop-chosen ul').getHTML();
+								var afterSearchListSize = container.all('.drop-chosen li').size();
 
-								assert.strictEqual(beforeSearchList, afterSearchList);
+								assert.strictEqual(beforeSearchListSize, afterSearchListSize);
 
 								done();
 							},

From 63db8857f299f6b271d8378e69bb6e6be9af25c6 Mon Sep 17 00:00:00 2001
From: Diogo Moreira Lins <diogo.moreira@liferay.com>
Date: Tue, 14 Mar 2017 09:49:30 -0300
Subject: [PATCH 07/46] LPS-71082 multiple select markup

---
 .../resources/META-INF/resources/select.soy   | 162 ++++++++++++++----
 1 file changed, 125 insertions(+), 37 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select.soy b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select.soy
index bab50a56310a6..f33282904b89c 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select.soy
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select.soy
@@ -10,6 +10,7 @@
 /**
  * Prints the DDM form select field.
  *
+ * @param? badgeCloseIcon
  * @param? childElementsHTML
  * @param dir
  * @param label
@@ -21,14 +22,12 @@
  * @param? selectCaretDoubleIcon
  * @param? selectSearchIcon
  * @param showLabel
- * @param tip
  * @param strings
+ * @param tip
  * @param value
  * @param visible
  */
 {template .select autoescape="deprecated-contextual"}
-	{let $optionsSelected: $value /}
-
 	<div class="form-group{$visible ? '' : ' hide'}" data-fieldname="{$name}">
 		<div class="input-select-wrapper">
 
@@ -42,24 +41,45 @@
 					{call ddm.hidden_select data="all"/}
 				{/if}
 
-				{if not $multiple}
-					<a class="form-control select-field-trigger" dir="{$dir}" href="javascript:;" id="{$name}" name="{$name}">
-						{if not $readOnly}
-							{if $optionsSelected and $optionsSelected.value}
-								<span class="option-selected">{$optionsSelected.label}</span>
+				<div class="form-control select-field-trigger" dir="{$dir}" id="{$name}" name="{$name}">
+					{if $selectCaretDoubleIcon}
+						<a class="select-arrow-down-container" href="javascript:;">{$selectCaretDoubleIcon|noAutoescape}</a>
+					{/if}
+
+					{if $readOnly}
+						<span class="option-selected option-selected-placeholder">{$multiple ? $strings.chooseOptions : $strings.chooseAnOption}</span>
+					{else}
+						{if $multiple}
+							{if length($value) == 0}
+								<span class="option-selected option-selected-placeholder">{$strings.chooseOptions}</span>
 							{else}
-								<span class="option-selected option-selected-placeholder">{$strings.chooseAnOption}</span>
+								<ul class="multiple-badge-list">
+									{foreach $currentValue in $value}
+										{call ddm.badge_item}
+											{param badgeCloseIcon: $badgeCloseIcon /}
+											{param value: $currentValue.value /}
+											{param label: $currentValue.label /}
+										{/call}
+									{/foreach}
+								</ul>
 							{/if}
+
 						{else}
-							<span class="option-selected option-selected-placeholder">{$strings.chooseAnOption}</span>
+							{if $value and length($value) > 0}
+								{foreach $currentValue in $value}
+									{if $currentValue and $currentValue.label}
+										<span class="option-selected">{$currentValue.label}</span>
+									{/if}
+								{/foreach}
+							{else}
+								<span class="option-selected option-selected-placeholder">{$strings.chooseAnOption}</span>
+							{/if}
 						{/if}
-					</a>
-				{else}
-					//TODO Multiple select
-				{/if}
+					{/if}
+				</div>
 
 				{if not $readOnly}
-					<div class="drop-chosen hide">
+					<div class="drop-chosen {$multiple and length($value) > 0 ? '' : 'hide'}">
 						<div class="search-chosen">
 							<div class="select-search-container">
 								{if $selectSearchIcon}
@@ -74,10 +94,6 @@
 					</div>
 				{/if}
 
-				{if $selectCaretDoubleIcon}
-					<a class="select-arrow-down-container" href="javascript:;">{$selectCaretDoubleIcon|noAutoescape}</a>
-				{/if}
-
 			</div>
 
 			{if $childElementsHTML}
@@ -87,10 +103,26 @@
 	</div>
 {/template}
 
+/**
+ * Prints the badge item to multiple select.
+ *
+ * @param badgeCloseIcon
+ * @param label
+ * @param value
+ */
+{template .badge_item autoescape="deprecated-contextual"}
+	<li>
+		<span class="badge badge-default badge-sm multiple-badge">
+			{$label}
+			<a class="trigger-badge-item" data-badge-value="{$value}" href="javascript:void(0)">{$badgeCloseIcon|noAutoescape}</a>
+		</span>
+	</li>
+{/template}
+
 /**
  * Prints the select label.
- * @param name
  * @param label
+ * @param name
  * @param required
  * @param tip
  */
@@ -115,47 +147,103 @@
  * @param name
  * @param options
  * @param readOnly
- * @param value
  * @param strings
+ * @param value
  */
 {template .hidden_select autoescape="deprecated-contextual"}
 	<select class="form-control hide" dir="{$dir}" id="{$name}" name="{$name}" {if $multiple}multiple size="{length($options)}"{/if}>
 		{if not $readOnly}
-			<option dir="{$dir}" disabled {if not $value}selected{/if} value="">
+			<option dir="{$dir}" disabled {if length($value) == 0}selected{/if} value="">
 				{$strings.chooseAnOption}
 			</option>
 		{/if}
 
 		{foreach $option in $options}
-			{let $selectedValue}
-				{if $value and $value.value}
-					{$value.value}
-				{/if}
-			{/let}
-
-			<option dir="{$dir}" {if $selectedValue == $option.value}selected{/if} value="{$option.value}">{$option.label}</option>
+			{if $multiple}
+				{call ddm.select_multiple_selection}
+					{param dir: $dir /}
+					{param option: $option /}
+					{param values: $value /}
+				{/call}
+			{else}
+				{call ddm.select_single_selection}
+					{param dir: $dir /}
+					{param option: $option /}
+					{param value: $value /}
+				{/call}
+			{/if}
 		{/foreach}
 	</select>
 {/template}
 
 /**
- * Prints the DDM form select field options.
+ * Prints the DDM form hidden select single options.
+ *
+ * @param dir
+ * @param option
+ * @param value
+ */
+{template .select_single_selection autoescape="deprecated-contextual"}
+	{let $selected}
+		{if $value}
+			{foreach $currentValue in $value}
+				{if $currentValue.value == $option.value}
+					selected
+				{/if}
+			{/foreach}
+		{/if}
+	{/let}
+
+	<option dir="{$dir}" {$selected} value="{$option.value}">{$option.label}</option>
+{/template}
+
+/**
+ * Prints the DDM form hidden select multiple options.
  *
+ * @param dir
+ * @param option
+ * @param values
+ */
+{template .select_multiple_selection autoescape="deprecated-contextual"}
+	{let $selected}
+		{if $values}
+			{foreach $currentValue in $values}
+				{if $currentValue.value == $option.value}
+					selected
+				{/if}
+			{/foreach}
+		{/if}
+	{/let}
+
+	<option dir="{$dir}" {$selected} value="{$option.value}">{$option.label}</option>
+{/template}
+
+/**
+ * Prints the DDM form select field UI itens.
+ *
+ * @param multiple
  * @param options
  * @param value
  */
 {template .select_options autoescape="deprecated-contextual"}
-	{let $optionsSelected: $value /}
-
 	{foreach $option in $options}
-		{let $selectedValue}
-			{if $optionsSelected and $optionsSelected.value}
-				{$optionsSelected.value}
+		{let $selected}
+			{if $value}
+				{foreach $currentValue in $value}
+					{if $currentValue.value == $option.value}
+						selected
+					{/if}
+				{/foreach}
 			{/if}
 		{/let}
 
-		<li class="{if $selectedValue == $option.value}option-selected{/if}" data-option-index="{index($option)}" data-option-value="{$option.value}">
-			{$option.label}
+		<li class="select-option-item {if $selected}option-selected{/if}" data-option-index="{index($option)}" data-option-selected="{if $selected}true{/if}" data-option-value="{$option.value}">
+			{if $multiple}
+				<input type="checkbox" value="" {if $selected}checked{/if}>
+			{/if}
+			<span data-option-selected="{if $selected}true{/if}" data-option-value="{$option.value}">
+				{$option.label}
+			</span>
 		</li>
 	{/foreach}
 {/template}
\ No newline at end of file

From 0b787e61b737c948ed61e4fa101b0c9bf486fd0b Mon Sep 17 00:00:00 2001
From: Diogo Moreira Lins <diogo.moreira@liferay.com>
Date: Tue, 14 Mar 2017 09:49:41 -0300
Subject: [PATCH 08/46] LPS-71082 Build Soy

---
 .../META-INF/resources/select.soy.js          | 114 +++++++++++++++---
 1 file changed, 97 insertions(+), 17 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select.soy.js b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select.soy.js
index 73e92cb60aec3..6cc0fb9a72ec8 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select.soy.js
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select.soy.js
@@ -20,9 +20,37 @@ soy.$$registerDelegateFn(soy.$$getDelTemplateId('ddm.field'), 'select', 0, ddm._
 
 
 ddm.select = function(opt_data, opt_ignored) {
-  var output = '';
-  var optionsSelected__soy5 = opt_data.value;
-  output += '<div class="form-group' + soy.$$escapeHtmlAttribute(opt_data.visible ? '' : ' hide') + '" data-fieldname="' + soy.$$escapeHtmlAttribute(opt_data.name) + '"><div class="input-select-wrapper">' + ((opt_data.showLabel) ? ddm.select_label(opt_data) : '') + '<div class="form-builder-select-field input-group-container">' + ((! opt_data.readOnly) ? ddm.hidden_select(opt_data) : '') + ((! opt_data.multiple) ? '<a class="form-control select-field-trigger" dir="' + soy.$$escapeHtmlAttribute(opt_data.dir) + '" href="javascript:;" id="' + soy.$$escapeHtmlAttribute(opt_data.name) + '" name="' + soy.$$escapeHtmlAttribute(opt_data.name) + '">' + ((! opt_data.readOnly) ? (optionsSelected__soy5 && optionsSelected__soy5.value) ? '<span class="option-selected">' + soy.$$escapeHtml(optionsSelected__soy5.label) + '</span>' : '<span class="option-selected option-selected-placeholder">' + soy.$$escapeHtml(opt_data.strings.chooseAnOption) + '</span>' : '<span class="option-selected option-selected-placeholder">' + soy.$$escapeHtml(opt_data.strings.chooseAnOption) + '</span>') + '</a>' : '') + ((! opt_data.readOnly) ? '<div class="drop-chosen hide"><div class="search-chosen"><div class="select-search-container">' + ((opt_data.selectSearchIcon) ? '<a class="" href="javascript:;">' + soy.$$filterNoAutoescape(opt_data.selectSearchIcon) + '</a>' : '') + '</div><input autocomplete="off" class="drop-chosen-search" placeholder="Search" type="text"></div><ul class="results-chosen">' + ddm.select_options(opt_data) + '</ul></div>' : '') + ((opt_data.selectCaretDoubleIcon) ? '<a class="select-arrow-down-container" href="javascript:;">' + soy.$$filterNoAutoescape(opt_data.selectCaretDoubleIcon) + '</a>' : '') + '</div>' + ((opt_data.childElementsHTML) ? soy.$$filterNoAutoescape(opt_data.childElementsHTML) : '') + '</div></div>';
+  var output = '<div class="form-group' + soy.$$escapeHtmlAttribute(opt_data.visible ? '' : ' hide') + '" data-fieldname="' + soy.$$escapeHtmlAttribute(opt_data.name) + '"><div class="input-select-wrapper">' + ((opt_data.showLabel) ? ddm.select_label(opt_data) : '') + '<div class="form-builder-select-field input-group-container">' + ((! opt_data.readOnly) ? ddm.hidden_select(opt_data) : '') + '<div class="form-control select-field-trigger" dir="' + soy.$$escapeHtmlAttribute(opt_data.dir) + '" id="' + soy.$$escapeHtmlAttribute(opt_data.name) + '" name="' + soy.$$escapeHtmlAttribute(opt_data.name) + '">' + ((opt_data.selectCaretDoubleIcon) ? '<a class="select-arrow-down-container" href="javascript:;">' + soy.$$filterNoAutoescape(opt_data.selectCaretDoubleIcon) + '</a>' : '');
+  if (opt_data.readOnly) {
+    output += '<span class="option-selected option-selected-placeholder">' + soy.$$escapeHtml(opt_data.multiple ? opt_data.strings.chooseOptions : opt_data.strings.chooseAnOption) + '</span>';
+  } else {
+    if (opt_data.multiple) {
+      if (opt_data.value.length == 0) {
+        output += '<span class="option-selected option-selected-placeholder">' + soy.$$escapeHtml(opt_data.strings.chooseOptions) + '</span>';
+      } else {
+        output += '<ul class="multiple-badge-list">';
+        var currentValueList49 = opt_data.value;
+        var currentValueListLen49 = currentValueList49.length;
+        for (var currentValueIndex49 = 0; currentValueIndex49 < currentValueListLen49; currentValueIndex49++) {
+          var currentValueData49 = currentValueList49[currentValueIndex49];
+          output += ddm.badge_item({badgeCloseIcon: opt_data.badgeCloseIcon, value: currentValueData49.value, label: currentValueData49.label});
+        }
+        output += '</ul>';
+      }
+    } else {
+      if (opt_data.value && opt_data.value.length > 0) {
+        var currentValueList60 = opt_data.value;
+        var currentValueListLen60 = currentValueList60.length;
+        for (var currentValueIndex60 = 0; currentValueIndex60 < currentValueListLen60; currentValueIndex60++) {
+          var currentValueData60 = currentValueList60[currentValueIndex60];
+          output += (currentValueData60 && currentValueData60.label) ? '<span class="option-selected">' + soy.$$escapeHtml(currentValueData60.label) + '</span>' : '';
+        }
+      } else {
+        output += '<span class="option-selected option-selected-placeholder">' + soy.$$escapeHtml(opt_data.strings.chooseAnOption) + '</span>';
+      }
+    }
+  }
+  output += '</div>' + ((! opt_data.readOnly) ? '<div class="drop-chosen ' + soy.$$escapeHtmlAttribute(opt_data.multiple && opt_data.value.length > 0 ? '' : 'hide') + '"><div class="search-chosen"><div class="select-search-container">' + ((opt_data.selectSearchIcon) ? '<a class="" href="javascript:;">' + soy.$$filterNoAutoescape(opt_data.selectSearchIcon) + '</a>' : '') + '</div><input autocomplete="off" class="drop-chosen-search" placeholder="Search" type="text"></div><ul class="results-chosen">' + ddm.select_options(opt_data) + '</ul></div>' : '') + '</div>' + ((opt_data.childElementsHTML) ? soy.$$filterNoAutoescape(opt_data.childElementsHTML) : '') + '</div></div>';
   return output;
 };
 if (goog.DEBUG) {
@@ -30,6 +58,14 @@ if (goog.DEBUG) {
 }
 
 
+ddm.badge_item = function(opt_data, opt_ignored) {
+  return '<li><span class="badge badge-default badge-sm multiple-badge">' + soy.$$escapeHtml(opt_data.label) + '<a class="trigger-badge-item" data-badge-value="' + soy.$$escapeHtmlAttribute(opt_data.value) + '" href="javascript:void(0)">' + soy.$$filterNoAutoescape(opt_data.badgeCloseIcon) + '</a></span></li>';
+};
+if (goog.DEBUG) {
+  ddm.badge_item.soyTemplateName = 'ddm.badge_item';
+}
+
+
 ddm.select_label = function(opt_data, opt_ignored) {
   return '<label class="control-label" for="' + soy.$$escapeHtmlAttribute(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.label) + ((opt_data.required) ? '<span class="icon-asterisk text-warning"></span>' : '') + '</label>' + ((opt_data.tip) ? '<p class="liferay-ddm-form-field-tip">' + soy.$$escapeHtml(opt_data.tip) + '</p>' : '');
 };
@@ -39,13 +75,12 @@ if (goog.DEBUG) {
 
 
 ddm.hidden_select = function(opt_data, opt_ignored) {
-  var output = '<select class="form-control hide" dir="' + soy.$$escapeHtmlAttribute(opt_data.dir) + '" id="' + soy.$$escapeHtmlAttribute(opt_data.name) + '" name="' + soy.$$escapeHtmlAttribute(opt_data.name) + '" ' + ((opt_data.multiple) ? 'multiple size="' + soy.$$escapeHtmlAttribute(opt_data.options.length) + '"' : '') + '>' + ((! opt_data.readOnly) ? '<option dir="' + soy.$$escapeHtmlAttribute(opt_data.dir) + '" disabled ' + ((! opt_data.value) ? 'selected' : '') + ' value="">' + soy.$$escapeHtml(opt_data.strings.chooseAnOption) + '</option>' : '');
-  var optionList122 = opt_data.options;
-  var optionListLen122 = optionList122.length;
-  for (var optionIndex122 = 0; optionIndex122 < optionListLen122; optionIndex122++) {
-    var optionData122 = optionList122[optionIndex122];
-    var selectedValue__soy107 = '' + ((opt_data.value && opt_data.value.value) ? soy.$$escapeHtml(opt_data.value.value) : '');
-    output += '<option dir="' + soy.$$escapeHtmlAttribute(opt_data.dir) + '" ' + ((selectedValue__soy107 == optionData122.value) ? 'selected' : '') + ' value="' + soy.$$escapeHtmlAttribute(optionData122.value) + '">' + soy.$$escapeHtml(optionData122.label) + '</option>';
+  var output = '<select class="form-control hide" dir="' + soy.$$escapeHtmlAttribute(opt_data.dir) + '" id="' + soy.$$escapeHtmlAttribute(opt_data.name) + '" name="' + soy.$$escapeHtmlAttribute(opt_data.name) + '" ' + ((opt_data.multiple) ? 'multiple size="' + soy.$$escapeHtmlAttribute(opt_data.options.length) + '"' : '') + '>' + ((! opt_data.readOnly) ? '<option dir="' + soy.$$escapeHtmlAttribute(opt_data.dir) + '" disabled ' + ((opt_data.value.length == 0) ? 'selected' : '') + ' value="">' + soy.$$escapeHtml(opt_data.strings.chooseAnOption) + '</option>' : '');
+  var optionList146 = opt_data.options;
+  var optionListLen146 = optionList146.length;
+  for (var optionIndex146 = 0; optionIndex146 < optionListLen146; optionIndex146++) {
+    var optionData146 = optionList146[optionIndex146];
+    output += (opt_data.multiple) ? ddm.select_multiple_selection({dir: opt_data.dir, option: optionData146, values: opt_data.value}) : ddm.select_single_selection({dir: opt_data.dir, option: optionData146, value: opt_data.value});
   }
   output += '</select>';
   return output;
@@ -55,15 +90,60 @@ if (goog.DEBUG) {
 }
 
 
+ddm.select_single_selection = function(opt_data, opt_ignored) {
+  var output = '';
+  var selected__soy150 = '';
+  if (opt_data.value) {
+    var currentValueList156 = opt_data.value;
+    var currentValueListLen156 = currentValueList156.length;
+    for (var currentValueIndex156 = 0; currentValueIndex156 < currentValueListLen156; currentValueIndex156++) {
+      var currentValueData156 = currentValueList156[currentValueIndex156];
+      selected__soy150 += (currentValueData156.value == opt_data.option.value) ? 'selected' : '';
+    }
+  }
+  output += '<option dir="' + soy.$$escapeHtmlAttribute(opt_data.dir) + '" ' + soy.$$filterHtmlAttributes(selected__soy150) + ' value="' + soy.$$escapeHtmlAttribute(opt_data.option.value) + '">' + soy.$$escapeHtml(opt_data.option.label) + '</option>';
+  return output;
+};
+if (goog.DEBUG) {
+  ddm.select_single_selection.soyTemplateName = 'ddm.select_single_selection';
+}
+
+
+ddm.select_multiple_selection = function(opt_data, opt_ignored) {
+  var output = '';
+  var selected__soy168 = '';
+  if (opt_data.values) {
+    var currentValueList174 = opt_data.values;
+    var currentValueListLen174 = currentValueList174.length;
+    for (var currentValueIndex174 = 0; currentValueIndex174 < currentValueListLen174; currentValueIndex174++) {
+      var currentValueData174 = currentValueList174[currentValueIndex174];
+      selected__soy168 += (currentValueData174.value == opt_data.option.value) ? 'selected' : '';
+    }
+  }
+  output += '<option dir="' + soy.$$escapeHtmlAttribute(opt_data.dir) + '" ' + soy.$$filterHtmlAttributes(selected__soy168) + ' value="' + soy.$$escapeHtmlAttribute(opt_data.option.value) + '">' + soy.$$escapeHtml(opt_data.option.label) + '</option>';
+  return output;
+};
+if (goog.DEBUG) {
+  ddm.select_multiple_selection.soyTemplateName = 'ddm.select_multiple_selection';
+}
+
+
 ddm.select_options = function(opt_data, opt_ignored) {
   var output = '';
-  var optionsSelected__soy126 = opt_data.value;
-  var optionList142 = opt_data.options;
-  var optionListLen142 = optionList142.length;
-  for (var optionIndex142 = 0; optionIndex142 < optionListLen142; optionIndex142++) {
-    var optionData142 = optionList142[optionIndex142];
-    var selectedValue__soy127 = '' + ((optionsSelected__soy126 && optionsSelected__soy126.value) ? soy.$$escapeHtml(optionsSelected__soy126.value) : '');
-    output += '<li class="' + ((selectedValue__soy127 == optionData142.value) ? 'option-selected' : '') + '" data-option-index="' + soy.$$escapeHtmlAttribute(optionIndex142) + '" data-option-value="' + soy.$$escapeHtmlAttribute(optionData142.value) + '">' + soy.$$escapeHtml(optionData142.label) + '</li>';
+  var optionList223 = opt_data.options;
+  var optionListLen223 = optionList223.length;
+  for (var optionIndex223 = 0; optionIndex223 < optionListLen223; optionIndex223++) {
+    var optionData223 = optionList223[optionIndex223];
+    var selected__soy186 = '';
+    if (opt_data.value) {
+      var currentValueList192 = opt_data.value;
+      var currentValueListLen192 = currentValueList192.length;
+      for (var currentValueIndex192 = 0; currentValueIndex192 < currentValueListLen192; currentValueIndex192++) {
+        var currentValueData192 = currentValueList192[currentValueIndex192];
+        selected__soy186 += (currentValueData192.value == optionData223.value) ? 'selected' : '';
+      }
+    }
+    output += '<li class="select-option-item ' + ((selected__soy186) ? 'option-selected' : '') + '" data-option-index="' + soy.$$escapeHtmlAttribute(optionIndex223) + '" data-option-selected="' + ((selected__soy186) ? 'true' : '') + '" data-option-value="' + soy.$$escapeHtmlAttribute(optionData223.value) + '">' + ((opt_data.multiple) ? '<input type="checkbox" value="" ' + ((selected__soy186) ? 'checked' : '') + '>' : '') + '<span data-option-selected="' + ((selected__soy186) ? 'true' : '') + '" data-option-value="' + soy.$$escapeHtmlAttribute(optionData223.value) + '">' + soy.$$escapeHtml(optionData223.label) + '</span></li>';
   }
   return output;
 };

From 3bda4ef7271314e1811693d5ea3f2bad6b16e331 Mon Sep 17 00:00:00 2001
From: Diogo Moreira Lins <diogo.moreira@liferay.com>
Date: Tue, 14 Mar 2017 09:54:57 -0300
Subject: [PATCH 09/46] LPS-71082 Build Lang

---
 .../src/main/resources/content/Language.properties               | 1 +
 .../src/main/resources/content/Language_ar.properties            | 1 +
 .../src/main/resources/content/Language_bg.properties            | 1 +
 .../src/main/resources/content/Language_ca.properties            | 1 +
 .../src/main/resources/content/Language_cs.properties            | 1 +
 .../src/main/resources/content/Language_da.properties            | 1 +
 .../src/main/resources/content/Language_de.properties            | 1 +
 .../src/main/resources/content/Language_el.properties            | 1 +
 .../src/main/resources/content/Language_en.properties            | 1 +
 .../src/main/resources/content/Language_es.properties            | 1 +
 .../src/main/resources/content/Language_et.properties            | 1 +
 .../src/main/resources/content/Language_eu.properties            | 1 +
 .../src/main/resources/content/Language_fa.properties            | 1 +
 .../src/main/resources/content/Language_fi.properties            | 1 +
 .../src/main/resources/content/Language_fr.properties            | 1 +
 .../src/main/resources/content/Language_gl.properties            | 1 +
 .../src/main/resources/content/Language_hi_IN.properties         | 1 +
 .../src/main/resources/content/Language_hr.properties            | 1 +
 .../src/main/resources/content/Language_hu.properties            | 1 +
 .../src/main/resources/content/Language_in.properties            | 1 +
 .../src/main/resources/content/Language_it.properties            | 1 +
 .../src/main/resources/content/Language_iw.properties            | 1 +
 .../src/main/resources/content/Language_ja.properties            | 1 +
 .../src/main/resources/content/Language_ko.properties            | 1 +
 .../src/main/resources/content/Language_lo.properties            | 1 +
 .../src/main/resources/content/Language_lt.properties            | 1 +
 .../src/main/resources/content/Language_nb.properties            | 1 +
 .../src/main/resources/content/Language_nl.properties            | 1 +
 .../src/main/resources/content/Language_nl_BE.properties         | 1 +
 .../src/main/resources/content/Language_pl.properties            | 1 +
 .../src/main/resources/content/Language_pt_BR.properties         | 1 +
 .../src/main/resources/content/Language_pt_PT.properties         | 1 +
 .../src/main/resources/content/Language_ro.properties            | 1 +
 .../src/main/resources/content/Language_ru.properties            | 1 +
 .../src/main/resources/content/Language_sk.properties            | 1 +
 .../src/main/resources/content/Language_sl.properties            | 1 +
 .../src/main/resources/content/Language_sr_RS.properties         | 1 +
 .../src/main/resources/content/Language_sr_RS_latin.properties   | 1 +
 .../src/main/resources/content/Language_sv.properties            | 1 +
 .../src/main/resources/content/Language_th.properties            | 1 +
 .../src/main/resources/content/Language_tr.properties            | 1 +
 .../src/main/resources/content/Language_uk.properties            | 1 +
 .../src/main/resources/content/Language_vi.properties            | 1 +
 .../src/main/resources/content/Language_zh_CN.properties         | 1 +
 .../src/main/resources/content/Language_zh_TW.properties         | 1 +
 45 files changed, 45 insertions(+)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language.properties
index 64be274389b95..0cd1927883fd9 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Allow Multiple Selections
 choose-an-option=Choose an Option
+choose-options=Choose options
 create-list=Create List
 dynamically-loaded-data=Dynamically Loaded Data
 select-field-type-label=Select from List
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_ar.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_ar.properties
index 1df1eed6fcd26..fdae09dcae9ac 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_ar.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_ar.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=السماح بتحديدات متعددة (Automatic Translation)
 choose-an-option=اختر خيار (Automatic Translation)
+choose-options=اختر خيارات (Automatic Translation)
 create-list=إنشاء قائمة (Automatic Translation)
 dynamically-loaded-data=بيانات تم تحميلها بشكل حيوي (Automatic Translation)
 select-field-type-label=حدد من القائمة (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_bg.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_bg.properties
index ae3a3ce1f56cc..088cc98abefce 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_bg.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_bg.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Позволен е множествен избор (Automatic Translation)
 choose-an-option=Изберете опция (Automatic Translation)
+choose-options=Изберете Опции (Automatic Translation)
 create-list=Създаване на списък (Automatic Translation)
 dynamically-loaded-data=Динамично натоварени данни (Automatic Translation)
 select-field-type-label=Изберете от списъка (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_ca.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_ca.properties
index 60290adce7674..89c1621e9290e 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_ca.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_ca.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Permet múltiples seleccions (Automatic Translation)
 choose-an-option=Seleccioneu una opció
+choose-options=Triar opcions (Automatic Translation)
 create-list=Crear una llista
 dynamically-loaded-data=Dates carregades dinàmicament
 select-field-type-label=Seleccioneu de la llista (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_cs.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_cs.properties
index 35dc3d32a720e..e28e1f8dd2ee8 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_cs.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_cs.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Povolit více výběrů (Automatic Translation)
 choose-an-option=Zvolte možnost (Automatic Translation)
+choose-options=Zvolte možnosti (Automatic Translation)
 create-list=Vytvořit seznam (Automatic Translation)
 dynamically-loaded-data=Dynamicky načtené údaje (Automatic Translation)
 select-field-type-label=Vybrat ze seznamu (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_da.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_da.properties
index d4be2a05e3aec..8a8638a14ef3d 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_da.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_da.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Allow Multiple Selections (Automatic Copy)
 choose-an-option=Vælg en indstilling i (Automatic Translation)
+choose-options=Choose options (Automatic Copy)
 create-list=Oprette liste (Automatic Translation)
 dynamically-loaded-data=Dynamisk indlæst Data (Automatic Translation)
 select-field-type-label=Select from List (Automatic Copy)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_de.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_de.properties
index cc4a4c93e4097..54aa4ccd2030e 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_de.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_de.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Allow Multiple Selections (Automatic Copy)
 choose-an-option=Wählen Sie eine Option
+choose-options=Choose options (Automatic Copy)
 create-list=Liste erstellen
 dynamically-loaded-data=Dynamisch geladene Daten
 select-field-type-label=Auswahl aus Liste
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_el.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_el.properties
index 3f0f857defad8..ad917d7ed384e 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_el.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_el.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Να επιτρέπονται πολλαπλές επιλογές (Automatic Translation)
 choose-an-option=Κάντε μια επιλογή (Automatic Translation)
+choose-options=Επιλέξτε Επιλογές (Automatic Translation)
 create-list=Δημιουργία λίστας (Automatic Translation)
 dynamically-loaded-data=Φορτωθεί δυναμικά δεδομένα (Automatic Translation)
 select-field-type-label=Επιλέξτε από τη λίστα (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_en.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_en.properties
index 64be274389b95..0cd1927883fd9 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_en.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_en.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Allow Multiple Selections
 choose-an-option=Choose an Option
+choose-options=Choose options
 create-list=Create List
 dynamically-loaded-data=Dynamically Loaded Data
 select-field-type-label=Select from List
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_es.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_es.properties
index 13572732bcde2..b859218ed1e83 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_es.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_es.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Permite selecciones múltiples (Automatic Translation)
 choose-an-option=Elija una opción
+choose-options=Elija las opciones (Automatic Translation)
 create-list=Crear una lista
 dynamically-loaded-data=Datos dinámicamente cargados
 select-field-type-label=Seleccione de la lista (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_et.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_et.properties
index c7d78cb0157c6..38ea3640cafd5 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_et.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_et.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Luba mitu valikut (Automatic Translation)
 choose-an-option=Vali variant (Automatic Translation)
+choose-options=Valige suvandid (Automatic Translation)
 create-list=Loendi loomine (Automatic Translation)
 dynamically-loaded-data=Dünaamiliselt laaditud andmed (Automatic Translation)
 select-field-type-label=Valige loendist (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_eu.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_eu.properties
index 2307dfa6000e2..88b7cdb186989 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_eu.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_eu.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Allow Multiple Selections (Automatic Copy)
 choose-an-option=Choose an Option (Automatic Copy)
+choose-options=Choose options (Automatic Copy)
 create-list=Create List (Automatic Copy)
 dynamically-loaded-data=Dynamically Loaded Data (Automatic Copy)
 select-field-type-label=Select from List (Automatic Copy)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_fa.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_fa.properties
index 66123af9a1ce1..43d8612762c74 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_fa.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_fa.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=اجازه انتخاب چندگانه (Automatic Translation)
 choose-an-option=یک گزینه انتخاب کنید.
+choose-options=گزینه های را انتخاب کنید (Automatic Translation)
 create-list=لیست بسازید.
 dynamically-loaded-data=بارگذاری دینامیکی اطلاعات
 select-field-type-label=از لیست انتخاب کنید (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_fi.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_fi.properties
index 8bbc294e8f99c..3930dc72e5440 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_fi.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_fi.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Allow Multiple Selections (Automatic Copy)
 choose-an-option=Valitse valinta
+choose-options=Choose options (Automatic Copy)
 create-list=Luo lista
 dynamically-loaded-data=Dynaamisesti ladattu lista
 select-field-type-label=Select from List (Automatic Copy)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_fr.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_fr.properties
index f718aef1b6b38..80f956c111161 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_fr.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_fr.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Sélection Multiple (Automatic Translation)
 choose-an-option=Choisir une option
+choose-options=Cliquez sur options (Automatic Translation)
 create-list=Créer liste
 dynamically-loaded-data=Données chargées dynamiquement
 select-field-type-label=Sélectionnez dans la liste (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_gl.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_gl.properties
index 2307dfa6000e2..88b7cdb186989 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_gl.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_gl.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Allow Multiple Selections (Automatic Copy)
 choose-an-option=Choose an Option (Automatic Copy)
+choose-options=Choose options (Automatic Copy)
 create-list=Create List (Automatic Copy)
 dynamically-loaded-data=Dynamically Loaded Data (Automatic Copy)
 select-field-type-label=Select from List (Automatic Copy)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_hi_IN.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_hi_IN.properties
index 55d8e35b4d577..17e75bb866341 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_hi_IN.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_hi_IN.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=एकाधिक चयन की अनुमति दें (Automatic Translation)
 choose-an-option=किसी विकल्प का चयन (Automatic Translation)
+choose-options=विकल्प का चयन करें (Automatic Translation)
 create-list=सूची बनाएँ (Automatic Translation)
 dynamically-loaded-data=गतिशील रूप से लोड किए गए डेटा (Automatic Translation)
 select-field-type-label=सूची में से चुनें (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_hr.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_hr.properties
index 2307dfa6000e2..88b7cdb186989 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_hr.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_hr.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Allow Multiple Selections (Automatic Copy)
 choose-an-option=Choose an Option (Automatic Copy)
+choose-options=Choose options (Automatic Copy)
 create-list=Create List (Automatic Copy)
 dynamically-loaded-data=Dynamically Loaded Data (Automatic Copy)
 select-field-type-label=Select from List (Automatic Copy)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_hu.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_hu.properties
index ae371676b1e5d..2740092c06a88 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_hu.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_hu.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Több elem kijelölhető (Automatic Translation)
 choose-an-option=Válassz egy lehetőséget
+choose-options=Válassza a beállítások (Automatic Translation)
 create-list=Lista létrehozása
 dynamically-loaded-data=Dinamikusan betöltött adat
 select-field-type-label=Válassza ki a listából (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_in.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_in.properties
index 3ed45b8ff5728..eac20a4d862cf 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_in.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_in.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Memungkinkan beberapa pilihan (Automatic Translation)
 choose-an-option=Pilih opsi (Automatic Translation)
+choose-options=Pilih opsi (Automatic Translation)
 create-list=Membuat daftar (Automatic Translation)
 dynamically-loaded-data=Data yang dimuat secara dinamis (Automatic Translation)
 select-field-type-label=Pilih dari daftar (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_it.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_it.properties
index ce4b381920225..01a6edafb25c5 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_it.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_it.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Consenti selezioni Multiple (Automatic Translation)
 choose-an-option=Scegli una Opzione
+choose-options=Scegliere Opzioni (Automatic Translation)
 create-list=Crea Lista
 dynamically-loaded-data=Dati Caricati Dinamicamente
 select-field-type-label=Selezionare dall'elenco (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_iw.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_iw.properties
index 44db4b86186b1..0bded5f4c426f 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_iw.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_iw.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=אפשר בחירות מרובות (Automatic Translation)
 choose-an-option=בחרו אפשרות
+choose-options=בחרו ' אפשרויות ' (Automatic Translation)
 create-list=צור רשימה
 dynamically-loaded-data=נתונים נטענים דינמית
 select-field-type-label=בחר מהרשימה (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_ja.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_ja.properties
index 99f72ad10d52b..d01770e377678 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_ja.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_ja.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Allow Multiple Selections (Automatic Copy)
 choose-an-option=設定を選択する
+choose-options=Choose options (Automatic Copy)
 create-list=リストを作成
 dynamically-loaded-data=動的ロードデータ
 select-field-type-label=Select from List (Automatic Copy)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_ko.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_ko.properties
index 7406bce0d3345..11542e36463fe 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_ko.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_ko.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=여러 선택 항목 허용 (Automatic Translation)
 choose-an-option=옵션을 선택 하십시오 (Automatic Translation)
+choose-options=옵션 선택 (Automatic Translation)
 create-list=목록 만들기 (Automatic Translation)
 dynamically-loaded-data=동적으로 로드 된 데이터 (Automatic Translation)
 select-field-type-label=목록에서 선택 (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_lo.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_lo.properties
index 2307dfa6000e2..88b7cdb186989 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_lo.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_lo.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Allow Multiple Selections (Automatic Copy)
 choose-an-option=Choose an Option (Automatic Copy)
+choose-options=Choose options (Automatic Copy)
 create-list=Create List (Automatic Copy)
 dynamically-loaded-data=Dynamically Loaded Data (Automatic Copy)
 select-field-type-label=Select from List (Automatic Copy)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_lt.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_lt.properties
index 70307b5591b02..665f697e13aae 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_lt.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_lt.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Leisti kelis pasirinkimus (Automatic Translation)
 choose-an-option=Pasirinkite pasirinktį (Automatic Translation)
+choose-options=Pasirinkite parinktis (Automatic Translation)
 create-list=Sąrašo kūrimas (Automatic Translation)
 dynamically-loaded-data=Dinamiškai įkelti duomenis (Automatic Translation)
 select-field-type-label=Pasirinkite iš sąrašo (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_nb.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_nb.properties
index 93436f5078951..203ecbbb40908 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_nb.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_nb.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Tillat flervalg (Automatic Translation)
 choose-an-option=Velg et alternativ (Automatic Translation)
+choose-options=Velg alternativer (Automatic Translation)
 create-list=Opprette liste (Automatic Translation)
 dynamically-loaded-data=Dynamisk lastet Data (Automatic Translation)
 select-field-type-label=Velg fra listen (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_nl.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_nl.properties
index 2623c49ef4878..e5d3410c54637 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_nl.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_nl.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Allow Multiple Selections (Automatic Copy)
 choose-an-option=Kies een optie
+choose-options=Choose options (Automatic Copy)
 create-list=Lijst aanmaken
 dynamically-loaded-data=Dynamisch geladen data
 select-field-type-label=Select from List (Automatic Copy)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_nl_BE.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_nl_BE.properties
index ed114d3133b86..b7976fa7ebd11 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_nl_BE.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_nl_BE.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Allow Multiple Selections (Automatic Copy)
 choose-an-option=Kies een optie (Automatic Translation)
+choose-options=Choose options (Automatic Copy)
 create-list=Lijst maken (Automatic Translation)
 dynamically-loaded-data=Dynamisch geladen gegevens (Automatic Translation)
 select-field-type-label=Select from List (Automatic Copy)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_pl.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_pl.properties
index 0c7ffa9b71ca2..e92cf4e8a6eda 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_pl.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_pl.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Zezwalaj na wiele zaznaczeń (Automatic Translation)
 choose-an-option=Wybierz jedną z opcji (Automatic Translation)
+choose-options=Wybierz opcje (Automatic Translation)
 create-list=Tworzenie listy (Automatic Translation)
 dynamically-loaded-data=Dynamicznie ładowane dane (Automatic Translation)
 select-field-type-label=Wybierz z listy (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_pt_BR.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_pt_BR.properties
index d77dc0f2215d8..adf1d3f8ac69a 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_pt_BR.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_pt_BR.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Permitir várias seleções (Automatic Translation)
 choose-an-option=Escolha uma Opção
+choose-options=Escolha opções (Automatic Translation)
 create-list=Criar uma Lista
 dynamically-loaded-data=Dados Dinamicamente Carregados
 select-field-type-label=Selecione da lista (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_pt_PT.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_pt_PT.properties
index 90e9befaaab79..b0c38ac912dbb 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_pt_PT.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_pt_PT.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Permitir várias seleções (Automatic Translation)
 choose-an-option=Selecione uma Opção
+choose-options=Escolha opções (Automatic Translation)
 create-list=Criar Lista
 dynamically-loaded-data=Dados Carregados Dinamicamente
 select-field-type-label=Selecione da lista (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_ro.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_ro.properties
index b106f111a6c80..82e5b5353aff7 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_ro.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_ro.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Se permit selecții Multiple (Automatic Translation)
 choose-an-option=Selectaţi o opţiune (Automatic Translation)
+choose-options=Alege optiuni (Automatic Translation)
 create-list=Creaţi lista (Automatic Translation)
 dynamically-loaded-data=Datelor încărcate dinamic (Automatic Translation)
 select-field-type-label=Selectaţi din lista (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_ru.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_ru.properties
index e3097dd78df1a..dbf2975cf8c84 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_ru.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_ru.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Разрешить множественный выбор (Automatic Translation)
 choose-an-option=Выберите вариант (Automatic Translation)
+choose-options=Выбрать опции (Automatic Translation)
 create-list=Создание списка (Automatic Translation)
 dynamically-loaded-data=Динамически загруженных данных (Automatic Translation)
 select-field-type-label=Выберите из списка (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_sk.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_sk.properties
index 37a570ce2b4c9..f71030bc26d89 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_sk.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_sk.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Povoliť viacnásobný výber (Automatic Translation)
 choose-an-option=Vybrať možnosť
+choose-options=Vybrať možnosti (Automatic Translation)
 create-list=Vytvoriť zoznam
 dynamically-loaded-data=Dynamicky stiahnuté údaje
 select-field-type-label=Vyberte zo zoznamu (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_sl.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_sl.properties
index e076eff64d25a..565b8e4910391 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_sl.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_sl.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Dovoli več izborov (Automatic Translation)
 choose-an-option=Izberite eno od možnosti (Automatic Translation)
+choose-options=Izberite možnosti (Automatic Translation)
 create-list=Ustvarite seznam (Automatic Translation)
 dynamically-loaded-data=Dinamično naložen podatkov (Automatic Translation)
 select-field-type-label=Izberite iz seznama (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_sr_RS.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_sr_RS.properties
index 2307dfa6000e2..88b7cdb186989 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_sr_RS.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_sr_RS.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Allow Multiple Selections (Automatic Copy)
 choose-an-option=Choose an Option (Automatic Copy)
+choose-options=Choose options (Automatic Copy)
 create-list=Create List (Automatic Copy)
 dynamically-loaded-data=Dynamically Loaded Data (Automatic Copy)
 select-field-type-label=Select from List (Automatic Copy)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_sr_RS_latin.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_sr_RS_latin.properties
index 2307dfa6000e2..88b7cdb186989 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_sr_RS_latin.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_sr_RS_latin.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Allow Multiple Selections (Automatic Copy)
 choose-an-option=Choose an Option (Automatic Copy)
+choose-options=Choose options (Automatic Copy)
 create-list=Create List (Automatic Copy)
 dynamically-loaded-data=Dynamically Loaded Data (Automatic Copy)
 select-field-type-label=Select from List (Automatic Copy)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_sv.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_sv.properties
index 08f1c091cbdf5..f559da3ad997c 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_sv.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_sv.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Allow Multiple Selections (Automatic Copy)
 choose-an-option=Välj ett alternativ (Automatic Translation)
+choose-options=Choose options (Automatic Copy)
 create-list=Skapa lista (Automatic Translation)
 dynamically-loaded-data=Dynamiskt inlästa Data (Automatic Translation)
 select-field-type-label=Select from List (Automatic Copy)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_th.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_th.properties
index 1d6b7ab8c5b00..b603dc8b2e264 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_th.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_th.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=อนุญาตให้เลือกหลาย (Automatic Translation)
 choose-an-option=เลือกตัวเลือก (Automatic Translation)
+choose-options=เลือกตัวเลือก (Automatic Translation)
 create-list=สร้างรายการ (Automatic Translation)
 dynamically-loaded-data=ข้อมูลที่ถูกโหลดแบบไดนามิก (Automatic Translation)
 select-field-type-label=เลือกจากรายการ (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_tr.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_tr.properties
index 0afe21aa4ba0f..1a38c3f5fdef7 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_tr.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_tr.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Birden çok seçime izin ver (Automatic Translation)
 choose-an-option=Bir seçenek belirleyin (Automatic Translation)
+choose-options=Seçenekleri belirleyin (Automatic Translation)
 create-list=Liste oluşturma (Automatic Translation)
 dynamically-loaded-data=Devingen olarak yüklenen veri (Automatic Translation)
 select-field-type-label=Listeden seçin (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_uk.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_uk.properties
index 9ba12ceaeaa10..a696d2a622d2b 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_uk.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_uk.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Дозволити Вибір кількох варіантів (Automatic Translation)
 choose-an-option=Виберіть параметр (Automatic Translation)
+choose-options=Виберіть «параметри» (Automatic Translation)
 create-list=Створення списку (Automatic Translation)
 dynamically-loaded-data=Динамічно завантажується даних (Automatic Translation)
 select-field-type-label=Виберіть зі списку (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_vi.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_vi.properties
index 83bc446d6dbe2..ddb586cda3717 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_vi.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_vi.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=Cho phép chọn nhiều (Automatic Translation)
 choose-an-option=Chọn một tùy chọn (Automatic Translation)
+choose-options=Chọn tùy chọn (Automatic Translation)
 create-list=Tạo danh sách (Automatic Translation)
 dynamically-loaded-data=Tự động nạp dữ liệu (Automatic Translation)
 select-field-type-label=Chọn từ danh sách (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_zh_CN.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_zh_CN.properties
index 8afd3682a9c01..886cbb71aa435 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_zh_CN.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_zh_CN.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=允许多重选择 (Automatic Translation)
 choose-an-option=选择一个选项
+choose-options=选择选项 (Automatic Translation)
 create-list=创建列表
 dynamically-loaded-data=动态加载数据
 select-field-type-label=从列表中选择 (Automatic Translation)
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_zh_TW.properties b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_zh_TW.properties
index bca2d2a053dd5..85f03dc31d3d0 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_zh_TW.properties
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/content/Language_zh_TW.properties
@@ -1,5 +1,6 @@
 allow-multiple-selections=允許多重選取 (Automatic Translation)
 choose-an-option=選擇一個選項
+choose-options=選擇選項 (Automatic Translation)
 create-list=創建列表
 dynamically-loaded-data=動態已載入資料
 select-field-type-label=從清單中選擇 (Automatic Translation)
\ No newline at end of file

From 8ce603bc1b7dfed0affc58a71e7301312463eeb9 Mon Sep 17 00:00:00 2001
From: Thiago Rocha <thiago.rocha@liferay.com>
Date: Fri, 17 Mar 2017 18:38:11 -0300
Subject: [PATCH 10/46] LPS-71082 Handle all click event on the container

---
 .../META-INF/resources/select_field.js        | 204 +++++++++++++-----
 1 file changed, 146 insertions(+), 58 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select_field.js b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select_field.js
index 9a265c1564efa..d4bae303f8541 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select_field.js
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select_field.js
@@ -1,11 +1,25 @@
 AUI.add(
 	'liferay-ddm-form-field-select',
 	function(A) {
-		var CSS_SELECT_BADGE_ITEM = A.getClassName('trigger', 'badge', 'item');
+		var CSS_ACTIVE = A.getClassName('active');
+
+		var CSS_DROP_CHOSEN = A.getClassName('drop', 'chosen');
+
+		var CSS_FORM_FIELD_CONTAINER = A.getClassName('lfr', 'ddm', 'form', 'field', 'container');
+
+		var CSS_HELP_BLOCK = A.getClassName('help', 'block');
+
+		var CSS_HIDE = A.getClassName('hide');
+
+		var CSS_INPUT_SELECT_WRAPPER = A.getClassName('input', 'select', 'wrapper');
+
+		var CSS_SEARCH_CHOSEN = A.getClassName('search', 'chosen');
+
+		var CSS_SELECT_BADGE_ITEM_CLOSE = A.getClassName('trigger', 'badge', 'item', 'close');
 
 		var CSS_SELECT_OPTION_ITEM = A.getClassName('select', 'option', 'item');
 
-		var CSS_SELECT_TRIGGER_ACTION = A.getClassName('form', 'builder', 'select', 'field');
+		var CSS_SELECT_TRIGGER_ACTION = A.getClassName('select', 'field', 'trigger');
 
 		var Lang = A.Lang;
 
@@ -60,11 +74,11 @@ AUI.add(
 					initializer: function() {
 						var instance = this;
 
+						instance._open = false;
+
 						instance._eventHandlers.push(
 							A.one('doc').after('click', A.bind(instance._afterClickOutside, instance)),
-							instance.bindContainerEvent('click', instance._afterClickSelectTrigger, '.' + CSS_SELECT_TRIGGER_ACTION),
-							instance.bindContainerEvent('click', instance._onClickItem, '.' + CSS_SELECT_OPTION_ITEM),
-							instance.bindContainerEvent('click', instance._onClickBadgeItem, '.' + CSS_SELECT_BADGE_ITEM)
+							instance.bindContainerEvent('click', instance._handleContainerClick, '.' + CSS_FORM_FIELD_CONTAINER)
 						);
 					},
 
@@ -84,9 +98,11 @@ AUI.add(
 						if (!instance.get('readOnly') && instance._isListOpen()) {
 							var container = instance.get('container');
 
-							container.one('.drop-chosen').addClass('hide');
+							container.one('.' + CSS_DROP_CHOSEN).addClass(CSS_HIDE);
 
-							container.one('.form-builder-select-field').removeClass('active');
+							container.one('.' + CSS_SELECT_TRIGGER_ACTION).removeClass(CSS_ACTIVE);
+
+							instance._open = false;
 
 							instance.fire('closeList');
 						}
@@ -99,6 +115,7 @@ AUI.add(
 							SelectField.superclass.getTemplateContext.apply(instance, arguments),
 							{
 								badgeCloseIcon: Liferay.Util.getLexiconIconTpl('times', 'icon-monospaced'),
+								open: instance._open,
 								options: instance.get('options'),
 								selectCaretDoubleIcon: Liferay.Util.getLexiconIconTpl('caret-double-l', 'icon-monospaced'),
 								selectSearchIcon: Liferay.Util.getLexiconIconTpl('search', 'icon-monospaced'),
@@ -155,9 +172,11 @@ AUI.add(
 					openList: function() {
 						var instance = this;
 
-						instance._getSelectTriggerAction().addClass('active');
+						instance._getSelectTriggerAction().addClass(CSS_ACTIVE);
+
+						instance.get('container').one('.' + CSS_DROP_CHOSEN).removeClass(CSS_HIDE);
 
-						instance.get('container').one('.drop-chosen').toggleClass('hide');
+						instance._open = true;
 					},
 
 					render: function() {
@@ -190,10 +209,18 @@ AUI.add(
 					setValue: function(value) {
 						var instance = this;
 
+						var inputNode = instance.getInputNode();
+
 						if (!Lang.isArray(value)) {
 							value = [value];
 						}
 
+						inputNode.all('option').each(
+							function(optionNode) {
+								instance._setSelectNodeOptions(optionNode, value);
+							}
+						);
+
 						instance.set('value', value);
 
 						instance.render();
@@ -206,33 +233,30 @@ AUI.add(
 
 						var container = instance.get('container');
 
-						var inputGroup = container.one('.input-select-wrapper');
+						var inputGroup = container.one('.' + CSS_INPUT_SELECT_WRAPPER);
 
-						inputGroup.insert(container.one('.help-block'), 'after');
+						inputGroup.insert(container.one('.' + CSS_HELP_BLOCK), 'after');
 					},
 
-					_afterClickOutside: function(event) {
+					toggleList: function() {
 						var instance = this;
 
-						if (instance._isClickingOutSide(event)) {
+						if (instance._isListOpen()) {
 							instance.closeList();
 						}
+						else {
+							instance.openList();
+						}
 					},
 
-					_afterClickSelectTrigger: function(event) {
-						event.preventDefault();
-
+					_afterClickOutside: function(event) {
 						var instance = this;
 
-						if (!instance.get('readOnly')) {
-							var target = event.target;
-
-							if (target.ancestor('.search-chosen') || target.ancestor('.trigger-badge-item')) {
-								return;
-							}
-
-							instance.openList();
+						if (!instance._preventDocumentClick && instance._isClickingOutSide(event)) {
+							instance.closeList();
 						}
+
+						instance._preventDocumentClick = false;
 					},
 
 					_getContextValue: function() {
@@ -297,6 +321,83 @@ AUI.add(
 						return instance.get('container').one('.' + CSS_SELECT_TRIGGER_ACTION);
 					},
 
+					_handleBadgeItemCloseClick: function(target) {
+						var instance = this;
+
+						var values = instance.get('value');
+
+						var value = target.getAttribute('data-badge-value');
+
+						var index = values.indexOf(value);
+
+						if (index >= 0) {
+							values.splice(index, 1);
+						}
+
+						instance.setValue(values);
+					},
+
+					_handleContainerClick: function(event) {
+						var instance = this;
+
+						var target = event.target;
+
+						var closeIconNode = target.ancestor('.' + CSS_SELECT_BADGE_ITEM_CLOSE, true);
+
+						var optionNode = target.ancestor('.' + CSS_SELECT_OPTION_ITEM, true);
+
+						if (closeIconNode) {
+							instance._handleBadgeItemCloseClick(closeIconNode);
+						}
+						else if (optionNode) {
+							instance._handleItemClick(optionNode);
+						}
+						else {
+							instance._handleSelectTriggerClick(event);
+						}
+
+						instance._preventDocumentClick = true;
+					},
+
+					_handleItemClick: function(target) {
+						var instance = this;
+
+						var value;
+
+						var currentTarget = target;
+
+						if (instance.get('multiple')) {
+							value = instance.get('value');
+
+							instance._open = true;
+
+							if (!currentTarget.getAttribute('data-option-selected')) {
+								value.push(currentTarget.getAttribute('data-option-value'));
+							}
+						}
+						else {
+							value = currentTarget.getAttribute('data-option-value');
+
+							instance._open = false;
+						}
+
+						instance.setValue(value);
+					},
+
+					_handleSelectTriggerClick: function(event) {
+						var instance = this;
+
+						if (!instance.get('readOnly')) {
+							var target = event.target;
+
+							if (target.ancestor('.' + CSS_SEARCH_CHOSEN)) {
+								return;
+							}
+
+							instance.toggleList();
+						}
+					},
+
 					_hasOption: function(value) {
 						var instance = this;
 
@@ -320,11 +421,7 @@ AUI.add(
 
 						var container = instance.get('container');
 
-						if (container.contains(event.target)) {
-							return false;
-						}
-
-						return true;
+						return !container.contains(event.target);
 					},
 
 					_isListOpen: function() {
@@ -332,52 +429,43 @@ AUI.add(
 
 						var container = instance.get('container');
 
-						if (!container.one('.drop-chosen')) {
-							return false;
-						}
-
-						var openList = container.one('.drop-chosen').hasClass('hide');
+						var openList = container.one('.' + CSS_DROP_CHOSEN).hasClass(CSS_HIDE);
 
 						return !openList;
 					},
 
-					_onClickBadgeItem: function(event) {
-						event.stopPropagation();
-
-						var instance = this;
-
-						var values = instance.get('value');
+					_selectDOMOption: function(optionNode, value) {
+						var selected = false;
 
-						var value = event.currentTarget.getAttribute('data-badge-value');
+						if (Lang.isArray(value)) {
+							value = value[0];
+						}
 
-						var index = values.indexOf(value);
+						if (value) {
+							if (optionNode.val()) {
+								selected = value.indexOf(optionNode.val()) > -1;
+							}
 
-						if (index >= 0) {
-							values.splice(index, 1);
+							if (selected) {
+								optionNode.attr('selected', selected);
+							}
+							else {
+								optionNode.removeAttribute('selected');
+							}
 						}
-
-						instance.setValue(values);
 					},
 
-					_onClickItem: function(event) {
-						event.stopPropagation();
-
+					_setSelectNodeOptions: function(optionNode, value) {
 						var instance = this;
 
-						var value;
-
 						if (instance.get('multiple')) {
-							value = instance.get('value');
-
-							if (!event.target.getAttribute('data-option-selected')) {
-								value.push(event.target.getAttribute('data-option-value'));
+							for (var i = 0; i < value.length; i++) {
+								instance._selectDOMOption(optionNode, value[i]);
 							}
 						}
 						else {
-							value = event.target.getAttribute('data-option-value');
+							instance._selectDOMOption(optionNode, value);
 						}
-
-						instance.setValue(value);
 					}
 				}
 			}

From 69a77ec85a38e2e3f3b484cf7c912b532b788330 Mon Sep 17 00:00:00 2001
From: Thiago Rocha <thiago.rocha@liferay.com>
Date: Fri, 17 Mar 2017 18:38:53 -0300
Subject: [PATCH 11/46] LPS-71082 Removing unnecessary check

---
 .../META-INF/resources/js/form_evaluation_support.js          | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_evaluation_support.js b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_evaluation_support.js
index 447be4e8c431d..617c1b75f9395 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_evaluation_support.js
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_evaluation_support.js
@@ -83,9 +83,7 @@ AUI.add(
 									delete fieldContext.valid;
 								}
 
-								if (!Util.compare(field.get('value'), fieldContext.value)) {
-									field.setValue(fieldContext.value);
-								}
+								field.setValue(fieldContext.value);
 							}
 
 							if (fieldContext.valid) {

From f70f948b569d1dc2dc8ef0a2a30103dc2d048977 Mon Sep 17 00:00:00 2001
From: Thiago Rocha <thiago.rocha@liferay.com>
Date: Fri, 17 Mar 2017 18:40:53 -0300
Subject: [PATCH 12/46] LPS-71082 SF/Remiving unnecessary code

---
 .../resources/META-INF/resources/select.soy   | 53 +++++--------------
 1 file changed, 12 insertions(+), 41 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select.soy b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select.soy
index f33282904b89c..9024d592ab9a2 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select.soy
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select.soy
@@ -16,6 +16,7 @@
  * @param label
  * @param multiple
  * @param name
+ * @param open
  * @param options
  * @param readOnly
  * @param required
@@ -79,7 +80,7 @@
 				</div>
 
 				{if not $readOnly}
-					<div class="drop-chosen {$multiple and length($value) > 0 ? '' : 'hide'}">
+					<div class="drop-chosen {$open ? '' : 'hide'}">
 						<div class="search-chosen">
 							<div class="select-search-container">
 								{if $selectSearchIcon}
@@ -93,7 +94,6 @@
 						</ul>
 					</div>
 				{/if}
-
 			</div>
 
 			{if $childElementsHTML}
@@ -104,7 +104,7 @@
 {/template}
 
 /**
- * Prints the badge item to multiple select.
+ * Prints the badge item.
  *
  * @param badgeCloseIcon
  * @param label
@@ -114,7 +114,7 @@
 	<li>
 		<span class="badge badge-default badge-sm multiple-badge">
 			{$label}
-			<a class="trigger-badge-item" data-badge-value="{$value}" href="javascript:void(0)">{$badgeCloseIcon|noAutoescape}</a>
+			<a class="trigger-badge-item-close" data-badge-value="{$value}" href="javascript:void(0)">{$badgeCloseIcon|noAutoescape}</a>
 		</span>
 	</li>
 {/template}
@@ -159,52 +159,23 @@
 		{/if}
 
 		{foreach $option in $options}
-			{if $multiple}
-				{call ddm.select_multiple_selection}
-					{param dir: $dir /}
-					{param option: $option /}
-					{param values: $value /}
-				{/call}
-			{else}
-				{call ddm.select_single_selection}
-					{param dir: $dir /}
-					{param option: $option /}
-					{param value: $value /}
-				{/call}
-			{/if}
+			{call ddm.select_hidden_options}
+				{param dir: $dir /}
+				{param option: $option /}
+				{param values: $value /}
+			{/call}
 		{/foreach}
 	</select>
 {/template}
 
 /**
- * Prints the DDM form hidden select single options.
- *
- * @param dir
- * @param option
- * @param value
- */
-{template .select_single_selection autoescape="deprecated-contextual"}
-	{let $selected}
-		{if $value}
-			{foreach $currentValue in $value}
-				{if $currentValue.value == $option.value}
-					selected
-				{/if}
-			{/foreach}
-		{/if}
-	{/let}
-
-	<option dir="{$dir}" {$selected} value="{$option.value}">{$option.label}</option>
-{/template}
-
-/**
- * Prints the DDM form hidden select multiple options.
+ * Prints the DDM form hidden select options.
  *
  * @param dir
  * @param option
  * @param values
  */
-{template .select_multiple_selection autoescape="deprecated-contextual"}
+{template .select_hidden_options autoescape="deprecated-contextual"}
 	{let $selected}
 		{if $values}
 			{foreach $currentValue in $values}
@@ -241,7 +212,7 @@
 			{if $multiple}
 				<input type="checkbox" value="" {if $selected}checked{/if}>
 			{/if}
-			<span data-option-selected="{if $selected}true{/if}" data-option-value="{$option.value}">
+			<span>
 				{$option.label}
 			</span>
 		</li>

From 8495d4e28361c7fb5d8082425d81d582567cc12d Mon Sep 17 00:00:00 2001
From: Thiago Rocha <thiago.rocha@liferay.com>
Date: Fri, 17 Mar 2017 18:41:36 -0300
Subject: [PATCH 13/46] LPS-71082 Updating select tests

---
 .../src/test/testJS/select_field.js           | 24 +++++++++----------
 1 file changed, 12 insertions(+), 12 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/test/testJS/select_field.js b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/test/testJS/select_field.js
index e330e2e4beb80..057cde47a5e62 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/test/testJS/select_field.js
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/test/testJS/select_field.js
@@ -255,13 +255,13 @@ describe(
 
 						var container = selectField.get('container');
 
-						var divSelect = container.one('.form-builder-select-field');
+						var trigger = container.one('.select-field-trigger');
 
-						assert.isFalse(divSelect.hasClass('active'));
+						assert.isFalse(trigger.hasClass('active'));
 
-						divSelect.simulate('click');
+						trigger.simulate('click');
 
-						assert.isTrue(divSelect.hasClass('active'));
+						assert.isTrue(trigger.hasClass('active'));
 
 						done();
 					}
@@ -279,9 +279,9 @@ describe(
 
 						var container = selectField.get('container');
 
-						var divSelect = container.one('.form-builder-select-field');
+						var trigger = container.one('.select-field-trigger');
 
-						divSelect.simulate('click');
+						trigger.simulate('click');
 
 						assert.isNull(container.one('.drop-chosen.hide'));
 
@@ -300,15 +300,15 @@ describe(
 
 						var container = selectField.get('container');
 
-						var divSelect = container.one('.form-builder-select-field');
+						var trigger = container.one('.select-field-trigger');
 
-						divSelect.simulate('click');
+						trigger.simulate('click');
 
-						assert.isTrue(divSelect.hasClass('active'));
+						assert.isTrue(trigger.hasClass('active'));
 
 						A.one(document).simulate('click');
 
-						assert.isFalse(divSelect.hasClass('active'));
+						assert.isFalse(trigger.hasClass('active'));
 
 						done();
 					}
@@ -368,7 +368,7 @@ describe(
 			'.clickBadgeItem()',
 			function() {
 				it(
-					'should click in a badge item and return a empty array value',
+					'should be an empty array in the value attribute when the last badge is removed',
 					function(done) {
 						selectField = createSelectField(
 							{
@@ -387,7 +387,7 @@ describe(
 
 						window.setTimeout(
 							function() {
-								container.one('.trigger-badge-item').simulate('click');
+								container.one('.trigger-badge-item-close').simulate('click');
 
 								assert.equal(selectField.get('value').length, 0);
 

From 99d4876910bdcd2bc5ad8074421ec71cf65d1625 Mon Sep 17 00:00:00 2001
From: Thiago Rocha <thiago.rocha@liferay.com>
Date: Fri, 17 Mar 2017 18:41:46 -0300
Subject: [PATCH 14/46] LPS-71082 SF

---
 .../main/resources/META-INF/resources/select_search_support.js  | 2 --
 1 file changed, 2 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select_search_support.js b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select_search_support.js
index 976b2dd8b951c..2645cbcbb7b09 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select_search_support.js
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select_search_support.js
@@ -72,8 +72,6 @@ AUI.add(
 			},
 
 			_applyFilterStyleOnItem: function(term, item) {
-				var instance = this;
-
 				var content = item.one('span').getContent();
 
 				item.one('span').setContent(AHighlight.all(content, term));

From 9de11c23fbc67825883bac6857250021fe4ea0b3 Mon Sep 17 00:00:00 2001
From: Thiago Rocha <thiago.rocha@liferay.com>
Date: Fri, 17 Mar 2017 18:41:58 -0300
Subject: [PATCH 15/46] LPS-71082 BuildSoy

---
 .../META-INF/resources/select.soy.js          | 73 +++++++------------
 1 file changed, 27 insertions(+), 46 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select.soy.js b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select.soy.js
index 6cc0fb9a72ec8..7d2ca7bafe06a 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select.soy.js
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select.soy.js
@@ -50,7 +50,7 @@ ddm.select = function(opt_data, opt_ignored) {
       }
     }
   }
-  output += '</div>' + ((! opt_data.readOnly) ? '<div class="drop-chosen ' + soy.$$escapeHtmlAttribute(opt_data.multiple && opt_data.value.length > 0 ? '' : 'hide') + '"><div class="search-chosen"><div class="select-search-container">' + ((opt_data.selectSearchIcon) ? '<a class="" href="javascript:;">' + soy.$$filterNoAutoescape(opt_data.selectSearchIcon) + '</a>' : '') + '</div><input autocomplete="off" class="drop-chosen-search" placeholder="Search" type="text"></div><ul class="results-chosen">' + ddm.select_options(opt_data) + '</ul></div>' : '') + '</div>' + ((opt_data.childElementsHTML) ? soy.$$filterNoAutoescape(opt_data.childElementsHTML) : '') + '</div></div>';
+  output += '</div>' + ((! opt_data.readOnly) ? '<div class="drop-chosen ' + soy.$$escapeHtmlAttribute(opt_data.open ? '' : 'hide') + '"><div class="search-chosen"><div class="select-search-container">' + ((opt_data.selectSearchIcon) ? '<a class="" href="javascript:;">' + soy.$$filterNoAutoescape(opt_data.selectSearchIcon) + '</a>' : '') + '</div><input autocomplete="off" class="drop-chosen-search" placeholder="Search" type="text"></div><ul class="results-chosen">' + ddm.select_options(opt_data) + '</ul></div>' : '') + '</div>' + ((opt_data.childElementsHTML) ? soy.$$filterNoAutoescape(opt_data.childElementsHTML) : '') + '</div></div>';
   return output;
 };
 if (goog.DEBUG) {
@@ -59,7 +59,7 @@ if (goog.DEBUG) {
 
 
 ddm.badge_item = function(opt_data, opt_ignored) {
-  return '<li><span class="badge badge-default badge-sm multiple-badge">' + soy.$$escapeHtml(opt_data.label) + '<a class="trigger-badge-item" data-badge-value="' + soy.$$escapeHtmlAttribute(opt_data.value) + '" href="javascript:void(0)">' + soy.$$filterNoAutoescape(opt_data.badgeCloseIcon) + '</a></span></li>';
+  return '<li><span class="badge badge-default badge-sm multiple-badge">' + soy.$$escapeHtml(opt_data.label) + '<a class="trigger-badge-item-close" data-badge-value="' + soy.$$escapeHtmlAttribute(opt_data.value) + '" href="javascript:void(0)">' + soy.$$filterNoAutoescape(opt_data.badgeCloseIcon) + '</a></span></li>';
 };
 if (goog.DEBUG) {
   ddm.badge_item.soyTemplateName = 'ddm.badge_item';
@@ -76,11 +76,11 @@ if (goog.DEBUG) {
 
 ddm.hidden_select = function(opt_data, opt_ignored) {
   var output = '<select class="form-control hide" dir="' + soy.$$escapeHtmlAttribute(opt_data.dir) + '" id="' + soy.$$escapeHtmlAttribute(opt_data.name) + '" name="' + soy.$$escapeHtmlAttribute(opt_data.name) + '" ' + ((opt_data.multiple) ? 'multiple size="' + soy.$$escapeHtmlAttribute(opt_data.options.length) + '"' : '') + '>' + ((! opt_data.readOnly) ? '<option dir="' + soy.$$escapeHtmlAttribute(opt_data.dir) + '" disabled ' + ((opt_data.value.length == 0) ? 'selected' : '') + ' value="">' + soy.$$escapeHtml(opt_data.strings.chooseAnOption) + '</option>' : '');
-  var optionList146 = opt_data.options;
-  var optionListLen146 = optionList146.length;
-  for (var optionIndex146 = 0; optionIndex146 < optionListLen146; optionIndex146++) {
-    var optionData146 = optionList146[optionIndex146];
-    output += (opt_data.multiple) ? ddm.select_multiple_selection({dir: opt_data.dir, option: optionData146, values: opt_data.value}) : ddm.select_single_selection({dir: opt_data.dir, option: optionData146, value: opt_data.value});
+  var optionList139 = opt_data.options;
+  var optionListLen139 = optionList139.length;
+  for (var optionIndex139 = 0; optionIndex139 < optionListLen139; optionIndex139++) {
+    var optionData139 = optionList139[optionIndex139];
+    output += ddm.select_hidden_options({dir: opt_data.dir, option: optionData139, values: opt_data.value});
   }
   output += '</select>';
   return output;
@@ -90,60 +90,41 @@ if (goog.DEBUG) {
 }
 
 
-ddm.select_single_selection = function(opt_data, opt_ignored) {
+ddm.select_hidden_options = function(opt_data, opt_ignored) {
   var output = '';
-  var selected__soy150 = '';
-  if (opt_data.value) {
-    var currentValueList156 = opt_data.value;
-    var currentValueListLen156 = currentValueList156.length;
-    for (var currentValueIndex156 = 0; currentValueIndex156 < currentValueListLen156; currentValueIndex156++) {
-      var currentValueData156 = currentValueList156[currentValueIndex156];
-      selected__soy150 += (currentValueData156.value == opt_data.option.value) ? 'selected' : '';
-    }
-  }
-  output += '<option dir="' + soy.$$escapeHtmlAttribute(opt_data.dir) + '" ' + soy.$$filterHtmlAttributes(selected__soy150) + ' value="' + soy.$$escapeHtmlAttribute(opt_data.option.value) + '">' + soy.$$escapeHtml(opt_data.option.label) + '</option>';
-  return output;
-};
-if (goog.DEBUG) {
-  ddm.select_single_selection.soyTemplateName = 'ddm.select_single_selection';
-}
-
-
-ddm.select_multiple_selection = function(opt_data, opt_ignored) {
-  var output = '';
-  var selected__soy168 = '';
+  var selected__soy143 = '';
   if (opt_data.values) {
-    var currentValueList174 = opt_data.values;
-    var currentValueListLen174 = currentValueList174.length;
-    for (var currentValueIndex174 = 0; currentValueIndex174 < currentValueListLen174; currentValueIndex174++) {
-      var currentValueData174 = currentValueList174[currentValueIndex174];
-      selected__soy168 += (currentValueData174.value == opt_data.option.value) ? 'selected' : '';
+    var currentValueList149 = opt_data.values;
+    var currentValueListLen149 = currentValueList149.length;
+    for (var currentValueIndex149 = 0; currentValueIndex149 < currentValueListLen149; currentValueIndex149++) {
+      var currentValueData149 = currentValueList149[currentValueIndex149];
+      selected__soy143 += (currentValueData149.value == opt_data.option.value) ? 'selected' : '';
     }
   }
-  output += '<option dir="' + soy.$$escapeHtmlAttribute(opt_data.dir) + '" ' + soy.$$filterHtmlAttributes(selected__soy168) + ' value="' + soy.$$escapeHtmlAttribute(opt_data.option.value) + '">' + soy.$$escapeHtml(opt_data.option.label) + '</option>';
+  output += '<option dir="' + soy.$$escapeHtmlAttribute(opt_data.dir) + '" ' + soy.$$filterHtmlAttributes(selected__soy143) + ' value="' + soy.$$escapeHtmlAttribute(opt_data.option.value) + '">' + soy.$$escapeHtml(opt_data.option.label) + '</option>';
   return output;
 };
 if (goog.DEBUG) {
-  ddm.select_multiple_selection.soyTemplateName = 'ddm.select_multiple_selection';
+  ddm.select_hidden_options.soyTemplateName = 'ddm.select_hidden_options';
 }
 
 
 ddm.select_options = function(opt_data, opt_ignored) {
   var output = '';
-  var optionList223 = opt_data.options;
-  var optionListLen223 = optionList223.length;
-  for (var optionIndex223 = 0; optionIndex223 < optionListLen223; optionIndex223++) {
-    var optionData223 = optionList223[optionIndex223];
-    var selected__soy186 = '';
+  var optionList192 = opt_data.options;
+  var optionListLen192 = optionList192.length;
+  for (var optionIndex192 = 0; optionIndex192 < optionListLen192; optionIndex192++) {
+    var optionData192 = optionList192[optionIndex192];
+    var selected__soy161 = '';
     if (opt_data.value) {
-      var currentValueList192 = opt_data.value;
-      var currentValueListLen192 = currentValueList192.length;
-      for (var currentValueIndex192 = 0; currentValueIndex192 < currentValueListLen192; currentValueIndex192++) {
-        var currentValueData192 = currentValueList192[currentValueIndex192];
-        selected__soy186 += (currentValueData192.value == optionData223.value) ? 'selected' : '';
+      var currentValueList167 = opt_data.value;
+      var currentValueListLen167 = currentValueList167.length;
+      for (var currentValueIndex167 = 0; currentValueIndex167 < currentValueListLen167; currentValueIndex167++) {
+        var currentValueData167 = currentValueList167[currentValueIndex167];
+        selected__soy161 += (currentValueData167.value == optionData192.value) ? 'selected' : '';
       }
     }
-    output += '<li class="select-option-item ' + ((selected__soy186) ? 'option-selected' : '') + '" data-option-index="' + soy.$$escapeHtmlAttribute(optionIndex223) + '" data-option-selected="' + ((selected__soy186) ? 'true' : '') + '" data-option-value="' + soy.$$escapeHtmlAttribute(optionData223.value) + '">' + ((opt_data.multiple) ? '<input type="checkbox" value="" ' + ((selected__soy186) ? 'checked' : '') + '>' : '') + '<span data-option-selected="' + ((selected__soy186) ? 'true' : '') + '" data-option-value="' + soy.$$escapeHtmlAttribute(optionData223.value) + '">' + soy.$$escapeHtml(optionData223.label) + '</span></li>';
+    output += '<li class="select-option-item ' + ((selected__soy161) ? 'option-selected' : '') + '" data-option-index="' + soy.$$escapeHtmlAttribute(optionIndex192) + '" data-option-selected="' + ((selected__soy161) ? 'true' : '') + '" data-option-value="' + soy.$$escapeHtmlAttribute(optionData192.value) + '">' + ((opt_data.multiple) ? '<input type="checkbox" value="" ' + ((selected__soy161) ? 'checked' : '') + '>' : '') + '<span>' + soy.$$escapeHtml(optionData192.label) + '</span></li>';
   }
   return output;
 };

From 8ae9426f18af68490e351f613cf0964acd2d72c4 Mon Sep 17 00:00:00 2001
From: Diogo Moreira Lins <diogo.moreira@liferay.com>
Date: Wed, 22 Mar 2017 18:04:34 -0300
Subject: [PATCH 16/46] LPS-71082 Set focus in the select after click in a item

---
 .../resources/META-INF/resources/select_field.js   | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select_field.js b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select_field.js
index d4bae303f8541..7b7e0bca66a2b 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select_field.js
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select_field.js
@@ -15,6 +15,8 @@ AUI.add(
 
 		var CSS_SEARCH_CHOSEN = A.getClassName('search', 'chosen');
 
+		var CSS_SELECT_ARROW_DOWN = A.getClassName('select', 'arrow', 'down', 'container');
+
 		var CSS_SELECT_BADGE_ITEM_CLOSE = A.getClassName('trigger', 'badge', 'item', 'close');
 
 		var CSS_SELECT_OPTION_ITEM = A.getClassName('select', 'option', 'item');
@@ -108,6 +110,16 @@ AUI.add(
 						}
 					},
 
+					focus: function() {
+						var instance = this;
+
+						var container = instance.get('container');
+
+						var arrowSelect = container.one('.' + CSS_SELECT_ARROW_DOWN);
+
+						arrowSelect.focus();
+					},
+
 					getTemplateContext: function() {
 						var instance = this;
 
@@ -382,6 +394,8 @@ AUI.add(
 						}
 
 						instance.setValue(value);
+
+						instance.focus();
 					},
 
 					_handleSelectTriggerClick: function(event) {

From 0d9b3858001153ea14abd6a70569d71d5fed1a2b Mon Sep 17 00:00:00 2001
From: Thiago Rocha <thiago.rocha@liferay.com>
Date: Wed, 15 Mar 2017 13:23:52 -0300
Subject: [PATCH 17/46] LPS-70561 Checking if the current page is valid before
 navegate to the next page

---
 .../resources/js/form_pagination_support.js   | 19 +++++++++++++------
 1 file changed, 13 insertions(+), 6 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_pagination_support.js b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_pagination_support.js
index a340a9f174953..dce6f0c52bc38 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_pagination_support.js
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_pagination_support.js
@@ -107,12 +107,19 @@ AUI.add(
 
 				var nextPage = pagination.get('page');
 
-				do {
-					page = pages[nextPage];
-					nextPage++;
-				} while (!page.enabled);
-
-				pagination.set('page', nextPage);
+				instance.validatePage(
+					instance.getPageNode(nextPage),
+					function(hasErrors) {
+						if (!hasErrors) {
+							do {
+								page = pages[nextPage];
+								nextPage++;
+							} while (!page.enabled);
+
+							pagination.set('page', nextPage);
+						}
+					}
+				);
 			},
 
 			prevPage: function() {

From 5d73535004d9e7b15775ed7160ae99687852b641 Mon Sep 17 00:00:00 2001
From: Thiago Rocha <thiago.rocha@liferay.com>
Date: Wed, 15 Mar 2017 13:24:28 -0300
Subject: [PATCH 18/46] LPS-70561 SF

---
 .../META-INF/resources/js/form_pagination_support.js   | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_pagination_support.js b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_pagination_support.js
index dce6f0c52bc38..af3f72c9836de 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_pagination_support.js
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_pagination_support.js
@@ -105,18 +105,18 @@ AUI.add(
 
 				var page;
 
-				var nextPage = pagination.get('page');
+				var pageIndex = pagination.get('page');
 
 				instance.validatePage(
-					instance.getPageNode(nextPage),
+					instance.getPageNode(pageIndex),
 					function(hasErrors) {
 						if (!hasErrors) {
 							do {
-								page = pages[nextPage];
-								nextPage++;
+								page = pages[pageIndex];
+								pageIndex++;
 							} while (!page.enabled);
 
-							pagination.set('page', nextPage);
+							pagination.set('page', pageIndex);
 						}
 					}
 				);

From 57380dc38a0a880ed59df5da4d765dade60f1c76 Mon Sep 17 00:00:00 2001
From: Thiago Rocha <thiago.rocha@liferay.com>
Date: Mon, 20 Mar 2017 10:42:17 -0300
Subject: [PATCH 19/46] LPS-70561 Removing unnecessary code

---
 .../resources/js/form_pagination_support.js   | 31 +------------------
 1 file changed, 1 insertion(+), 30 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_pagination_support.js b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_pagination_support.js
index af3f72c9836de..5b561e93f870a 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_pagination_support.js
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_pagination_support.js
@@ -83,8 +83,7 @@ AUI.add(
 					);
 
 					instance._eventHandlers.push(
-						instance.pagination.after('pageChange', A.bind('_afterPaginationPageChange', instance)),
-						instance.pagination.on('changeRequest', A.bind('_onPaginationChangeRequest', instance))
+						instance.pagination.after('pageChange', A.bind('_afterPaginationPageChange', instance))
 					);
 				}
 
@@ -252,34 +251,6 @@ AUI.add(
 				}
 			},
 
-			_onPaginationChangeRequest: function(event) {
-				var instance = this;
-
-				var currentPage = instance.getCurrentPage();
-
-				var nextPage = event.state.page;
-
-				var pagination = instance.getPagination();
-
-				if (nextPage > currentPage) {
-					event.preventDefault();
-
-					var pages = instance._getPaginationNodes();
-
-					instance.validatePage(
-						pages.item(currentPage - 1),
-						function(hasErrors) {
-							if (!hasErrors) {
-								pagination.set('page', nextPage);
-							}
-						}
-					);
-				}
-				else {
-					pagination.set('page', nextPage);
-				}
-			},
-
 			_setPagesSate: function(pages) {
 				var pagesState = [];
 

From 8515739e684af79a2670f5c95a5d6a0b771ac8b7 Mon Sep 17 00:00:00 2001
From: Diogo Moreira Lins <diogo.moreira@liferay.com>
Date: Thu, 23 Mar 2017 11:59:20 -0300
Subject: [PATCH 20/46] LPS-70561 Get pages from the layout

---
 .../META-INF/resources/js/form_pagination_support.js      | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_pagination_support.js b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_pagination_support.js
index 5b561e93f870a..40731d060c2d6 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_pagination_support.js
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_pagination_support.js
@@ -9,7 +9,7 @@ AUI.add(
 		FormPaginationSupport.ATTRS = {
 			pagesState: {
 				setter: '_setPagesSate',
-				value: []
+				valueFn: '_valuePagesState'
 			}
 		};
 
@@ -313,6 +313,12 @@ AUI.add(
 
 					wizard.activate(currentPage - 1);
 				}
+			},
+
+			_valuePagesState: function() {
+				var instance = this;
+
+				return instance.get('layout').pages;
 			}
 		};
 

From 7bc6c1f795a285808686b593c3d062a43ca10415 Mon Sep 17 00:00:00 2001
From: Diogo Moreira Lins <diogo.moreira@liferay.com>
Date: Thu, 23 Mar 2017 11:59:31 -0300
Subject: [PATCH 21/46] LPS-70561 SF

---
 .../resources/js/form_pagination_support.js   | 40 ++++++++++++++-----
 1 file changed, 31 insertions(+), 9 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_pagination_support.js b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_pagination_support.js
index 40731d060c2d6..c36faf92a968e 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_pagination_support.js
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/src/main/resources/META-INF/resources/js/form_pagination_support.js
@@ -83,7 +83,8 @@ AUI.add(
 					);
 
 					instance._eventHandlers.push(
-						instance.pagination.after('pageChange', A.bind('_afterPaginationPageChange', instance))
+						instance.pagination.after('pageChange', A.bind('_afterPaginationPageChange', instance)),
+						instance.pagination.on('changeRequest', A.bind('_onPaginationChangeRequest', instance))
 					);
 				}
 
@@ -97,11 +98,6 @@ AUI.add(
 
 				var pages = instance.get('pagesState');
 
-				if (!pages.length) {
-					pagination.next();
-					return;
-				}
-
 				var page;
 
 				var pageIndex = pagination.get('page');
@@ -251,13 +247,39 @@ AUI.add(
 				}
 			},
 
+			_onPaginationChangeRequest: function(event) {
+				var instance = this;
+
+				var currentPage = instance.getCurrentPage();
+
+				var nextPage = event.state.page;
+
+				var pagination = instance.getPagination();
+
+				if (nextPage > currentPage) {
+					event.preventDefault();
+
+					pagination.set('page', nextPage);
+				}
+				else {
+					pagination.set('page', nextPage);
+				}
+			},
+
 			_setPagesSate: function(pages) {
 				var pagesState = [];
 
 				for (var i = 0; i < pages.length; i++) {
-					pagesState[i] = {
-						enabled: pages[i].enabled
-					};
+					if (pages[i].enabled === undefined) {
+						pagesState[i] = {
+							enabled: true
+						};
+					}
+					else {
+						pagesState[i] = {
+							enabled: pages[i].enabled
+						};
+					}
 				}
 
 				return pagesState;

From 7290fb1213f0774e29f56f2b0c67cb1de49d9014 Mon Sep 17 00:00:00 2001
From: Pedro Queiroz <pedro.queiroz@liferay.com>
Date: Wed, 22 Mar 2017 16:24:41 -0300
Subject: [PATCH 22/46] LPS-70895 Declare poshi toggle for changing parameter
 labels of data provider

---
 .../forms-and-workflow/dynamic-data-mapping/poshi.toggle   | 7 +++++++
 1 file changed, 7 insertions(+)
 create mode 100644 modules/apps/forms-and-workflow/dynamic-data-mapping/poshi.toggle

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/poshi.toggle b/modules/apps/forms-and-workflow/dynamic-data-mapping/poshi.toggle
new file mode 100644
index 0000000000000..145f7424635ae
--- /dev/null
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/poshi.toggle
@@ -0,0 +1,7 @@
+<toggles>
+	<toggle name="LPS-70895">
+		<date>2017-03-22</date>
+		<description>Changing parameter labels of data provider.</description>
+		<owner>Pedro Queiroz</owner>
+	</toggle>
+</toggles>

From 787ce9126ccee3bd2bdf974201fc6aef0454a7b7 Mon Sep 17 00:00:00 2001
From: Diogo Moreira Lins <diogo.moreira@liferay.com>
Date: Thu, 23 Mar 2017 16:27:50 -0300
Subject: [PATCH 23/46] LPS-71082 SF Soy

---
 .../src/main/resources/META-INF/resources/select.soy      | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select.soy b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select.soy
index 9024d592ab9a2..9701781613377 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select.soy
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select.soy
@@ -43,9 +43,11 @@
 				{/if}
 
 				<div class="form-control select-field-trigger" dir="{$dir}" id="{$name}" name="{$name}">
-					{if $selectCaretDoubleIcon}
-						<a class="select-arrow-down-container" href="javascript:;">{$selectCaretDoubleIcon|noAutoescape}</a>
-					{/if}
+					<a class="select-arrow-down-container" href="javascript:;">
+						{if $selectCaretDoubleIcon}
+							{$selectCaretDoubleIcon|noAutoescape}
+						{/if}
+					</a>
 
 					{if $readOnly}
 						<span class="option-selected option-selected-placeholder">{$multiple ? $strings.chooseOptions : $strings.chooseAnOption}</span>

From 30d5f3c1c51ff8779b6d40d93cdb07577e87b054 Mon Sep 17 00:00:00 2001
From: Diogo Moreira Lins <diogo.moreira@liferay.com>
Date: Thu, 23 Mar 2017 16:28:02 -0300
Subject: [PATCH 24/46] LPS-71082 BuildSoy

---
 .../META-INF/resources/select.soy.js          | 68 +++++++++----------
 1 file changed, 34 insertions(+), 34 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select.soy.js b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select.soy.js
index 7d2ca7bafe06a..7f64ae06d818b 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select.soy.js
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select.soy.js
@@ -20,7 +20,7 @@ soy.$$registerDelegateFn(soy.$$getDelTemplateId('ddm.field'), 'select', 0, ddm._
 
 
 ddm.select = function(opt_data, opt_ignored) {
-  var output = '<div class="form-group' + soy.$$escapeHtmlAttribute(opt_data.visible ? '' : ' hide') + '" data-fieldname="' + soy.$$escapeHtmlAttribute(opt_data.name) + '"><div class="input-select-wrapper">' + ((opt_data.showLabel) ? ddm.select_label(opt_data) : '') + '<div class="form-builder-select-field input-group-container">' + ((! opt_data.readOnly) ? ddm.hidden_select(opt_data) : '') + '<div class="form-control select-field-trigger" dir="' + soy.$$escapeHtmlAttribute(opt_data.dir) + '" id="' + soy.$$escapeHtmlAttribute(opt_data.name) + '" name="' + soy.$$escapeHtmlAttribute(opt_data.name) + '">' + ((opt_data.selectCaretDoubleIcon) ? '<a class="select-arrow-down-container" href="javascript:;">' + soy.$$filterNoAutoescape(opt_data.selectCaretDoubleIcon) + '</a>' : '');
+  var output = '<div class="form-group' + soy.$$escapeHtmlAttribute(opt_data.visible ? '' : ' hide') + '" data-fieldname="' + soy.$$escapeHtmlAttribute(opt_data.name) + '"><div class="input-select-wrapper">' + ((opt_data.showLabel) ? ddm.select_label(opt_data) : '') + '<div class="form-builder-select-field input-group-container">' + ((! opt_data.readOnly) ? ddm.hidden_select(opt_data) : '') + '<div class="form-control select-field-trigger" dir="' + soy.$$escapeHtmlAttribute(opt_data.dir) + '" id="' + soy.$$escapeHtmlAttribute(opt_data.name) + '" name="' + soy.$$escapeHtmlAttribute(opt_data.name) + '"><a class="select-arrow-down-container" href="javascript:;">' + ((opt_data.selectCaretDoubleIcon) ? soy.$$filterNoAutoescape(opt_data.selectCaretDoubleIcon) : '') + '</a>';
   if (opt_data.readOnly) {
     output += '<span class="option-selected option-selected-placeholder">' + soy.$$escapeHtml(opt_data.multiple ? opt_data.strings.chooseOptions : opt_data.strings.chooseAnOption) + '</span>';
   } else {
@@ -29,21 +29,21 @@ ddm.select = function(opt_data, opt_ignored) {
         output += '<span class="option-selected option-selected-placeholder">' + soy.$$escapeHtml(opt_data.strings.chooseOptions) + '</span>';
       } else {
         output += '<ul class="multiple-badge-list">';
-        var currentValueList49 = opt_data.value;
-        var currentValueListLen49 = currentValueList49.length;
-        for (var currentValueIndex49 = 0; currentValueIndex49 < currentValueListLen49; currentValueIndex49++) {
-          var currentValueData49 = currentValueList49[currentValueIndex49];
-          output += ddm.badge_item({badgeCloseIcon: opt_data.badgeCloseIcon, value: currentValueData49.value, label: currentValueData49.label});
+        var currentValueList48 = opt_data.value;
+        var currentValueListLen48 = currentValueList48.length;
+        for (var currentValueIndex48 = 0; currentValueIndex48 < currentValueListLen48; currentValueIndex48++) {
+          var currentValueData48 = currentValueList48[currentValueIndex48];
+          output += ddm.badge_item({badgeCloseIcon: opt_data.badgeCloseIcon, value: currentValueData48.value, label: currentValueData48.label});
         }
         output += '</ul>';
       }
     } else {
       if (opt_data.value && opt_data.value.length > 0) {
-        var currentValueList60 = opt_data.value;
-        var currentValueListLen60 = currentValueList60.length;
-        for (var currentValueIndex60 = 0; currentValueIndex60 < currentValueListLen60; currentValueIndex60++) {
-          var currentValueData60 = currentValueList60[currentValueIndex60];
-          output += (currentValueData60 && currentValueData60.label) ? '<span class="option-selected">' + soy.$$escapeHtml(currentValueData60.label) + '</span>' : '';
+        var currentValueList59 = opt_data.value;
+        var currentValueListLen59 = currentValueList59.length;
+        for (var currentValueIndex59 = 0; currentValueIndex59 < currentValueListLen59; currentValueIndex59++) {
+          var currentValueData59 = currentValueList59[currentValueIndex59];
+          output += (currentValueData59 && currentValueData59.label) ? '<span class="option-selected">' + soy.$$escapeHtml(currentValueData59.label) + '</span>' : '';
         }
       } else {
         output += '<span class="option-selected option-selected-placeholder">' + soy.$$escapeHtml(opt_data.strings.chooseAnOption) + '</span>';
@@ -76,11 +76,11 @@ if (goog.DEBUG) {
 
 ddm.hidden_select = function(opt_data, opt_ignored) {
   var output = '<select class="form-control hide" dir="' + soy.$$escapeHtmlAttribute(opt_data.dir) + '" id="' + soy.$$escapeHtmlAttribute(opt_data.name) + '" name="' + soy.$$escapeHtmlAttribute(opt_data.name) + '" ' + ((opt_data.multiple) ? 'multiple size="' + soy.$$escapeHtmlAttribute(opt_data.options.length) + '"' : '') + '>' + ((! opt_data.readOnly) ? '<option dir="' + soy.$$escapeHtmlAttribute(opt_data.dir) + '" disabled ' + ((opt_data.value.length == 0) ? 'selected' : '') + ' value="">' + soy.$$escapeHtml(opt_data.strings.chooseAnOption) + '</option>' : '');
-  var optionList139 = opt_data.options;
-  var optionListLen139 = optionList139.length;
-  for (var optionIndex139 = 0; optionIndex139 < optionListLen139; optionIndex139++) {
-    var optionData139 = optionList139[optionIndex139];
-    output += ddm.select_hidden_options({dir: opt_data.dir, option: optionData139, values: opt_data.value});
+  var optionList138 = opt_data.options;
+  var optionListLen138 = optionList138.length;
+  for (var optionIndex138 = 0; optionIndex138 < optionListLen138; optionIndex138++) {
+    var optionData138 = optionList138[optionIndex138];
+    output += ddm.select_hidden_options({dir: opt_data.dir, option: optionData138, values: opt_data.value});
   }
   output += '</select>';
   return output;
@@ -92,16 +92,16 @@ if (goog.DEBUG) {
 
 ddm.select_hidden_options = function(opt_data, opt_ignored) {
   var output = '';
-  var selected__soy143 = '';
+  var selected__soy142 = '';
   if (opt_data.values) {
-    var currentValueList149 = opt_data.values;
-    var currentValueListLen149 = currentValueList149.length;
-    for (var currentValueIndex149 = 0; currentValueIndex149 < currentValueListLen149; currentValueIndex149++) {
-      var currentValueData149 = currentValueList149[currentValueIndex149];
-      selected__soy143 += (currentValueData149.value == opt_data.option.value) ? 'selected' : '';
+    var currentValueList148 = opt_data.values;
+    var currentValueListLen148 = currentValueList148.length;
+    for (var currentValueIndex148 = 0; currentValueIndex148 < currentValueListLen148; currentValueIndex148++) {
+      var currentValueData148 = currentValueList148[currentValueIndex148];
+      selected__soy142 += (currentValueData148.value == opt_data.option.value) ? 'selected' : '';
     }
   }
-  output += '<option dir="' + soy.$$escapeHtmlAttribute(opt_data.dir) + '" ' + soy.$$filterHtmlAttributes(selected__soy143) + ' value="' + soy.$$escapeHtmlAttribute(opt_data.option.value) + '">' + soy.$$escapeHtml(opt_data.option.label) + '</option>';
+  output += '<option dir="' + soy.$$escapeHtmlAttribute(opt_data.dir) + '" ' + soy.$$filterHtmlAttributes(selected__soy142) + ' value="' + soy.$$escapeHtmlAttribute(opt_data.option.value) + '">' + soy.$$escapeHtml(opt_data.option.label) + '</option>';
   return output;
 };
 if (goog.DEBUG) {
@@ -111,20 +111,20 @@ if (goog.DEBUG) {
 
 ddm.select_options = function(opt_data, opt_ignored) {
   var output = '';
-  var optionList192 = opt_data.options;
-  var optionListLen192 = optionList192.length;
-  for (var optionIndex192 = 0; optionIndex192 < optionListLen192; optionIndex192++) {
-    var optionData192 = optionList192[optionIndex192];
-    var selected__soy161 = '';
+  var optionList191 = opt_data.options;
+  var optionListLen191 = optionList191.length;
+  for (var optionIndex191 = 0; optionIndex191 < optionListLen191; optionIndex191++) {
+    var optionData191 = optionList191[optionIndex191];
+    var selected__soy160 = '';
     if (opt_data.value) {
-      var currentValueList167 = opt_data.value;
-      var currentValueListLen167 = currentValueList167.length;
-      for (var currentValueIndex167 = 0; currentValueIndex167 < currentValueListLen167; currentValueIndex167++) {
-        var currentValueData167 = currentValueList167[currentValueIndex167];
-        selected__soy161 += (currentValueData167.value == optionData192.value) ? 'selected' : '';
+      var currentValueList166 = opt_data.value;
+      var currentValueListLen166 = currentValueList166.length;
+      for (var currentValueIndex166 = 0; currentValueIndex166 < currentValueListLen166; currentValueIndex166++) {
+        var currentValueData166 = currentValueList166[currentValueIndex166];
+        selected__soy160 += (currentValueData166.value == optionData191.value) ? 'selected' : '';
       }
     }
-    output += '<li class="select-option-item ' + ((selected__soy161) ? 'option-selected' : '') + '" data-option-index="' + soy.$$escapeHtmlAttribute(optionIndex192) + '" data-option-selected="' + ((selected__soy161) ? 'true' : '') + '" data-option-value="' + soy.$$escapeHtmlAttribute(optionData192.value) + '">' + ((opt_data.multiple) ? '<input type="checkbox" value="" ' + ((selected__soy161) ? 'checked' : '') + '>' : '') + '<span>' + soy.$$escapeHtml(optionData192.label) + '</span></li>';
+    output += '<li class="select-option-item ' + ((selected__soy160) ? 'option-selected' : '') + '" data-option-index="' + soy.$$escapeHtmlAttribute(optionIndex191) + '" data-option-selected="' + ((selected__soy160) ? 'true' : '') + '" data-option-value="' + soy.$$escapeHtmlAttribute(optionData191.value) + '">' + ((opt_data.multiple) ? '<input type="checkbox" value="" ' + ((selected__soy160) ? 'checked' : '') + '>' : '') + '<span>' + soy.$$escapeHtml(optionData191.label) + '</span></li>';
   }
   return output;
 };

From dbe049797f726b9795f1238aa52ea5d8f320135c Mon Sep 17 00:00:00 2001
From: Marcellus Tavares <marcellus.tavares@liferay.com>
Date: Sat, 25 Mar 2017 13:23:19 -0300
Subject: [PATCH 25/46] LPS-67567 SF

---
 .../dynamic-data-mapping-type-text/text_field.js                 | 1 -
 1 file changed, 1 deletion(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-test/src/testFrontend/tests/dynamic-data-mapping/dynamic-data-mapping-type-text/text_field.js b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-test/src/testFrontend/tests/dynamic-data-mapping/dynamic-data-mapping-type-text/text_field.js
index e680f8ca7357f..bd2c663f5cffc 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-test/src/testFrontend/tests/dynamic-data-mapping/dynamic-data-mapping-type-text/text_field.js
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-test/src/testFrontend/tests/dynamic-data-mapping/dynamic-data-mapping-type-text/text_field.js
@@ -111,7 +111,6 @@ describe(
 							}
 						);
 
-
 						it(
 							'should call syncInputHeight only the display style is multiline',
 							function(done) {

From 6fc62cf8c7467a5072ea644724cfa732b612adeb Mon Sep 17 00:00:00 2001
From: Leonardo Barros <leonardo.barros@liferay.com>
Date: Thu, 23 Mar 2017 09:16:17 -0300
Subject: [PATCH 26/46] LPS-71167 Move

---
 .../evaluator/impl/internal}/functions/BetweenFunction.java   | 2 +-
 .../evaluator/impl/internal}/functions/ConcatFunction.java    | 2 +-
 .../evaluator/impl/internal}/functions/ContainsFunction.java  | 2 +-
 .../evaluator/impl/internal}/functions/EqualsFunction.java    | 2 +-
 .../evaluator/impl/internal}/functions/IsDecimalFunction.java | 2 +-
 .../impl/internal}/functions/IsEmailAddressFunction.java      | 2 +-
 .../evaluator/impl/internal}/functions/IsEmptyFunction.java   | 2 +-
 .../evaluator/impl/internal}/functions/IsIntegerFunction.java | 2 +-
 .../evaluator/impl/internal}/functions/IsURLFunction.java     | 2 +-
 .../form/evaluator/impl/internal}/functions/MaxFunction.java  | 2 +-
 .../form/evaluator/impl/internal}/functions/MinFunction.java  | 2 +-
 .../form/evaluator/impl/internal}/functions/SumFunction.java  | 2 +-
 .../impl/internal}/functions/BetweenFunctionTest.java         | 4 +++-
 .../impl/internal}/functions/ConcatFunctionTest.java          | 4 +++-
 .../impl/internal}/functions/ContainsFunctionTest.java        | 4 +++-
 .../impl/internal}/functions/EqualsFunctionTest.java          | 4 +++-
 .../impl/internal}/functions/IsDecimalFunctionTest.java       | 4 +++-
 .../impl/internal}/functions/IsEmailAddressFunctionTest.java  | 4 +++-
 .../impl/internal}/functions/IsEmptyFunctionTest.java         | 4 +++-
 .../impl/internal}/functions/IsIntegerFunctionTest.java       | 4 +++-
 .../evaluator/impl/internal}/functions/IsURLFunctionTest.java | 4 +++-
 .../evaluator/impl/internal}/functions/MaxFunctionTest.java   | 4 +++-
 .../evaluator/impl/internal}/functions/MinFunctionTest.java   | 4 +++-
 .../evaluator/impl/internal}/functions/SumFunctionTest.java   | 4 +++-
 24 files changed, 48 insertions(+), 24 deletions(-)
 rename modules/apps/forms-and-workflow/dynamic-data-mapping/{dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator => dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal}/functions/BetweenFunction.java (95%)
 rename modules/apps/forms-and-workflow/dynamic-data-mapping/{dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator => dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal}/functions/ConcatFunction.java (94%)
 rename modules/apps/forms-and-workflow/dynamic-data-mapping/{dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator => dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal}/functions/ContainsFunction.java (94%)
 rename modules/apps/forms-and-workflow/dynamic-data-mapping/{dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator => dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal}/functions/EqualsFunction.java (94%)
 rename modules/apps/forms-and-workflow/dynamic-data-mapping/{dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator => dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal}/functions/IsDecimalFunction.java (93%)
 rename modules/apps/forms-and-workflow/dynamic-data-mapping/{dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator => dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal}/functions/IsEmailAddressFunction.java (93%)
 rename modules/apps/forms-and-workflow/dynamic-data-mapping/{dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator => dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal}/functions/IsEmptyFunction.java (95%)
 rename modules/apps/forms-and-workflow/dynamic-data-mapping/{dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator => dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal}/functions/IsIntegerFunction.java (94%)
 rename modules/apps/forms-and-workflow/dynamic-data-mapping/{dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator => dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal}/functions/IsURLFunction.java (93%)
 rename modules/apps/forms-and-workflow/dynamic-data-mapping/{dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator => dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal}/functions/MaxFunction.java (94%)
 rename modules/apps/forms-and-workflow/dynamic-data-mapping/{dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator => dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal}/functions/MinFunction.java (94%)
 rename modules/apps/forms-and-workflow/dynamic-data-mapping/{dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator => dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal}/functions/SumFunction.java (95%)
 rename modules/apps/forms-and-workflow/dynamic-data-mapping/{dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator => dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal}/functions/BetweenFunctionTest.java (94%)
 rename modules/apps/forms-and-workflow/dynamic-data-mapping/{dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator => dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal}/functions/ConcatFunctionTest.java (89%)
 rename modules/apps/forms-and-workflow/dynamic-data-mapping/{dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator => dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal}/functions/ContainsFunctionTest.java (93%)
 rename modules/apps/forms-and-workflow/dynamic-data-mapping/{dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator => dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal}/functions/EqualsFunctionTest.java (91%)
 rename modules/apps/forms-and-workflow/dynamic-data-mapping/{dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator => dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal}/functions/IsDecimalFunctionTest.java (89%)
 rename modules/apps/forms-and-workflow/dynamic-data-mapping/{dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator => dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal}/functions/IsEmailAddressFunctionTest.java (88%)
 rename modules/apps/forms-and-workflow/dynamic-data-mapping/{dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator => dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal}/functions/IsEmptyFunctionTest.java (93%)
 rename modules/apps/forms-and-workflow/dynamic-data-mapping/{dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator => dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal}/functions/IsIntegerFunctionTest.java (88%)
 rename modules/apps/forms-and-workflow/dynamic-data-mapping/{dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator => dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal}/functions/IsURLFunctionTest.java (88%)
 rename modules/apps/forms-and-workflow/dynamic-data-mapping/{dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator => dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal}/functions/MaxFunctionTest.java (90%)
 rename modules/apps/forms-and-workflow/dynamic-data-mapping/{dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator => dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal}/functions/MinFunctionTest.java (90%)
 rename modules/apps/forms-and-workflow/dynamic-data-mapping/{dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator => dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal}/functions/SumFunctionTest.java (89%)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/BetweenFunction.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/BetweenFunction.java
similarity index 95%
rename from modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/BetweenFunction.java
rename to modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/BetweenFunction.java
index 3fc91bfd03ff1..8df939e978471 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/BetweenFunction.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/BetweenFunction.java
@@ -12,7 +12,7 @@
  * details.
  */
 
-package com.liferay.dynamic.data.mapping.form.evaluator.functions;
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
 
 import com.liferay.dynamic.data.mapping.expression.DDMExpressionFunction;
 
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/ConcatFunction.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/ConcatFunction.java
similarity index 94%
rename from modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/ConcatFunction.java
rename to modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/ConcatFunction.java
index 69868e5106862..31bf3878c03a6 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/ConcatFunction.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/ConcatFunction.java
@@ -12,7 +12,7 @@
  * details.
  */
 
-package com.liferay.dynamic.data.mapping.form.evaluator.functions;
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
 
 import com.liferay.dynamic.data.mapping.expression.DDMExpressionFunction;
 import com.liferay.portal.kernel.util.StringBundler;
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/ContainsFunction.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/ContainsFunction.java
similarity index 94%
rename from modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/ContainsFunction.java
rename to modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/ContainsFunction.java
index 4e7ce9683f678..5f75f555b3c91 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/ContainsFunction.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/ContainsFunction.java
@@ -12,7 +12,7 @@
  * details.
  */
 
-package com.liferay.dynamic.data.mapping.form.evaluator.functions;
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
 
 import com.liferay.dynamic.data.mapping.expression.DDMExpressionFunction;
 import com.liferay.portal.kernel.util.StringUtil;
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/EqualsFunction.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/EqualsFunction.java
similarity index 94%
rename from modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/EqualsFunction.java
rename to modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/EqualsFunction.java
index dd263f283bf33..5f5ea52c8c692 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/EqualsFunction.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/EqualsFunction.java
@@ -12,7 +12,7 @@
  * details.
  */
 
-package com.liferay.dynamic.data.mapping.form.evaluator.functions;
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
 
 import com.liferay.dynamic.data.mapping.expression.DDMExpressionFunction;
 
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsDecimalFunction.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsDecimalFunction.java
similarity index 93%
rename from modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsDecimalFunction.java
rename to modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsDecimalFunction.java
index 5132ed893eb2b..34cd1a626be0f 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsDecimalFunction.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsDecimalFunction.java
@@ -12,7 +12,7 @@
  * details.
  */
 
-package com.liferay.dynamic.data.mapping.form.evaluator.functions;
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
 
 import com.liferay.dynamic.data.mapping.expression.DDMExpressionFunction;
 
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsEmailAddressFunction.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsEmailAddressFunction.java
similarity index 93%
rename from modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsEmailAddressFunction.java
rename to modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsEmailAddressFunction.java
index 7dadbac80849e..bf3f9dc92195d 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsEmailAddressFunction.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsEmailAddressFunction.java
@@ -12,7 +12,7 @@
  * details.
  */
 
-package com.liferay.dynamic.data.mapping.form.evaluator.functions;
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
 
 import com.liferay.dynamic.data.mapping.expression.DDMExpressionFunction;
 import com.liferay.portal.kernel.util.Validator;
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsEmptyFunction.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsEmptyFunction.java
similarity index 95%
rename from modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsEmptyFunction.java
rename to modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsEmptyFunction.java
index 3b3b3bbc292e4..64515edd2e850 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsEmptyFunction.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsEmptyFunction.java
@@ -12,7 +12,7 @@
  * details.
  */
 
-package com.liferay.dynamic.data.mapping.form.evaluator.functions;
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
 
 import com.liferay.dynamic.data.mapping.expression.DDMExpressionFunction;
 import com.liferay.portal.kernel.util.Validator;
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsIntegerFunction.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsIntegerFunction.java
similarity index 94%
rename from modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsIntegerFunction.java
rename to modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsIntegerFunction.java
index 08b3711cddd09..920b84b5662d3 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsIntegerFunction.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsIntegerFunction.java
@@ -12,7 +12,7 @@
  * details.
  */
 
-package com.liferay.dynamic.data.mapping.form.evaluator.functions;
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
 
 import com.liferay.dynamic.data.mapping.expression.DDMExpressionFunction;
 
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsURLFunction.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsURLFunction.java
similarity index 93%
rename from modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsURLFunction.java
rename to modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsURLFunction.java
index 48fa54079d672..68c530ab138fc 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsURLFunction.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsURLFunction.java
@@ -12,7 +12,7 @@
  * details.
  */
 
-package com.liferay.dynamic.data.mapping.form.evaluator.functions;
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
 
 import com.liferay.dynamic.data.mapping.expression.DDMExpressionFunction;
 import com.liferay.portal.kernel.util.Validator;
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/MaxFunction.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/MaxFunction.java
similarity index 94%
rename from modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/MaxFunction.java
rename to modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/MaxFunction.java
index f17f0abf7d2d3..e0a718b0f3b72 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/MaxFunction.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/MaxFunction.java
@@ -12,7 +12,7 @@
  * details.
  */
 
-package com.liferay.dynamic.data.mapping.form.evaluator.functions;
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
 
 import com.liferay.dynamic.data.mapping.expression.DDMExpressionFunction;
 
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/MinFunction.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/MinFunction.java
similarity index 94%
rename from modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/MinFunction.java
rename to modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/MinFunction.java
index b9dc5907bcdf4..580afa82393ad 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/MinFunction.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/MinFunction.java
@@ -12,7 +12,7 @@
  * details.
  */
 
-package com.liferay.dynamic.data.mapping.form.evaluator.functions;
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
 
 import com.liferay.dynamic.data.mapping.expression.DDMExpressionFunction;
 
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/SumFunction.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/SumFunction.java
similarity index 95%
rename from modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/SumFunction.java
rename to modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/SumFunction.java
index 2e217697f1614..2230de605776d 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/SumFunction.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/SumFunction.java
@@ -12,7 +12,7 @@
  * details.
  */
 
-package com.liferay.dynamic.data.mapping.form.evaluator.functions;
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
 
 import com.liferay.dynamic.data.mapping.expression.DDMExpressionFunction;
 
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/BetweenFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/BetweenFunctionTest.java
similarity index 94%
rename from modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/BetweenFunctionTest.java
rename to modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/BetweenFunctionTest.java
index b6ac2e93528e6..ab14120fad5e0 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/BetweenFunctionTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/BetweenFunctionTest.java
@@ -12,11 +12,13 @@
  * details.
  */
 
-package com.liferay.dynamic.data.mapping.form.evaluator.functions;
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
 
 import org.junit.Assert;
 import org.junit.Test;
 
+import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.BetweenFunction;
+
 /**
  * @author Leonardo Barros
  */
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/ConcatFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/ConcatFunctionTest.java
similarity index 89%
rename from modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/ConcatFunctionTest.java
rename to modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/ConcatFunctionTest.java
index 05a5ed1aece71..b3966fade1a85 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/ConcatFunctionTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/ConcatFunctionTest.java
@@ -12,11 +12,13 @@
  * details.
  */
 
-package com.liferay.dynamic.data.mapping.form.evaluator.functions;
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
 
 import org.junit.Assert;
 import org.junit.Test;
 
+import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.ConcatFunction;
+
 /**
  * @author Leonardo Barros
  */
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/ContainsFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/ContainsFunctionTest.java
similarity index 93%
rename from modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/ContainsFunctionTest.java
rename to modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/ContainsFunctionTest.java
index 750aa6aec76da..abdac290977c2 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/ContainsFunctionTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/ContainsFunctionTest.java
@@ -12,11 +12,13 @@
  * details.
  */
 
-package com.liferay.dynamic.data.mapping.form.evaluator.functions;
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
 
 import org.junit.Assert;
 import org.junit.Test;
 
+import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.ContainsFunction;
+
 /**
  * @author Leonardo Barros
  */
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/EqualsFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/EqualsFunctionTest.java
similarity index 91%
rename from modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/EqualsFunctionTest.java
rename to modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/EqualsFunctionTest.java
index 98aa65a56cd9f..d4ceb2ab3b59c 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/EqualsFunctionTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/EqualsFunctionTest.java
@@ -12,11 +12,13 @@
  * details.
  */
 
-package com.liferay.dynamic.data.mapping.form.evaluator.functions;
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
 
 import org.junit.Assert;
 import org.junit.Test;
 
+import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.EqualsFunction;
+
 /**
  * @author Leonardo Barros
  */
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsDecimalFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsDecimalFunctionTest.java
similarity index 89%
rename from modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsDecimalFunctionTest.java
rename to modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsDecimalFunctionTest.java
index 3dda29dfbf226..5fbf793bb3638 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsDecimalFunctionTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsDecimalFunctionTest.java
@@ -12,11 +12,13 @@
  * details.
  */
 
-package com.liferay.dynamic.data.mapping.form.evaluator.functions;
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
 
 import org.junit.Assert;
 import org.junit.Test;
 
+import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.IsDecimalFunction;
+
 /**
  * @author Leonardo Barros
  */
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsEmailAddressFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsEmailAddressFunctionTest.java
similarity index 88%
rename from modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsEmailAddressFunctionTest.java
rename to modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsEmailAddressFunctionTest.java
index f246306129a9d..d04f780b6988f 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsEmailAddressFunctionTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsEmailAddressFunctionTest.java
@@ -12,11 +12,13 @@
  * details.
  */
 
-package com.liferay.dynamic.data.mapping.form.evaluator.functions;
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
 
 import org.junit.Assert;
 import org.junit.Test;
 
+import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.IsEmailAddressFunction;
+
 /**
  * @author Leonardo Barros
  */
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsEmptyFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsEmptyFunctionTest.java
similarity index 93%
rename from modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsEmptyFunctionTest.java
rename to modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsEmptyFunctionTest.java
index fa663cbecb0c9..47cfd818fedda 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsEmptyFunctionTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsEmptyFunctionTest.java
@@ -12,11 +12,13 @@
  * details.
  */
 
-package com.liferay.dynamic.data.mapping.form.evaluator.functions;
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
 
 import org.junit.Assert;
 import org.junit.Test;
 
+import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.IsEmptyFunction;
+
 /**
  * @author Leonardo Barros
  */
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsIntegerFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsIntegerFunctionTest.java
similarity index 88%
rename from modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsIntegerFunctionTest.java
rename to modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsIntegerFunctionTest.java
index a28e9eb3cd21a..b105aa8050548 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsIntegerFunctionTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsIntegerFunctionTest.java
@@ -12,11 +12,13 @@
  * details.
  */
 
-package com.liferay.dynamic.data.mapping.form.evaluator.functions;
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
 
 import org.junit.Assert;
 import org.junit.Test;
 
+import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.IsIntegerFunction;
+
 /**
  * @author Leonardo Barros
  */
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsURLFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsURLFunctionTest.java
similarity index 88%
rename from modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsURLFunctionTest.java
rename to modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsURLFunctionTest.java
index 9329e924f87cd..65e7cf79ab2c3 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/IsURLFunctionTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsURLFunctionTest.java
@@ -12,11 +12,13 @@
  * details.
  */
 
-package com.liferay.dynamic.data.mapping.form.evaluator.functions;
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
 
 import org.junit.Assert;
 import org.junit.Test;
 
+import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.IsURLFunction;
+
 /**
  * @author Leonardo Barros
  */
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/MaxFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/MaxFunctionTest.java
similarity index 90%
rename from modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/MaxFunctionTest.java
rename to modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/MaxFunctionTest.java
index fd5dbc9b9a99e..70e5b423deafc 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/MaxFunctionTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/MaxFunctionTest.java
@@ -12,11 +12,13 @@
  * details.
  */
 
-package com.liferay.dynamic.data.mapping.form.evaluator.functions;
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
 
 import org.junit.Assert;
 import org.junit.Test;
 
+import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.MaxFunction;
+
 /**
  * @author Leonardo Barros
  */
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/MinFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/MinFunctionTest.java
similarity index 90%
rename from modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/MinFunctionTest.java
rename to modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/MinFunctionTest.java
index 9db22c920b043..33af0796012e5 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/MinFunctionTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/MinFunctionTest.java
@@ -12,11 +12,13 @@
  * details.
  */
 
-package com.liferay.dynamic.data.mapping.form.evaluator.functions;
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
 
 import org.junit.Assert;
 import org.junit.Test;
 
+import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.MinFunction;
+
 /**
  * @author Leonardo Barros
  */
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/SumFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/SumFunctionTest.java
similarity index 89%
rename from modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/SumFunctionTest.java
rename to modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/SumFunctionTest.java
index 92873a63e0817..b9f93747493e6 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/functions/SumFunctionTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/SumFunctionTest.java
@@ -12,11 +12,13 @@
  * details.
  */
 
-package com.liferay.dynamic.data.mapping.form.evaluator.functions;
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
 
 import org.junit.Assert;
 import org.junit.Test;
 
+import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.SumFunction;
+
 /**
  * @author Leonardo Barros
  */

From 7ee25c8bfae4a2d6da5fc455488d22765d4123da Mon Sep 17 00:00:00 2001
From: Leonardo Barros <leonardo.barros@liferay.com>
Date: Thu, 23 Mar 2017 09:16:50 -0300
Subject: [PATCH 27/46] LPS-71167 Not needed

---
 .../.lfrbuild-portal                                 |  0
 .../bnd.bnd                                          |  5 -----
 .../build.gradle                                     | 12 ------------
 3 files changed, 17 deletions(-)
 delete mode 100644 modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/.lfrbuild-portal
 delete mode 100644 modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/bnd.bnd
 delete mode 100644 modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/build.gradle

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/.lfrbuild-portal b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/.lfrbuild-portal
deleted file mode 100644
index e69de29bb2d1d..0000000000000
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/bnd.bnd b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/bnd.bnd
deleted file mode 100644
index 868bca5c7a4d1..0000000000000
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/bnd.bnd
+++ /dev/null
@@ -1,5 +0,0 @@
-Bundle-Name: Liferay Dynamic Data Mapping Form Evaluator Functions
-Bundle-SymbolicName: com.liferay.dynamic.data.mapping.form.evaluator.functions
-Bundle-Version: 1.0.0
-Liferay-Releng-Module-Group-Description:
-Liferay-Releng-Module-Group-Title: Dynamic Data Mapping
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/build.gradle
deleted file mode 100644
index cbe12a96177ba..0000000000000
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-functions/build.gradle
+++ /dev/null
@@ -1,12 +0,0 @@
-sourceCompatibility = "1.8"
-targetCompatibility = "1.8"
-
-dependencies {
-	provided group: "com.liferay.portal", name: "com.liferay.portal.impl", version: "2.0.0"
-	provided group: "com.liferay.portal", name: "com.liferay.portal.kernel", version: "2.0.0"
-	provided group: "commons-lang", name: "commons-lang", version: "2.6"
-	provided group: "org.osgi", name: "org.osgi.service.component.annotations", version: "1.3.0"
-	provided project(":apps:forms-and-workflow:dynamic-data-mapping:dynamic-data-mapping-expression")
-
-	testCompile group: "com.liferay", name: "com.liferay.dynamic.data.mapping.test.util", version: "2.0.0"
-}
\ No newline at end of file

From eefd4ba7a5a7675c50c8ec52bbe010e4500af5ec Mon Sep 17 00:00:00 2001
From: Leonardo Barros <leonardo.barros@liferay.com>
Date: Thu, 23 Mar 2017 09:17:53 -0300
Subject: [PATCH 28/46] LPS-71167 Update build.gradle

---
 .../dynamic-data-mapping-form-evaluator-impl/build.gradle        | 1 +
 1 file changed, 1 insertion(+)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/build.gradle
index 4ecef837598c5..12e1602ca3ffe 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/build.gradle
@@ -5,6 +5,7 @@ dependencies {
 	provided group: "com.liferay", name: "com.liferay.dynamic.data.mapping.io", version: "2.0.0"
 	provided group: "com.liferay.portal", name: "com.liferay.portal.impl", version: "2.0.0"
 	provided group: "com.liferay.portal", name: "com.liferay.portal.kernel", version: "2.0.0"
+	provided group: "commons-lang", name: "commons-lang", version: "2.6"
 	provided group: "javax.portlet", name: "portlet-api", version: "2.0"
 	provided group: "javax.servlet", name: "javax.servlet-api", version: "3.0.1"
 	provided group: "org.osgi", name: "org.osgi.service.component.annotations", version: "1.3.0"

From 47d5ac7ff5730cbfe72f72b28b58b0dd7be178aa Mon Sep 17 00:00:00 2001
From: Leonardo Barros <leonardo.barros@liferay.com>
Date: Thu, 23 Mar 2017 09:18:18 -0300
Subject: [PATCH 29/46] LPS-71167 SF

---
 .../evaluator/impl/internal/functions/BetweenFunctionTest.java  | 2 --
 .../evaluator/impl/internal/functions/ConcatFunctionTest.java   | 2 --
 .../evaluator/impl/internal/functions/ContainsFunctionTest.java | 2 --
 .../evaluator/impl/internal/functions/EqualsFunctionTest.java   | 2 --
 .../impl/internal/functions/IsDecimalFunctionTest.java          | 2 --
 .../impl/internal/functions/IsEmailAddressFunctionTest.java     | 2 --
 .../evaluator/impl/internal/functions/IsEmptyFunctionTest.java  | 2 --
 .../impl/internal/functions/IsIntegerFunctionTest.java          | 2 --
 .../evaluator/impl/internal/functions/IsURLFunctionTest.java    | 2 --
 .../form/evaluator/impl/internal/functions/MaxFunctionTest.java | 2 --
 .../form/evaluator/impl/internal/functions/MinFunctionTest.java | 2 --
 .../form/evaluator/impl/internal/functions/SumFunctionTest.java | 2 --
 12 files changed, 24 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/BetweenFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/BetweenFunctionTest.java
index ab14120fad5e0..bef4c2352503a 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/BetweenFunctionTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/BetweenFunctionTest.java
@@ -17,8 +17,6 @@
 import org.junit.Assert;
 import org.junit.Test;
 
-import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.BetweenFunction;
-
 /**
  * @author Leonardo Barros
  */
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/ConcatFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/ConcatFunctionTest.java
index b3966fade1a85..b06bcfda92a22 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/ConcatFunctionTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/ConcatFunctionTest.java
@@ -17,8 +17,6 @@
 import org.junit.Assert;
 import org.junit.Test;
 
-import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.ConcatFunction;
-
 /**
  * @author Leonardo Barros
  */
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/ContainsFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/ContainsFunctionTest.java
index abdac290977c2..bbe422b164339 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/ContainsFunctionTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/ContainsFunctionTest.java
@@ -17,8 +17,6 @@
 import org.junit.Assert;
 import org.junit.Test;
 
-import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.ContainsFunction;
-
 /**
  * @author Leonardo Barros
  */
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/EqualsFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/EqualsFunctionTest.java
index d4ceb2ab3b59c..7ce0659d0aaf0 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/EqualsFunctionTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/EqualsFunctionTest.java
@@ -17,8 +17,6 @@
 import org.junit.Assert;
 import org.junit.Test;
 
-import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.EqualsFunction;
-
 /**
  * @author Leonardo Barros
  */
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsDecimalFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsDecimalFunctionTest.java
index 5fbf793bb3638..5ea7bf16f483c 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsDecimalFunctionTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsDecimalFunctionTest.java
@@ -17,8 +17,6 @@
 import org.junit.Assert;
 import org.junit.Test;
 
-import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.IsDecimalFunction;
-
 /**
  * @author Leonardo Barros
  */
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsEmailAddressFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsEmailAddressFunctionTest.java
index d04f780b6988f..9ef2d4b24aebb 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsEmailAddressFunctionTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsEmailAddressFunctionTest.java
@@ -17,8 +17,6 @@
 import org.junit.Assert;
 import org.junit.Test;
 
-import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.IsEmailAddressFunction;
-
 /**
  * @author Leonardo Barros
  */
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsEmptyFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsEmptyFunctionTest.java
index 47cfd818fedda..de131bc34d546 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsEmptyFunctionTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsEmptyFunctionTest.java
@@ -17,8 +17,6 @@
 import org.junit.Assert;
 import org.junit.Test;
 
-import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.IsEmptyFunction;
-
 /**
  * @author Leonardo Barros
  */
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsIntegerFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsIntegerFunctionTest.java
index b105aa8050548..e0346a3698796 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsIntegerFunctionTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsIntegerFunctionTest.java
@@ -17,8 +17,6 @@
 import org.junit.Assert;
 import org.junit.Test;
 
-import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.IsIntegerFunction;
-
 /**
  * @author Leonardo Barros
  */
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsURLFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsURLFunctionTest.java
index 65e7cf79ab2c3..e1a9d2835a16a 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsURLFunctionTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/IsURLFunctionTest.java
@@ -17,8 +17,6 @@
 import org.junit.Assert;
 import org.junit.Test;
 
-import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.IsURLFunction;
-
 /**
  * @author Leonardo Barros
  */
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/MaxFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/MaxFunctionTest.java
index 70e5b423deafc..c97999763a351 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/MaxFunctionTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/MaxFunctionTest.java
@@ -17,8 +17,6 @@
 import org.junit.Assert;
 import org.junit.Test;
 
-import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.MaxFunction;
-
 /**
  * @author Leonardo Barros
  */
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/MinFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/MinFunctionTest.java
index 33af0796012e5..c4206a789bc3d 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/MinFunctionTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/MinFunctionTest.java
@@ -17,8 +17,6 @@
 import org.junit.Assert;
 import org.junit.Test;
 
-import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.MinFunction;
-
 /**
  * @author Leonardo Barros
  */
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/SumFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/SumFunctionTest.java
index b9f93747493e6..0567f86899f82 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/SumFunctionTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/SumFunctionTest.java
@@ -17,8 +17,6 @@
 import org.junit.Assert;
 import org.junit.Test;
 
-import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.SumFunction;
-
 /**
  * @author Leonardo Barros
  */

From b1148aba842699d1e88959696253d02f2eebd9fc Mon Sep 17 00:00:00 2001
From: Leonardo Barros <leonardo.barros@liferay.com>
Date: Thu, 23 Mar 2017 09:54:23 -0300
Subject: [PATCH 30/46] LPS-71167 Add a register for DDMExpressionFunction

---
 .../DDMExpressionFunctionRegister.java        | 46 +++++++++++++++++++
 .../impl/internal/DDMFormEvaluatorHelper.java | 32 ++++++-------
 .../impl/internal/DDMFormRuleEvaluator.java   | 31 +++----------
 .../internal/DDMFormRuleEvaluatorTest.java    | 40 +++++++++++-----
 4 files changed, 97 insertions(+), 52 deletions(-)
 create mode 100644 modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/DDMExpressionFunctionRegister.java

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/DDMExpressionFunctionRegister.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/DDMExpressionFunctionRegister.java
new file mode 100644
index 0000000000000..673c4ec0f118f
--- /dev/null
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/DDMExpressionFunctionRegister.java
@@ -0,0 +1,46 @@
+/**
+ * Copyright (c) 2000-present Liferay, Inc. All rights reserved.
+ *
+ * This library is free software; you can redistribute it and/or modify it under
+ * the terms of the GNU Lesser General Public License as published by the Free
+ * Software Foundation; either version 2.1 of the License, or (at your option)
+ * any later version.
+ *
+ * This library is distributed in the hope that it will be useful, but WITHOUT
+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
+ * FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more
+ * details.
+ */
+
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal;
+
+import com.liferay.dynamic.data.mapping.expression.DDMExpression;
+import com.liferay.dynamic.data.mapping.expression.DDMExpressionFunction;
+
+import java.util.HashMap;
+import java.util.Map;
+
+/**
+ * @author Leonardo Barros
+ */
+public class DDMExpressionFunctionRegister {
+
+	public void applyDDMExpressionFunctions(DDMExpression<?> ddmExpression) {
+		for (Map.Entry<String, DDMExpressionFunction> entry :
+				_ddmExpressionFunctionsMap.entrySet()) {
+
+			ddmExpression.setDDMExpressionFunction(
+				entry.getKey(), entry.getValue());
+		}
+	}
+
+	public void registerDDMExpressionFunction(
+		String functionName, DDMExpressionFunction ddmExpressionFunction) {
+
+		_ddmExpressionFunctionsMap.put(functionName, ddmExpressionFunction);
+	}
+
+	private final Map<String, DDMExpressionFunction>
+		_ddmExpressionFunctionsMap = new HashMap<>();
+
+}
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/DDMFormEvaluatorHelper.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/DDMFormEvaluatorHelper.java
index 6363e5cf594dc..a87cf8a91bd0e 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/DDMFormEvaluatorHelper.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/DDMFormEvaluatorHelper.java
@@ -91,6 +91,8 @@ public DDMFormEvaluatorHelper(
 		createDDMFormFieldValues(ddmFormEvaluatorContext.getDDMFormValues());
 
 		createDDMFormFieldRuleEvaluationResultsMap();
+
+		registerDDMExpressionCustomFunctions();
 	}
 
 	public DDMFormEvaluationResult evaluate()
@@ -208,9 +210,7 @@ protected void evaluateDDMFormRule(DDMFormRule ddmFormRule)
 		throws DDMFormEvaluationException {
 
 		DDMFormRuleEvaluator ddmFormRuleEvaluator = new DDMFormRuleEvaluator(
-			ddmFormRule, _ddmExpressionFactory);
-
-		registerDDMExpressionCustomFunctions(ddmFormRuleEvaluator);
+			ddmFormRule, _ddmExpressionFactory, _ddmExpressionFunctionRegister);
 
 		ddmFormRuleEvaluator.evaluate();
 	}
@@ -373,42 +373,40 @@ protected void populateDDMFormFieldValues(
 		}
 	}
 
-	protected void registerDDMExpressionCustomFunctions(
-		DDMFormRuleEvaluator ddmFormRuleEvaluator) {
-
-		ddmFormRuleEvaluator.setDDMExpressionFunction(
+	protected void registerDDMExpressionCustomFunctions() {
+		_ddmExpressionFunctionRegister.registerDDMExpressionFunction(
 			"belongsTo",
 			new BelongsToRoleFunction(_request, _userLocalService));
-		ddmFormRuleEvaluator.setDDMExpressionFunction(
+		_ddmExpressionFunctionRegister.registerDDMExpressionFunction(
 			"calculate",
 			new SetPropertyFunction(
 				_ddmFormFieldEvaluationResultsMap, "value"));
-		ddmFormRuleEvaluator.setDDMExpressionFunction(
+		_ddmExpressionFunctionRegister.registerDDMExpressionFunction(
 			"call",
 			new CallFunction(
 				_ddmDataProviderContextFactory, _ddmDataProviderInvoker,
 				_ddmFormFieldEvaluationResultsMap, _request, _jsonFactory));
-		ddmFormRuleEvaluator.setDDMExpressionFunction(
+		_ddmExpressionFunctionRegister.registerDDMExpressionFunction(
 			"getValue",
 			new GetPropertyFunction(
 				_ddmFormFieldEvaluationResultsMap, "value"));
-		ddmFormRuleEvaluator.setDDMExpressionFunction(
+		_ddmExpressionFunctionRegister.registerDDMExpressionFunction(
 			"jumpPage", new JumpPageFunction(_pageFlow));
-		ddmFormRuleEvaluator.setDDMExpressionFunction(
+		_ddmExpressionFunctionRegister.registerDDMExpressionFunction(
 			"setEnabled",
 			new SetEnabledFunction(_ddmFormFieldEvaluationResultsMap));
-		ddmFormRuleEvaluator.setDDMExpressionFunction(
+		_ddmExpressionFunctionRegister.registerDDMExpressionFunction(
 			"setInvalid",
 			new SetInvalidFunction(_ddmFormFieldEvaluationResultsMap));
-		ddmFormRuleEvaluator.setDDMExpressionFunction(
+		_ddmExpressionFunctionRegister.registerDDMExpressionFunction(
 			"setRequired",
 			new SetPropertyFunction(
 				_ddmFormFieldEvaluationResultsMap, "required"));
-		ddmFormRuleEvaluator.setDDMExpressionFunction(
+		_ddmExpressionFunctionRegister.registerDDMExpressionFunction(
 			"setValue",
 			new SetPropertyFunction(
 				_ddmFormFieldEvaluationResultsMap, "value"));
-		ddmFormRuleEvaluator.setDDMExpressionFunction(
+		_ddmExpressionFunctionRegister.registerDDMExpressionFunction(
 			"setVisible",
 			new SetPropertyFunction(
 				_ddmFormFieldEvaluationResultsMap, "visible"));
@@ -608,6 +606,8 @@ protected void setDDMFormFieldEvaluationResultVisibility(
 	private final DDMDataProviderContextFactory _ddmDataProviderContextFactory;
 	private final DDMDataProviderInvoker _ddmDataProviderInvoker;
 	private final DDMExpressionFactory _ddmExpressionFactory;
+	private final DDMExpressionFunctionRegister _ddmExpressionFunctionRegister =
+		new DDMExpressionFunctionRegister();
 	private final DDMForm _ddmForm;
 	private final Map<String, List<DDMFormFieldEvaluationResult>>
 		_ddmFormFieldEvaluationResultsMap = new HashMap<>();
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/DDMFormRuleEvaluator.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/DDMFormRuleEvaluator.java
index 19a2c80739457..8ee19a0ac4bb0 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/DDMFormRuleEvaluator.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/DDMFormRuleEvaluator.java
@@ -17,24 +17,22 @@
 import com.liferay.dynamic.data.mapping.expression.DDMExpression;
 import com.liferay.dynamic.data.mapping.expression.DDMExpressionException;
 import com.liferay.dynamic.data.mapping.expression.DDMExpressionFactory;
-import com.liferay.dynamic.data.mapping.expression.DDMExpressionFunction;
 import com.liferay.dynamic.data.mapping.model.DDMFormRule;
 import com.liferay.portal.kernel.log.Log;
 import com.liferay.portal.kernel.log.LogFactoryUtil;
 
-import java.util.HashMap;
-import java.util.Map;
-
 /**
  * @author Leonardo Barros
  */
 public class DDMFormRuleEvaluator {
 
 	public DDMFormRuleEvaluator(
-		DDMFormRule ddmFormRule, DDMExpressionFactory ddmExpressionFactory) {
+		DDMFormRule ddmFormRule, DDMExpressionFactory ddmExpressionFactory,
+		DDMExpressionFunctionRegister ddmExpressionFunctionRegister) {
 
 		_ddmFormRule = ddmFormRule;
 		_ddmExpressionFactory = ddmExpressionFactory;
+		_ddmExpressionFunctionRegister = ddmExpressionFunctionRegister;
 	}
 
 	public void evaluate() {
@@ -54,15 +52,9 @@ public void evaluate() {
 		}
 	}
 
-	public void setDDMExpressionFunction(
-		String functionName, DDMExpressionFunction ddmExpressionFunction) {
-
-		_ddmExpressionFunctionsMap.put(functionName, ddmExpressionFunction);
-	}
-
 	protected boolean evaluateCondition(String condition) {
 		try {
-			return evaluateDDMExpression(_ddmFormRule.getCondition());
+			return evaluateDDMExpression(condition);
 		}
 		catch (DDMExpressionException ddmee) {
 			if (_log.isDebugEnabled()) {
@@ -80,7 +72,8 @@ protected boolean evaluateDDMExpression(String ddmExpressionString)
 			_ddmExpressionFactory.createBooleanDDMExpression(
 				ddmExpressionString);
 
-		setDDMExpressionFunctions(ddmExpression);
+		_ddmExpressionFunctionRegister.applyDDMExpressionFunctions(
+			ddmExpression);
 
 		return ddmExpression.evaluate();
 	}
@@ -96,21 +89,11 @@ protected void executeAction(String action) {
 		}
 	}
 
-	protected void setDDMExpressionFunctions(DDMExpression<?> ddmExpression) {
-		for (Map.Entry<String, DDMExpressionFunction> entry :
-				_ddmExpressionFunctionsMap.entrySet()) {
-
-			ddmExpression.setDDMExpressionFunction(
-				entry.getKey(), entry.getValue());
-		}
-	}
-
 	private static final Log _log = LogFactoryUtil.getLog(
 		DDMFormRuleEvaluator.class);
 
 	private final DDMExpressionFactory _ddmExpressionFactory;
-	private final Map<String, DDMExpressionFunction>
-		_ddmExpressionFunctionsMap = new HashMap<>();
+	private final DDMExpressionFunctionRegister _ddmExpressionFunctionRegister;
 	private final DDMFormRule _ddmFormRule;
 
 }
\ No newline at end of file
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/DDMFormRuleEvaluatorTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/DDMFormRuleEvaluatorTest.java
index d64d13cf294e8..2a320f2d120fb 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/DDMFormRuleEvaluatorTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/DDMFormRuleEvaluatorTest.java
@@ -37,12 +37,16 @@ public void testDisabledRuleShouldNotRunConditionEvaluation()
 
 		ddmFormRule.setEnabled(false);
 
-		DDMFormRuleEvaluator ddmFormRuleEvaluator = new DDMFormRuleEvaluator(
-			ddmFormRule, _ddmExpressionFactory);
+		DDMExpressionFunctionRegister ddmExpressionFunctionRegister =
+			new DDMExpressionFunctionRegister();
 
 		EvalFunction evalFunction = new EvalFunction();
 
-		ddmFormRuleEvaluator.setDDMExpressionFunction("eval", evalFunction);
+		ddmExpressionFunctionRegister.registerDDMExpressionFunction(
+			"eval", evalFunction);
+
+		DDMFormRuleEvaluator ddmFormRuleEvaluator = new DDMFormRuleEvaluator(
+			ddmFormRule, _ddmExpressionFactory, ddmExpressionFunctionRegister);
 
 		ddmFormRuleEvaluator.evaluate();
 
@@ -53,12 +57,16 @@ public void testDisabledRuleShouldNotRunConditionEvaluation()
 	public void testEnableRuleShouldRunConditionEvaluation() throws Exception {
 		DDMFormRule ddmFormRule = new DDMFormRule("eval()", asList("true"));
 
-		DDMFormRuleEvaluator ddmFormRuleEvaluator = new DDMFormRuleEvaluator(
-			ddmFormRule, _ddmExpressionFactory);
+		DDMExpressionFunctionRegister ddmExpressionFunctionRegister =
+			new DDMExpressionFunctionRegister();
 
 		EvalFunction evalFunction = new EvalFunction();
 
-		ddmFormRuleEvaluator.setDDMExpressionFunction("eval", evalFunction);
+		ddmExpressionFunctionRegister.registerDDMExpressionFunction(
+			"eval", evalFunction);
+
+		DDMFormRuleEvaluator ddmFormRuleEvaluator = new DDMFormRuleEvaluator(
+			ddmFormRule, _ddmExpressionFactory, ddmExpressionFunctionRegister);
 
 		ddmFormRuleEvaluator.evaluate();
 
@@ -71,12 +79,16 @@ public void testFalseConditionShouldNotRunActionEvaluation()
 
 		DDMFormRule ddmFormRule = new DDMFormRule("false", asList("eval()"));
 
-		DDMFormRuleEvaluator ddmFormRuleEvaluator = new DDMFormRuleEvaluator(
-			ddmFormRule, _ddmExpressionFactory);
+		DDMExpressionFunctionRegister ddmExpressionFunctionRegister =
+			new DDMExpressionFunctionRegister();
 
 		EvalFunction evalFunction = new EvalFunction();
 
-		ddmFormRuleEvaluator.setDDMExpressionFunction("eval", evalFunction);
+		ddmExpressionFunctionRegister.registerDDMExpressionFunction(
+			"eval", evalFunction);
+
+		DDMFormRuleEvaluator ddmFormRuleEvaluator = new DDMFormRuleEvaluator(
+			ddmFormRule, _ddmExpressionFactory, ddmExpressionFunctionRegister);
 
 		ddmFormRuleEvaluator.evaluate();
 
@@ -87,12 +99,16 @@ public void testFalseConditionShouldNotRunActionEvaluation()
 	public void testTrueConditionShouldRunActionEvaluation() throws Exception {
 		DDMFormRule ddmFormRule = new DDMFormRule("true", asList("eval()"));
 
-		DDMFormRuleEvaluator ddmFormRuleEvaluator = new DDMFormRuleEvaluator(
-			ddmFormRule, _ddmExpressionFactory);
+		DDMExpressionFunctionRegister ddmExpressionFunctionRegister =
+			new DDMExpressionFunctionRegister();
 
 		EvalFunction evalFunction = new EvalFunction();
 
-		ddmFormRuleEvaluator.setDDMExpressionFunction("eval", evalFunction);
+		ddmExpressionFunctionRegister.registerDDMExpressionFunction(
+			"eval", evalFunction);
+
+		DDMFormRuleEvaluator ddmFormRuleEvaluator = new DDMFormRuleEvaluator(
+			ddmFormRule, _ddmExpressionFactory, ddmExpressionFunctionRegister);
 
 		ddmFormRuleEvaluator.evaluate();
 

From 988e4b9e5b455a1b16e73a3e3d7e741fe277875d Mon Sep 17 00:00:00 2001
From: Leonardo Barros <leonardo.barros@liferay.com>
Date: Thu, 23 Mar 2017 10:24:37 -0300
Subject: [PATCH 31/46] =?UTF-8?q?LPS-71167=20Add=20=E2=80=9Call=E2=80=9D?=
 =?UTF-8?q?=20function?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

---
 .../impl/internal/DDMFormEvaluatorHelper.java |   5 +
 .../impl/internal/functions/AllFunction.java  | 107 ++++++++++++++++++
 2 files changed, 112 insertions(+)
 create mode 100644 modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/AllFunction.java

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/DDMFormEvaluatorHelper.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/DDMFormEvaluatorHelper.java
index a87cf8a91bd0e..88c4064f76999 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/DDMFormEvaluatorHelper.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/DDMFormEvaluatorHelper.java
@@ -23,6 +23,7 @@
 import com.liferay.dynamic.data.mapping.form.evaluator.DDMFormEvaluationResult;
 import com.liferay.dynamic.data.mapping.form.evaluator.DDMFormEvaluatorContext;
 import com.liferay.dynamic.data.mapping.form.evaluator.DDMFormFieldEvaluationResult;
+import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.AllFunction;
 import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.BelongsToRoleFunction;
 import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.CallFunction;
 import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions.GetPropertyFunction;
@@ -374,6 +375,10 @@ protected void populateDDMFormFieldValues(
 	}
 
 	protected void registerDDMExpressionCustomFunctions() {
+		_ddmExpressionFunctionRegister.registerDDMExpressionFunction(
+			"all",
+			new AllFunction(
+				_ddmExpressionFactory, _ddmExpressionFunctionRegister));
 		_ddmExpressionFunctionRegister.registerDDMExpressionFunction(
 			"belongsTo",
 			new BelongsToRoleFunction(_request, _userLocalService));
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/AllFunction.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/AllFunction.java
new file mode 100644
index 0000000000000..f5787a33c7557
--- /dev/null
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/main/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/AllFunction.java
@@ -0,0 +1,107 @@
+/**
+ * Copyright (c) 2000-present Liferay, Inc. All rights reserved.
+ *
+ * This library is free software; you can redistribute it and/or modify it under
+ * the terms of the GNU Lesser General Public License as published by the Free
+ * Software Foundation; either version 2.1 of the License, or (at your option)
+ * any later version.
+ *
+ * This library is distributed in the hope that it will be useful, but WITHOUT
+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
+ * FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more
+ * details.
+ */
+
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
+
+import com.liferay.dynamic.data.mapping.expression.DDMExpression;
+import com.liferay.dynamic.data.mapping.expression.DDMExpressionException;
+import com.liferay.dynamic.data.mapping.expression.DDMExpressionFactory;
+import com.liferay.dynamic.data.mapping.expression.DDMExpressionFunction;
+import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.DDMExpressionFunctionRegister;
+import com.liferay.portal.kernel.log.Log;
+import com.liferay.portal.kernel.log.LogFactoryUtil;
+
+import java.util.stream.Stream;
+
+/**
+ * @author Leonardo Barros
+ */
+public class AllFunction implements DDMExpressionFunction {
+
+	public AllFunction(
+		DDMExpressionFactory ddmExpressionFactory,
+		DDMExpressionFunctionRegister ddmExpressionFunctionRegister) {
+
+		_ddmExpressionFactory = ddmExpressionFactory;
+		_ddmExpressionFunctionRegister = ddmExpressionFunctionRegister;
+	}
+
+	@Override
+	public Object evaluate(Object... parameters) {
+		if ((parameters == null) || (parameters.length < 1)) {
+			throw new IllegalArgumentException(
+				"At least one parameter is expected");
+		}
+
+		if (parameters.length == 1) {
+			return false;
+		}
+
+		String expression = String.valueOf(parameters[0]);
+
+		if (!expression.contains("#value#")) {
+			return false;
+		}
+
+		Object[] values = null;
+
+		if (isArray(parameters[1])) {
+			values = (Object[])parameters[1];
+
+			if (values.length == 0) {
+				return false;
+			}
+		}
+		else {
+			values = new Object[] {parameters[1]};
+		}
+
+		Stream<Object> stream = Stream.of(values);
+
+		return stream.allMatch(value -> accept(expression, value));
+	}
+
+	protected boolean accept(String expression, Object value) {
+		expression = expression.replace("#value#", String.valueOf(value));
+
+		try {
+			DDMExpression<Boolean> ddmExpression =
+				_ddmExpressionFactory.createBooleanDDMExpression(expression);
+
+			_ddmExpressionFunctionRegister.applyDDMExpressionFunctions(
+				ddmExpression);
+
+			return ddmExpression.evaluate();
+		}
+		catch (DDMExpressionException ddmee) {
+			if (_log.isDebugEnabled()) {
+				_log.debug(ddmee);
+			}
+		}
+
+		return false;
+	}
+
+	protected boolean isArray(Object parameter) {
+		Class<?> clazz = parameter.getClass();
+
+		return clazz.isArray();
+	}
+
+	private static final Log _log = LogFactoryUtil.getLog(AllFunction.class);
+
+	private final DDMExpressionFactory _ddmExpressionFactory;
+	private final DDMExpressionFunctionRegister _ddmExpressionFunctionRegister;
+
+}
\ No newline at end of file

From f6a16cac937deac725a3dd323469db5bac496f00 Mon Sep 17 00:00:00 2001
From: Leonardo Barros <leonardo.barros@liferay.com>
Date: Thu, 23 Mar 2017 11:44:04 -0300
Subject: [PATCH 32/46] LPS-71167 Add tests

---
 .../internal/DDMFormEvaluatorHelperTest.java  | 133 ++++++++++++++++++
 .../internal/functions/AllFunctionTest.java   | 122 ++++++++++++++++
 2 files changed, 255 insertions(+)
 create mode 100644 modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/AllFunctionTest.java

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/DDMFormEvaluatorHelperTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/DDMFormEvaluatorHelperTest.java
index 48facd763b6e7..282ac4f480c5b 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/DDMFormEvaluatorHelperTest.java
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/DDMFormEvaluatorHelperTest.java
@@ -73,6 +73,74 @@ public void setUp() throws Exception {
 		setUpLanguageUtil();
 	}
 
+	@Test
+	public void testAllCondition() throws Exception {
+		DDMForm ddmForm = new DDMForm();
+
+		DDMFormField ddmFormField0 = createDDMFormField(
+			"field0", "text", FieldConstants.STRING);
+
+		DDMFormField ddmFormField1 = createDDMFormField(
+			"field1", "number", FieldConstants.DOUBLE);
+
+		ddmFormField1.setRepeatable(true);
+
+		ddmForm.addDDMFormField(ddmFormField0);
+		ddmForm.addDDMFormField(ddmFormField1);
+
+		String condition = "all('#value# <= 10', getValue('field1'))";
+
+		String action = "setEnabled(\"field0\", false)";
+
+		DDMFormRule ddmFormRule = new DDMFormRule(
+			condition, Arrays.asList(action));
+
+		ddmForm.addDDMFormRule(ddmFormRule);
+
+		DDMFormValues ddmFormValues = new DDMFormValues(ddmForm);
+
+		ddmFormValues.addDDMFormFieldValue(
+			DDMFormValuesTestUtil.createDDMFormFieldValue(
+				"field0_instanceId", "field0", new UnlocalizedValue("")));
+
+		ddmFormValues.addDDMFormFieldValue(
+			DDMFormValuesTestUtil.createDDMFormFieldValue(
+				"field1_0", "field1", new UnlocalizedValue("1")));
+
+		ddmFormValues.addDDMFormFieldValue(
+			DDMFormValuesTestUtil.createDDMFormFieldValue(
+				"field1_1", "field1", new UnlocalizedValue("5")));
+
+		ddmFormValues.addDDMFormFieldValue(
+			DDMFormValuesTestUtil.createDDMFormFieldValue(
+				"field1_2", "field1", new UnlocalizedValue("10")));
+
+		DDMFormEvaluatorContext ddmFormEvaluatorContext =
+			new DDMFormEvaluatorContext(ddmForm, ddmFormValues, LocaleUtil.US);
+
+		DDMFormEvaluatorHelper ddmFormEvaluatorHelper =
+			new DDMFormEvaluatorHelper(
+				null, null, _ddmExpressionFactory, ddmFormEvaluatorContext,
+				_jsonFactory, _userLocalService);
+
+		DDMFormEvaluationResult ddmFormEvaluationResult =
+			ddmFormEvaluatorHelper.evaluate();
+
+		Map<String, DDMFormFieldEvaluationResult>
+			ddmFormFieldEvaluationResultMap =
+				ddmFormEvaluationResult.getDDMFormFieldEvaluationResultsMap();
+
+		Assert.assertEquals(
+			ddmFormFieldEvaluationResultMap.toString(), 4,
+			ddmFormFieldEvaluationResultMap.size());
+
+		DDMFormFieldEvaluationResult field0DDMFormFieldEvaluationResult =
+			ddmFormEvaluationResult.geDDMFormFieldEvaluationResult(
+				"field0", "field0_instanceId");
+
+		Assert.assertTrue(field0DDMFormFieldEvaluationResult.isReadOnly());
+	}
+
 	@Test
 	public void testBelongsToCondition() throws Exception {
 		DDMForm ddmForm = new DDMForm();
@@ -172,6 +240,71 @@ public void testJumpPageAction() throws Exception {
 		Assert.assertTrue(disabledPagesIndexes.contains(2));
 	}
 
+	@Test
+	public void testNotAllCondition() throws Exception {
+		DDMForm ddmForm = new DDMForm();
+
+		DDMFormField ddmFormField0 = createDDMFormField(
+			"field0", "text", FieldConstants.STRING);
+
+		DDMFormField ddmFormField1 = createDDMFormField(
+			"field1", "number", FieldConstants.DOUBLE);
+
+		ddmFormField1.setRepeatable(true);
+
+		ddmForm.addDDMFormField(ddmFormField0);
+		ddmForm.addDDMFormField(ddmFormField1);
+
+		String condition =
+			"not(all('between(#value#,2,6)', getValue('field1')))";
+
+		String action = "setVisible(\"field0\", false)";
+
+		DDMFormRule ddmFormRule = new DDMFormRule(
+			condition, Arrays.asList(action));
+
+		ddmForm.addDDMFormRule(ddmFormRule);
+
+		DDMFormValues ddmFormValues = new DDMFormValues(ddmForm);
+
+		ddmFormValues.addDDMFormFieldValue(
+			DDMFormValuesTestUtil.createDDMFormFieldValue(
+				"field0_instanceId", "field0", new UnlocalizedValue("")));
+
+		ddmFormValues.addDDMFormFieldValue(
+			DDMFormValuesTestUtil.createDDMFormFieldValue(
+				"field1_0", "field1", new UnlocalizedValue("1")));
+
+		ddmFormValues.addDDMFormFieldValue(
+			DDMFormValuesTestUtil.createDDMFormFieldValue(
+				"field1_1", "field1", new UnlocalizedValue("5")));
+
+		DDMFormEvaluatorContext ddmFormEvaluatorContext =
+			new DDMFormEvaluatorContext(ddmForm, ddmFormValues, LocaleUtil.US);
+
+		DDMFormEvaluatorHelper ddmFormEvaluatorHelper =
+			new DDMFormEvaluatorHelper(
+				null, null, _ddmExpressionFactory, ddmFormEvaluatorContext,
+				_jsonFactory, _userLocalService);
+
+		DDMFormEvaluationResult ddmFormEvaluationResult =
+			ddmFormEvaluatorHelper.evaluate();
+
+		Map<String, DDMFormFieldEvaluationResult>
+			ddmFormFieldEvaluationResultMap =
+				ddmFormEvaluationResult.getDDMFormFieldEvaluationResultsMap();
+
+		Assert.assertEquals(
+			ddmFormFieldEvaluationResultMap.toString(), 3,
+			ddmFormFieldEvaluationResultMap.size());
+
+		DDMFormFieldEvaluationResult field0DDMFormFieldEvaluationResult =
+			ddmFormEvaluationResult.geDDMFormFieldEvaluationResult(
+				"field0", "field0_instanceId");
+
+		Assert.assertFalse(field0DDMFormFieldEvaluationResult.isVisible());
+	}
+
 	@Test
 	public void testNotBelongsToCondition() throws Exception {
 		DDMForm ddmForm = new DDMForm();
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/AllFunctionTest.java b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/AllFunctionTest.java
new file mode 100644
index 0000000000000..4a5e23c2271c3
--- /dev/null
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-evaluator-impl/src/test/java/com/liferay/dynamic/data/mapping/form/evaluator/impl/internal/functions/AllFunctionTest.java
@@ -0,0 +1,122 @@
+/**
+ * Copyright (c) 2000-present Liferay, Inc. All rights reserved.
+ *
+ * This library is free software; you can redistribute it and/or modify it under
+ * the terms of the GNU Lesser General Public License as published by the Free
+ * Software Foundation; either version 2.1 of the License, or (at your option)
+ * any later version.
+ *
+ * This library is distributed in the hope that it will be useful, but WITHOUT
+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
+ * FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more
+ * details.
+ */
+
+package com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.functions;
+
+import com.liferay.dynamic.data.mapping.expression.DDMExpressionFactory;
+import com.liferay.dynamic.data.mapping.expression.DDMExpressionFunction;
+import com.liferay.dynamic.data.mapping.expression.internal.DDMExpressionFactoryImpl;
+import com.liferay.dynamic.data.mapping.form.evaluator.impl.internal.DDMExpressionFunctionRegister;
+
+import org.junit.Assert;
+import org.junit.Test;
+import org.junit.runner.RunWith;
+
+import org.mockito.runners.MockitoJUnitRunner;
+
+import org.powermock.api.mockito.PowerMockito;
+
+/**
+ * @author Leonardo Barros
+ */
+@RunWith(MockitoJUnitRunner.class)
+public class AllFunctionTest extends PowerMockito {
+
+	@Test
+	public void testEvaluateFalse() throws Exception {
+		AllFunction allFunction = new AllFunction(
+			_ddmExpressionFactory, _ddmExpressionFunctionRegister);
+
+		Boolean result = (Boolean)allFunction.evaluate("#value# > 10");
+
+		Assert.assertFalse(result);
+	}
+
+	@Test
+	public void testEvaluateFalse2() throws Exception {
+		AllFunction allFunction = new AllFunction(
+			_ddmExpressionFactory, _ddmExpressionFunctionRegister);
+
+		Object parameters = new Integer[] {1, 2, 4};
+
+		Boolean result = (Boolean)allFunction.evaluate(
+			"invalid expression", parameters);
+
+		Assert.assertFalse(result);
+	}
+
+	@Test
+	public void testEvaluateFalse3() throws Exception {
+		AllFunction allFunction = new AllFunction(
+			_ddmExpressionFactory, _ddmExpressionFunctionRegister);
+
+		Object parameters = new Integer[] {1, 2, 4};
+
+		Boolean result = (Boolean)allFunction.evaluate(
+			"#value# < 4", parameters);
+
+		Assert.assertFalse(result);
+	}
+
+	@Test
+	public void testEvaluateTrue() throws Exception {
+		_ddmExpressionFunctionRegister.registerDDMExpressionFunction(
+			"eval", new EvalFunction());
+
+		AllFunction allFunction = new AllFunction(
+			_ddmExpressionFactory, _ddmExpressionFunctionRegister);
+
+		Object parameters = new Double[] {1D, 2D, 4.5D};
+
+		Boolean result = (Boolean)allFunction.evaluate(
+			"eval(#value#,1,10)", parameters);
+
+		Assert.assertTrue(result);
+	}
+
+	@Test(expected = IllegalArgumentException.class)
+	public void testIllegalArgument() throws Exception {
+		AllFunction allFunction = new AllFunction(
+			_ddmExpressionFactory, _ddmExpressionFunctionRegister);
+
+		allFunction.evaluate();
+	}
+
+	@Test(expected = IllegalArgumentException.class)
+	public void testIllegalArgument2() throws Exception {
+		AllFunction allFunction = new AllFunction(
+			_ddmExpressionFactory, _ddmExpressionFunctionRegister);
+
+		allFunction.evaluate(null);
+	}
+
+	private final DDMExpressionFactory _ddmExpressionFactory =
+		new DDMExpressionFactoryImpl();
+	private final DDMExpressionFunctionRegister _ddmExpressionFunctionRegister =
+		new DDMExpressionFunctionRegister();
+
+	private static class EvalFunction implements DDMExpressionFunction {
+
+		@Override
+		public Object evaluate(Object... parameters) {
+			Double parameter0 = (Double)parameters[0];
+			Double parameter1 = (Double)parameters[1];
+			Double parameter2 = (Double)parameters[2];
+
+			return parameter0 >= parameter1 && parameter0 <= parameter2;
+		}
+
+	}
+
+}
\ No newline at end of file

From a7d8bffa0ea36615c31dd7035b2a540641879f1d Mon Sep 17 00:00:00 2001
From: Diogo Moreira Lins <diogo.moreira@liferay.com>
Date: Fri, 24 Mar 2017 16:30:15 -0300
Subject: [PATCH 33/46] LPS-71488 Remove a badge after click in an item list

---
 .../META-INF/resources/select_field.js        | 31 +++++++++++++------
 1 file changed, 22 insertions(+), 9 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select_field.js b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select_field.js
index 7b7e0bca66a2b..14e9fd1517e4a 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select_field.js
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/main/resources/META-INF/resources/select_field.js
@@ -336,15 +336,9 @@ AUI.add(
 					_handleBadgeItemCloseClick: function(target) {
 						var instance = this;
 
-						var values = instance.get('value');
-
 						var value = target.getAttribute('data-badge-value');
 
-						var index = values.indexOf(value);
-
-						if (index >= 0) {
-							values.splice(index, 1);
-						}
+						var values = instance._removeBadge(value);
 
 						instance.setValue(values);
 					},
@@ -383,8 +377,13 @@ AUI.add(
 
 							instance._open = true;
 
-							if (!currentTarget.getAttribute('data-option-selected')) {
-								value.push(currentTarget.getAttribute('data-option-value'));
+							var itemValue = currentTarget.getAttribute('data-option-value');
+
+							if (currentTarget.getAttribute('data-option-selected')) {
+								instance._removeBadge(itemValue);
+							}
+							else {
+								value.push(itemValue);
 							}
 						}
 						else {
@@ -448,6 +447,20 @@ AUI.add(
 						return !openList;
 					},
 
+					_removeBadge: function(value) {
+						var instance = this;
+
+						var values = instance.get('value');
+
+						var index = values.indexOf(value);
+
+						if (index >= 0) {
+							values.splice(index, 1);
+						}
+
+						return values;
+					},
+
 					_selectDOMOption: function(optionNode, value) {
 						var selected = false;
 

From 5c2b8cf822d3926692dbc100cc98f0e1a836fe48 Mon Sep 17 00:00:00 2001
From: Diogo Moreira Lins <diogo.moreira@liferay.com>
Date: Fri, 24 Mar 2017 16:30:39 -0300
Subject: [PATCH 34/46] LPS-71488 Add unit test

---
 .../src/test/testJS/select_field.js           | 44 +++++++++++++++++++
 1 file changed, 44 insertions(+)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/test/testJS/select_field.js b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/test/testJS/select_field.js
index 057cde47a5e62..2410b7d3111fa 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/test/testJS/select_field.js
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/src/test/testJS/select_field.js
@@ -361,6 +361,48 @@ describe(
 						assert.equal(selectField.getValue(), 'foo');
 					}
 				);
+
+				it(
+					'should remove badge item if click in an item already selected',
+					function(done) {
+						selectField = createSelectField(
+							{
+								multiple: true,
+								options: [{label: 'foo', value: 'foo'}, {label: 'bar', value: 'bar'}]
+							}
+						);
+
+						var container = selectField.get('container');
+
+						container.one('.form-builder-select-field').simulate('click');
+
+						var item = container.one('.form-builder-select-field').one('.drop-chosen ul li');
+
+						assert.isNull(container.one('.trigger-badge-item-close'));
+
+						item.simulate('click');
+
+						window.setTimeout(
+							function() {
+								assert.isNotNull(container.one('.trigger-badge-item-close'));
+
+								item = container.one('.form-builder-select-field').one('.drop-chosen ul li');
+
+								item.simulate('click');
+
+								window.setTimeout(
+									function() {
+										assert.isNull(container.one('.trigger-badge-item-close'));
+
+										done();
+									},
+									600
+								);
+							},
+							600
+						);
+					}
+				);
 			}
 		);
 
@@ -387,6 +429,8 @@ describe(
 
 						window.setTimeout(
 							function() {
+								assert.equal(selectField.get('value').length, 1);
+
 								container.one('.trigger-badge-item-close').simulate('click');
 
 								assert.equal(selectField.get('value').length, 0);

From e1caacd43a9e53370db9988c2aea1007f164a997 Mon Sep 17 00:00:00 2001
From: Andrea Di Giorgi <andrea.digiorgi@liferay.com>
Date: Fri, 24 Mar 2017 11:43:07 -0700
Subject: [PATCH 35/46] LPS-71473 Prevent "configJSModules" task from finding
 .soy.js files

---
 .../dynamic-data-mapping-type-captcha/build.gradle            | 4 ++++
 .../dynamic-data-mapping-type-checkbox-multiple/build.gradle  | 4 ++++
 .../dynamic-data-mapping-type-checkbox/build.gradle           | 4 ++++
 .../dynamic-data-mapping-type-date/build.gradle               | 4 ++++
 .../dynamic-data-mapping-type-editor/build.gradle             | 4 ++++
 .../dynamic-data-mapping-type-fieldset/build.gradle           | 4 ++++
 .../dynamic-data-mapping-type-grid/build.gradle               | 2 +-
 .../dynamic-data-mapping-type-key-value/build.gradle          | 4 ++++
 .../dynamic-data-mapping-type-numeric/build.gradle            | 4 ++++
 .../dynamic-data-mapping-type-options/build.gradle            | 4 ++++
 .../dynamic-data-mapping-type-paragraph/build.gradle          | 4 ++++
 .../dynamic-data-mapping-type-radio/build.gradle              | 4 ++++
 .../dynamic-data-mapping-type-select/build.gradle             | 2 +-
 .../dynamic-data-mapping-type-text/build.gradle               | 4 ++++
 .../dynamic-data-mapping-type-validation/build.gradle         | 4 ++++
 15 files changed, 54 insertions(+), 2 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-captcha/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-captcha/build.gradle
index cf175489cffd8..7372858228bff 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-captcha/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-captcha/build.gradle
@@ -1,3 +1,7 @@
+configJSModules {
+	includes = ["**/*.es.js*"]
+}
+
 dependencies {
 	provided group: "com.liferay", name: "com.liferay.captcha.taglib", version: "1.0.0"
 	provided group: "com.liferay", name: "com.liferay.dynamic.data.mapping.api", version: "3.0.0"
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-checkbox-multiple/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-checkbox-multiple/build.gradle
index e01bdafccf63e..8ce12eb9c7663 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-checkbox-multiple/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-checkbox-multiple/build.gradle
@@ -1,5 +1,9 @@
 apply plugin: "com.liferay.lang.merger"
 
+configJSModules {
+	includes = ["**/*.es.js*"]
+}
+
 dependencies {
 	provided group: "com.liferay.portal", name: "com.liferay.portal.kernel", version: "2.0.0"
 	provided group: "javax.portlet", name: "portlet-api", version: "2.0"
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-checkbox/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-checkbox/build.gradle
index e4c4c34cfd890..f91a4d44ba458 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-checkbox/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-checkbox/build.gradle
@@ -1,3 +1,7 @@
+configJSModules {
+	includes = ["**/*.es.js*"]
+}
+
 dependencies {
 	provided group: "com.liferay.portal", name: "com.liferay.portal.kernel", version: "2.0.0"
 	provided group: "javax.portlet", name: "portlet-api", version: "2.0"
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-date/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-date/build.gradle
index c101b2c161000..35387f1a6209b 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-date/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-date/build.gradle
@@ -1,3 +1,7 @@
+configJSModules {
+	includes = ["**/*.es.js*"]
+}
+
 dependencies {
 	provided group: "com.liferay.portal", name: "com.liferay.portal.kernel", version: "2.0.0"
 	provided group: "org.osgi", name: "org.osgi.service.component.annotations", version: "1.3.0"
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-editor/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-editor/build.gradle
index a61ca70113075..0d723a7a1d3c5 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-editor/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-editor/build.gradle
@@ -1,3 +1,7 @@
+configJSModules {
+	includes = ["**/*.es.js*"]
+}
+
 dependencies {
 	provided group: "com.liferay", name: "com.liferay.dynamic.data.mapping.api", version: "3.2.0"
 	provided group: "com.liferay.portal", name: "com.liferay.portal.kernel", version: "2.0.0"
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-fieldset/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-fieldset/build.gradle
index fa744a1bc870b..6a7cadb2003a3 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-fieldset/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-fieldset/build.gradle
@@ -1,5 +1,9 @@
 apply plugin: "com.liferay.lang.merger"
 
+configJSModules {
+	includes = ["**/*.es.js*"]
+}
+
 dependencies {
 	provided group: "com.liferay", name: "com.liferay.dynamic.data.mapping.io", version: "2.0.0"
 	provided group: "com.liferay.portal", name: "com.liferay.portal.kernel", version: "2.0.0"
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-grid/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-grid/build.gradle
index e1fb899918e1a..a08a7de968a45 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-grid/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-grid/build.gradle
@@ -2,7 +2,7 @@ sourceCompatibility = "1.8"
 targetCompatibility = "1.8"
 
 configJSModules {
-	enabled = false
+	includes = ["**/*.es.js*"]
 }
 
 apply plugin: "com.liferay.gulp"
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-key-value/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-key-value/build.gradle
index 1cb8802126278..bb497d29fc5d0 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-key-value/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-key-value/build.gradle
@@ -1,3 +1,7 @@
+configJSModules {
+	includes = ["**/*.es.js*"]
+}
+
 dependencies {
 	provided group: "com.liferay", name: "com.liferay.dynamic.data.mapping.type.text", version: "2.0.0"
 	provided group: "com.liferay.portal", name: "com.liferay.portal.kernel", version: "2.0.0"
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-numeric/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-numeric/build.gradle
index fe7278857e552..f22ca910fde3e 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-numeric/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-numeric/build.gradle
@@ -3,6 +3,10 @@ targetCompatibility = "1.8"
 
 apply plugin: "com.liferay.lang.merger"
 
+configJSModules {
+	includes = ["**/*.es.js*"]
+}
+
 dependencies {
 	provided group: "com.liferay", name: "com.liferay.dynamic.data.mapping.io", version: "2.0.0"
 	provided group: "com.liferay.portal", name: "com.liferay.portal.kernel", version: "2.0.0"
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-options/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-options/build.gradle
index 84d1daec0653c..a65b0adcc80dc 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-options/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-options/build.gradle
@@ -1,5 +1,9 @@
 apply plugin: "com.liferay.gulp"
 
+configJSModules {
+	includes = ["**/*.es.js*"]
+}
+
 dependencies {
 	provided group: "com.liferay", name: "com.liferay.dynamic.data.mapping.api", version: "3.0.0"
 	provided group: "com.liferay.portal", name: "com.liferay.portal.impl", version: "2.0.0"
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-paragraph/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-paragraph/build.gradle
index 06b235cfcee87..dbb2fc49816b3 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-paragraph/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-paragraph/build.gradle
@@ -1,3 +1,7 @@
+configJSModules {
+	includes = ["**/*.es.js*"]
+}
+
 dependencies {
 	provided group: "com.liferay.portal", name: "com.liferay.portal.kernel", version: "2.0.0"
 	provided group: "org.osgi", name: "org.osgi.service.component.annotations", version: "1.3.0"
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-radio/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-radio/build.gradle
index 3a75cfa132a90..778bf67c1fa62 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-radio/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-radio/build.gradle
@@ -1,5 +1,9 @@
 apply plugin: "com.liferay.lang.merger"
 
+configJSModules {
+	includes = ["**/*.es.js*"]
+}
+
 dependencies {
 	provided group: "com.liferay.portal", name: "com.liferay.portal.impl", version: "2.0.0"
 	provided group: "com.liferay.portal", name: "com.liferay.portal.kernel", version: "2.0.0"
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/build.gradle
index 271ea2a2cf056..f69f0f3e3b92f 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/build.gradle
@@ -1,5 +1,5 @@
 configJSModules {
-	enabled = false
+	includes = ["**/*.es.js*"]
 }
 
 apply plugin: "com.liferay.gulp"
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-text/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-text/build.gradle
index 27331bfa32f0b..61ec3cb211c94 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-text/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-text/build.gradle
@@ -1,5 +1,9 @@
 apply plugin: "com.liferay.lang.merger"
 
+configJSModules {
+	includes = ["**/*.es.js*"]
+}
+
 dependencies {
 	provided group: "com.liferay", name: "com.liferay.dynamic.data.mapping.io", version: "2.0.0"
 	provided group: "com.liferay.portal", name: "com.liferay.portal.kernel", version: "2.0.0"
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-validation/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-validation/build.gradle
index 964b35e1e15ae..6f7395d432b8f 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-validation/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-validation/build.gradle
@@ -1,3 +1,7 @@
+configJSModules {
+	includes = ["**/*.es.js*"]
+}
+
 dependencies {
 	provided group: "com.liferay", name: "com.liferay.dynamic.data.mapping.api", version: "3.0.0"
 	provided group: "com.liferay.portal", name: "com.liferay.portal.kernel", version: "2.0.0"

From d589f9c9591e1e0194f7be7895c4857f37611587 Mon Sep 17 00:00:00 2001
From: Andrea Di Giorgi <andrea.digiorgi@liferay.com>
Date: Fri, 24 Mar 2017 13:43:36 -0700
Subject: [PATCH 36/46] LPS-71473 SF

---
 .../dynamic-data-mapping-type-grid/build.gradle             | 6 +++---
 .../dynamic-data-mapping-type-select/build.gradle           | 6 +++---
 2 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-grid/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-grid/build.gradle
index a08a7de968a45..fb86a1ca88b40 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-grid/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-grid/build.gradle
@@ -1,13 +1,13 @@
 sourceCompatibility = "1.8"
 targetCompatibility = "1.8"
 
+apply plugin: "com.liferay.gulp"
+apply plugin: "com.liferay.lang.merger"
+
 configJSModules {
 	includes = ["**/*.es.js*"]
 }
 
-apply plugin: "com.liferay.gulp"
-apply plugin: "com.liferay.lang.merger"
-
 dependencies {
 	provided group: "com.liferay.portal", name: "com.liferay.portal.impl", version: "2.0.0"
 	provided group: "com.liferay.portal", name: "com.liferay.portal.kernel", version: "2.0.0"
diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/build.gradle
index f69f0f3e3b92f..920369865b106 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/build.gradle
@@ -1,10 +1,10 @@
+apply plugin: "com.liferay.gulp"
+apply plugin: "com.liferay.lang.merger"
+
 configJSModules {
 	includes = ["**/*.es.js*"]
 }
 
-apply plugin: "com.liferay.gulp"
-apply plugin: "com.liferay.lang.merger"
-
 dependencies {
 	provided group: "com.liferay", name: "com.liferay.dynamic.data.mapping.io", version: "2.0.0"
 	provided group: "com.liferay.portal", name: "com.liferay.portal.kernel", version: "2.0.0"

From 2f17cf0794f848e494c8050e6c88afeea0733bfd Mon Sep 17 00:00:00 2001
From: Andrea Di Giorgi <andrea.digiorgi@liferay.com>
Date: Fri, 24 Mar 2017 13:49:18 -0700
Subject: [PATCH 37/46] LPS-71152 SF

---
 .../dynamic-data-mapping-type-grid/build.gradle             | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-grid/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-grid/build.gradle
index fb86a1ca88b40..9c7a3a5cc5d4e 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-grid/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-grid/build.gradle
@@ -1,9 +1,9 @@
-sourceCompatibility = "1.8"
-targetCompatibility = "1.8"
-
 apply plugin: "com.liferay.gulp"
 apply plugin: "com.liferay.lang.merger"
 
+sourceCompatibility = "1.8"
+targetCompatibility = "1.8"
+
 configJSModules {
 	includes = ["**/*.es.js*"]
 }

From 5efea153a45b771f89b7fef00388a141e6e7aeab Mon Sep 17 00:00:00 2001
From: Andrea Di Giorgi <andrea.digiorgi@liferay.com>
Date: Fri, 24 Mar 2017 13:49:28 -0700
Subject: [PATCH 38/46] LPS-71173 SF

---
 .../dynamic-data-mapping-type-numeric/build.gradle            | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-numeric/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-numeric/build.gradle
index f22ca910fde3e..ece51b4ae82af 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-numeric/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-numeric/build.gradle
@@ -1,8 +1,8 @@
+apply plugin: "com.liferay.lang.merger"
+
 sourceCompatibility = "1.8"
 targetCompatibility = "1.8"
 
-apply plugin: "com.liferay.lang.merger"
-
 configJSModules {
 	includes = ["**/*.es.js*"]
 }

From 0e3ceda2d2a2afd0d89c5f53e60b05eca5a0ccd0 Mon Sep 17 00:00:00 2001
From: Andrea Di Giorgi <andrea.digiorgi@liferay.com>
Date: Fri, 24 Mar 2017 13:49:42 -0700
Subject: [PATCH 39/46] LPS-66472 SF

---
 .../dynamic-data-mapping-expression/build.gradle            | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-expression/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-expression/build.gradle
index ff19070ccf415..295834aafd6ad 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-expression/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-expression/build.gradle
@@ -1,12 +1,12 @@
-sourceCompatibility = "1.8"
-targetCompatibility = "1.8"
-
 import com.liferay.gradle.util.FileUtil
 
 import org.apache.tools.ant.filters.FixCrLfFilter
 
 apply plugin: 'antlr'
 
+sourceCompatibility = "1.8"
+targetCompatibility = "1.8"
+
 String parserDirName = "com/liferay/dynamic/data/mapping/expression/internal/parser"
 
 cleanGenerateGrammarSource {

From d00e1dfa04e4c29d30ef87ea7fa861e7fbcbda5e Mon Sep 17 00:00:00 2001
From: Andrea Di Giorgi <andrea.digiorgi@liferay.com>
Date: Fri, 24 Mar 2017 13:50:03 -0700
Subject: [PATCH 40/46] LPS-70642 SF

---
 .../dynamic-data-mapping-form-renderer/build.gradle           | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/build.gradle
index fb437a232edd3..70acacda297f1 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-form-renderer/build.gradle
@@ -1,8 +1,8 @@
+apply plugin: "com.liferay.lang.merger"
+
 sourceCompatibility = "1.8"
 targetCompatibility = "1.8"
 
-apply plugin: "com.liferay.lang.merger"
-
 dependencies {
 	provided group: "biz.aQute.bnd", name: "biz.aQute.bndlib", version: "3.1.0"
 	provided group: "com.liferay", name: "com.liferay.dynamic.data.mapping.io", version: "2.0.0"

From 7c1fd5320c8d5328baeb5ee24606e5555fadc8c1 Mon Sep 17 00:00:00 2001
From: Andrea Di Giorgi <andrea.digiorgi@liferay.com>
Date: Fri, 24 Mar 2017 13:51:58 -0700
Subject: [PATCH 41/46] LPS-69775 SF

---
 .../dynamic-data-mapping-type-grid/build.gradle      | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-grid/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-grid/build.gradle
index 9c7a3a5cc5d4e..db67efaee176f 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-grid/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-grid/build.gradle
@@ -1,6 +1,8 @@
 apply plugin: "com.liferay.gulp"
 apply plugin: "com.liferay.lang.merger"
 
+task testJS
+
 sourceCompatibility = "1.8"
 targetCompatibility = "1.8"
 
@@ -18,12 +20,6 @@ dependencies {
 	provided project(":apps:forms-and-workflow:dynamic-data-mapping:dynamic-data-mapping-form-field-type")
 }
 
-task testJS
-
-testJS {
-	dependsOn gulpTest
-}
-
 mergeLang {
 	sourceDirs = [
 		"../dynamic-data-mapping-lang/src/main/resources/content",
@@ -31,6 +27,10 @@ mergeLang {
 	]
 }
 
+testJS {
+	dependsOn gulpTest
+}
+
 transpileJS {
 	soySrcIncludes = ""
 	srcIncludes = "**/*.es.js"

From 4c93a5a7dd46e276cb47f54f49c88fea3427d972 Mon Sep 17 00:00:00 2001
From: Andrea Di Giorgi <andrea.digiorgi@liferay.com>
Date: Fri, 24 Mar 2017 13:52:07 -0700
Subject: [PATCH 42/46] LPS-70570 SF

---
 .../dynamic-data-mapping-type-options/build.gradle            | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-options/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-options/build.gradle
index a65b0adcc80dc..3effc123abd6c 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-options/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-options/build.gradle
@@ -1,5 +1,7 @@
 apply plugin: "com.liferay.gulp"
 
+task testJS
+
 configJSModules {
 	includes = ["**/*.es.js*"]
 }
@@ -12,8 +14,6 @@ dependencies {
 	provided project(":apps:forms-and-workflow:dynamic-data-mapping:dynamic-data-mapping-form-field-type")
 }
 
-task testJS
-
 testJS {
 	dependsOn gulpTest
 }

From c3efb48ef7e9b1f481284f4d3dbffb97d360281a Mon Sep 17 00:00:00 2001
From: Andrea Di Giorgi <andrea.digiorgi@liferay.com>
Date: Fri, 24 Mar 2017 13:52:43 -0700
Subject: [PATCH 43/46] LPS-69587 SF

---
 .../dynamic-data-mapping-type-select/build.gradle             | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/build.gradle b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/build.gradle
index 920369865b106..aab0a07fe8297 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/build.gradle
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/dynamic-data-mapping-type-select/build.gradle
@@ -1,6 +1,8 @@
 apply plugin: "com.liferay.gulp"
 apply plugin: "com.liferay.lang.merger"
 
+task testJS
+
 configJSModules {
 	includes = ["**/*.es.js*"]
 }
@@ -15,8 +17,6 @@ dependencies {
 	provided project(":apps:forms-and-workflow:dynamic-data-mapping:dynamic-data-mapping-form-field-type")
 }
 
-task testJS
-
 testJS {
 	dependsOn gulpTest
 }

From 2ccdc0b081b69399e856f5c663b74f60981f3f9a Mon Sep 17 00:00:00 2001
From: Liferay Continuous Integration <continuous-integration@liferay.com>
Date: Sat, 25 Mar 2017 15:33:06 -0700
Subject: [PATCH 44/46] subrepo:ignore Update
 'modules/apps/forms-and-workflow/dynamic-data-mapping/.gitrepo'.

---
 modules/apps/forms-and-workflow/dynamic-data-mapping/.gitrepo | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/modules/apps/forms-and-workflow/dynamic-data-mapping/.gitrepo b/modules/apps/forms-and-workflow/dynamic-data-mapping/.gitrepo
index dee90b9bb7f22..a423fd3fe6189 100644
--- a/modules/apps/forms-and-workflow/dynamic-data-mapping/.gitrepo
+++ b/modules/apps/forms-and-workflow/dynamic-data-mapping/.gitrepo
@@ -4,8 +4,8 @@
 [subrepo]
 	autopull = false
 	cmdver = liferay
-	commit = 896b92ee5d971ac06cb631a1059972144b327724
+	commit = 970b7d2a503e251c1bbdca4f1a3c4729c5a24817
 	mergebuttonmergecommits = false
 	mode = pull
-	parent = 0fdb15c987d41f05def85e9aae8e56cf9ca45e63
+	parent = 97f4ccb4e2cf91911b40b9d3832fad6611ff597e
 	remote = git@github.com:liferay/com-liferay-dynamic-data-mapping.git
\ No newline at end of file

From 05c4e031b9700c158e26c90eb98cd915efeae450 Mon Sep 17 00:00:00 2001
From: daviddotzhang <“daviddotzhang@liferay.com”>
Date: Fri, 17 Mar 2017 10:56:22 +0700
Subject: [PATCH 45/46] LPS-71270 - XSS in URL when sorted the bookmark

---
 .../resources/META-INF/resources/management_bar_filter/page.jsp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/modules/apps/foundation/frontend-taglib/frontend-taglib/src/main/resources/META-INF/resources/management_bar_filter/page.jsp b/modules/apps/foundation/frontend-taglib/frontend-taglib/src/main/resources/META-INF/resources/management_bar_filter/page.jsp
index e0a591de86723..2cff6b98a7f4d 100644
--- a/modules/apps/foundation/frontend-taglib/frontend-taglib/src/main/resources/META-INF/resources/management_bar_filter/page.jsp
+++ b/modules/apps/foundation/frontend-taglib/frontend-taglib/src/main/resources/META-INF/resources/management_bar_filter/page.jsp
@@ -31,7 +31,7 @@ String value = (String)request.getAttribute("liferay-frontend:management-bar-fil
 					<liferay-ui:message key="<%= label %>" />:
 				</c:if>
 
-				<liferay-ui:message key="<%= value %>" />
+				<liferay-ui:message key="<%= HtmlUtil.escape(value) %>" />
 			</span>
 
 			<aui:icon image="caret-double-l" markupView="lexicon" />

From 4c283f4baff537e744b557e396e37bfb5f272bc9 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Tom=C3=A1=C5=A1=20Pole=C5=A1ovsk=C3=BD?=
 <tomas.polesovsky@liferay.com>
Date: Mon, 27 Mar 2017 14:10:29 +0200
Subject: [PATCH 46/46] LPS-71270 Use only supported labels

---
 .../servlet/taglib/ManagementBarNavigationTag.java    | 11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)

diff --git a/modules/apps/foundation/frontend-taglib/frontend-taglib/src/main/java/com/liferay/frontend/taglib/servlet/taglib/ManagementBarNavigationTag.java b/modules/apps/foundation/frontend-taglib/frontend-taglib/src/main/java/com/liferay/frontend/taglib/servlet/taglib/ManagementBarNavigationTag.java
index 0951c8d8cc6d2..1f36ea6fb0a5f 100644
--- a/modules/apps/foundation/frontend-taglib/frontend-taglib/src/main/java/com/liferay/frontend/taglib/servlet/taglib/ManagementBarNavigationTag.java
+++ b/modules/apps/foundation/frontend-taglib/frontend-taglib/src/main/java/com/liferay/frontend/taglib/servlet/taglib/ManagementBarNavigationTag.java
@@ -137,9 +137,15 @@ protected void setAttributes(HttpServletRequest request) {
 
 			_portletURL.setParameter(_navigationParam, value);
 
+			boolean active = value.equals(navigationKey);
+
+			if (active && Validator.isNull(_label)) {
+				_label = label;
+			}
+
 			ManagementBarFilterItem managementBarFilterItem =
 				new ManagementBarFilterItem(
-					value.equals(navigationKey), label, _portletURL.toString());
+					active, label, _portletURL.toString());
 
 			_managementBarFilterItems.add(managementBarFilterItem);
 		}
@@ -153,8 +159,7 @@ protected void setAttributes(HttpServletRequest request) {
 			ManagementBarFilterItem managementBarFilterItem =
 				_managementBarFilterItems.get(0);
 
-			_label = ParamUtil.getString(
-				request, _navigationParam, managementBarFilterItem.getLabel());
+			_label = managementBarFilterItem.getLabel();
 		}
 
 		request.setAttribute(