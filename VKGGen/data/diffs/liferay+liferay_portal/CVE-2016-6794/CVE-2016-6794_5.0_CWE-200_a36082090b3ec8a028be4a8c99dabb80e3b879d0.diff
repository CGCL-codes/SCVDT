commit a36082090b3ec8a028be4a8c99dabb80e3b879d0
Author:     alee8888 <albert.lee@liferay.com>
AuthorDate: Tue Aug 22 15:59:45 2017 -0700
Commit:     Brian Chan <brian.chan@liferay.com>
CommitDate: Mon Apr 9 13:00:25 2018 -0700

    LPS-74171 WebappClassLoaderBase now imports PermissionCheck from tomcat-util.jar due to Apache CVE-2016-6794

diff --git a/.classpath b/.classpath
index cd00a1a2912a..958e9a7f94f0 100644
--- a/.classpath
+++ b/.classpath
@@ -110,6 +110,7 @@
 	<classpathentry kind="lib" path="lib/development/tlddoc.jar"/>
 	<classpathentry kind="lib" path="lib/development/tomcat-api.jar"/>
 	<classpathentry kind="lib" path="lib/development/tomcat-coyote.jar"/>
+	<classpathentry kind="lib" path="lib/development/tomcat-util.jar"/>
 	<classpathentry kind="lib" path="lib/development/velocity.jar"/>
 	<classpathentry kind="lib" path="lib/development/velocity-tools.jar"/>
 	<classpathentry kind="lib" path="lib/development/websocket-api.jar"/>
diff --git a/lib/.gitignore b/lib/.gitignore
index dd24dae3d0d3..be2d99cb5d44 100644
--- a/lib/.gitignore
+++ b/lib/.gitignore
@@ -73,6 +73,7 @@
 /development/tlddoc.jar
 /development/tomcat-api.jar
 /development/tomcat-coyote.jar
+/development/tomcat-util.jar
 /development/velocity.jar
 /development/velocity-tools.jar
 /development/websocket-api.jar
diff --git a/lib/development/dependencies.properties b/lib/development/dependencies.properties
index 473290deb475..89405f258a37 100644
--- a/lib/development/dependencies.properties
+++ b/lib/development/dependencies.properties
@@ -67,6 +67,7 @@ spring-test=org.springframework:spring-test:4.1.9.RELEASE
 tlddoc=taglibrarydoc:tlddoc:1.3
 tomcat-api=org.apache.tomcat:tomcat-api:9.0.6
 tomcat-coyote=org.apache.tomcat:tomcat-coyote:9.0.6
+tomcat-util=org.apache.tomcat:tomcat-util:9.0.6
 velocity-tools=velocity-tools:velocity-tools:1.4
 velocity=org.apache.velocity:velocity:1.6.4
 websocket-api=javax.websocket:javax.websocket-api:1.1
diff --git a/lib/versions-ext.xml b/lib/versions-ext.xml
index 59f5cf8b0ef3..169f2abd11b5 100644
--- a/lib/versions-ext.xml
+++ b/lib/versions-ext.xml
@@ -862,6 +862,18 @@
 					</license>
 				</licenses>
 			</library>
+			<library>
+				<file-name>lib/development/tomcat-util.jar</file-name>
+				<version>9.0.6</version>
+				<project-name>Tomcat</project-name>
+				<project-url>http://tomcat.apache.org</project-url>
+				<licenses>
+					<license>
+						<license-name>Apache License 2.0</license-name>
+						<license-url>http://www.apache.org/licenses/LICENSE-2.0</license-url>
+					</license>
+				</licenses>
+			</library>
 			<library>
 				<file-name>lib/development/velocity.jar</file-name>
 				<version>1.6.4</version>
diff --git a/nbproject/project.properties b/nbproject/project.properties
index 7a556fe26b53..2c8309aeb31c 100644
--- a/nbproject/project.properties
+++ b/nbproject/project.properties
@@ -75,6 +75,7 @@ javac.classpath=\
 	lib/development/tlddoc.jar:\
 	lib/development/tomcat-api.jar:\
 	lib/development/tomcat-coyote.jar:\
+	lib/development/tomcat-util.jar:\
 	lib/development/velocity.jar:\
 	lib/development/velocity-tools.jar:\
 	lib/development/websocket-api.jar:\
diff --git a/support-tomcat/build.xml b/support-tomcat/build.xml
index 26a43cdc31fe..34e4aaa882be 100644
--- a/support-tomcat/build.xml
+++ b/support-tomcat/build.xml
@@ -12,7 +12,7 @@
 	<path id="web-lib.classpath">
 		<fileset
 			dir="${project.dir}/lib/development"
-			includes="catalina.jar,jasper.jar,tomcat-api.jar,tomcat-coyote.jar"
+			includes="catalina.jar,jasper.jar,tomcat-api.jar,tomcat-coyote.jar,tomcat-util.jar"
 		/>
 		<fileset
 			dir="${project.dir}/lib/portal"
