commit dac5d0b662aa8f500d4a4036706904b63b3f647f
Author:     alee8888 <albert.lee@liferay.com>
AuthorDate: Tue Aug 22 15:59:45 2017 -0700
Commit:     Brian Chan <brian.chan@liferay.com>
CommitDate: Wed Sep 6 13:13:20 2017 -0700

    LPS-74171 WebappClassLoaderBase now imports PermissionCheck from tomcat-util.jar due to Apache CVE-2016-6794

diff --git a/.classpath b/.classpath
index 63024970df5d..7cc169bbc2f7 100644
--- a/.classpath
+++ b/.classpath
@@ -94,6 +94,7 @@
 	<classpathentry kind="lib" path="lib/development/tlddoc.jar"/>
 	<classpathentry kind="lib" path="lib/development/tomcat-api.jar"/>
 	<classpathentry kind="lib" path="lib/development/tomcat-coyote.jar"/>
+	<classpathentry kind="lib" path="lib/development/tomcat-util.jar"/>
 	<classpathentry kind="lib" path="lib/development/velocity.jar"/>
 	<classpathentry kind="lib" path="lib/development/velocity-tools.jar"/>
 	<classpathentry kind="lib" path="lib/development/websocket-api.jar"/>
diff --git a/lib/.gitignore b/lib/.gitignore
index 0db6699654af..f07de2fedbb9 100644
--- a/lib/.gitignore
+++ b/lib/.gitignore
@@ -71,6 +71,7 @@
 /development/tlddoc.jar
 /development/tomcat-api.jar
 /development/tomcat-coyote.jar
+/development/tomcat-util.jar
 /development/velocity.jar
 /development/velocity-tools.jar
 /development/websocket-api.jar
diff --git a/lib/development/dependencies.properties b/lib/development/dependencies.properties
index c85d76f38b98..90e3327e7204 100644
--- a/lib/development/dependencies.properties
+++ b/lib/development/dependencies.properties
@@ -65,6 +65,7 @@ spring-test=org.springframework:spring-test:4.1.9.RELEASE
 tlddoc=taglibrarydoc:tlddoc:1.3
 tomcat-api=org.apache.tomcat:tomcat-api:8.5.20
 tomcat-coyote=org.apache.tomcat:tomcat-coyote:8.5.20
+tomcat-util=org.apache.tomcat:tomcat-util:8.5.20
 velocity-tools=velocity-tools:velocity-tools:1.4
 velocity=org.apache.velocity:velocity:1.6.4
 websocket-api=javax.websocket:javax.websocket-api:1.1
diff --git a/lib/versions-ext.xml b/lib/versions-ext.xml
index 6f2a3beeac84..5bf83cbf011c 100644
--- a/lib/versions-ext.xml
+++ b/lib/versions-ext.xml
@@ -839,6 +839,18 @@
 					</license>
 				</licenses>
 			</library>
+			<library>
+				<file-name>lib/development/tomcat-util.jar</file-name>
+				<version>8.5.20</version>
+				<project-name>Tomcat</project-name>
+				<project-url>http://tomcat.apache.org</project-url>
+				<licenses>
+					<license>
+						<license-name>Apache License 2.0</license-name>
+						<license-url>http://www.apache.org/licenses/LICENSE-2.0</license-url>
+					</license>
+				</licenses>
+			</library>
 			<library>
 				<file-name>lib/development/velocity.jar</file-name>
 				<version>1.6.4</version>
diff --git a/nbproject/project.properties b/nbproject/project.properties
index 420f836e2f06..fc27b474a6e2 100644
--- a/nbproject/project.properties
+++ b/nbproject/project.properties
@@ -74,6 +74,7 @@ javac.classpath=\
 	lib/development/tlddoc.jar:\
 	lib/development/tomcat-api.jar:\
 	lib/development/tomcat-coyote.jar:\
+	lib/development/tomcat-util.jar:\
 	lib/development/velocity.jar:\
 	lib/development/velocity-tools.jar:\
 	lib/development/websocket-api.jar:\
diff --git a/support-tomcat/build.xml b/support-tomcat/build.xml
index 3ec416ab462e..29bd80450fb1 100644
--- a/support-tomcat/build.xml
+++ b/support-tomcat/build.xml
@@ -9,7 +9,7 @@
 	<property name="javac.classpathref" value="web.classpath" />
 
 	<path id="web-lib.classpath">
-		<fileset dir="${project.dir}/lib/development" includes="catalina.jar,jasper.jar,tomcat-api.jar,tomcat-coyote.jar" />
+		<fileset dir="${project.dir}/lib/development" includes="catalina.jar,jasper.jar,tomcat-api.jar,tomcat-coyote.jar,tomcat-util.jar" />
 		<fileset dir="${project.dir}/lib/portal" includes="tomcat-juli.jar" />
 	</path>
 </project>
\ No newline at end of file
