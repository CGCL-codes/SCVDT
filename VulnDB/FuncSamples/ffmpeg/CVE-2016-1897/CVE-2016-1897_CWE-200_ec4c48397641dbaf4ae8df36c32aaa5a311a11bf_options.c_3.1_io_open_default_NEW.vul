static int io_open_default(AVFormatContext *s, AVIOContext **pb,
                           const char *url, int flags, AVDictionary **options)
{
    AVDictionary *opts_local = NULL;
    int ret;

    if (!options)
        options = &opts_local;

    if (s->protocol_whitelist) {
        ret = av_dict_set(options, "protocol_whitelist", s->protocol_whitelist, 0);
        if (ret < 0)
            goto finish;
    }
    if (s->protocol_blacklist) {
        ret = av_dict_set(options, "protocol_blacklist", s->protocol_blacklist, 0);
        if (ret < 0)
            goto finish;
    }
    ret = avio_open2(pb, url, flags, &s->interrupt_callback, options);
finish:
    av_dict_free(&opts_local);
    return ret;
}
