long __sys_sendmsg_sock(struct socket *sock, struct user_msghdr __user *umsg,
			unsigned int flags)
{
	struct iovec iovstack[UIO_FASTIOV], *iov = iovstack;
	struct sockaddr_storage address;
	struct msghdr msg = { .msg_name = &address };
	ssize_t err;

	err = sendmsg_copy_msghdr(&msg, umsg, flags, &iov);
	if (err)
		return err;
	/* disallow ancillary data requests from this path */
	if (msg.msg_control || msg.msg_controllen) {
		err = -EINVAL;
		goto out;
	}

	err = ____sys_sendmsg(sock, &msg, flags, NULL, 0);
out:
	kfree(iov);
	return err;
}
