int rmff_dump_header(rmff_header_t *h, char *buffer, int max) {

  int written=0;
  rmff_mdpr_t **stream=h->streams;

  rmff_dump_fileheader(h->fileheader, &buffer[written]);
  written+=h->fileheader->size;
  rmff_dump_prop(h->prop, &buffer[written]);
  written+=h->prop->size;
  rmff_dump_cont(h->cont, &buffer[written]);
  written+=h->cont->size;
  if (stream)
  {
    while(*stream)
    {
      rmff_dump_mdpr(*stream, &buffer[written]);
      written+=(*stream)->size;
      stream++;
    }
  }

  rmff_dump_dataheader(h->data, &buffer[written]);
  written+=18;

  return written;
}
