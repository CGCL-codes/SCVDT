static void
chunk_dealloc(void *chunk, size_t size, enum ChunkType type)
{

	MOZ_ASSERT(chunk);
	MOZ_ASSERT(CHUNK_ADDR2BASE(chunk) == chunk);
	MOZ_ASSERT(size != 0);
	MOZ_ASSERT((size & chunksize_mask) == 0);

	malloc_rtree_set(chunk_rtree, (uintptr_t)chunk, nullptr);

	if (chunk_dalloc_mmap(chunk, size))
		chunk_record(&chunks_szad_mmap, &chunks_ad_mmap, chunk, size, type);
}
