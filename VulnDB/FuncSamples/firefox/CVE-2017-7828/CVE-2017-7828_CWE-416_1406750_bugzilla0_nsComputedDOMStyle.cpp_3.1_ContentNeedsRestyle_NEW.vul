static bool
ContentNeedsRestyle(nsIContent* aContent)
{
  MOZ_ASSERT(aContent);
  nsIContent* node = aContent;
  while (node) {
    if (node->IsElement()) {
      MOZ_ASSERT(!node->IsGeneratedContentContainerForAfter() &&
                 !node->IsGeneratedContentContainerForBefore());
      if (EffectSet::GetEffectSet(node->AsElement(),
                                  CSSPseudoElementType::NotPseudo)) {
        return true;
      }
    }

    // Check if the element has any flag for restyling. For Gecko, we also need
    // another flag to know if there is any child has LaterSiblings restyle
    // hint.
    if (node->HasFlag(ELEMENT_ALL_RESTYLE_FLAGS |
                      ELEMENT_HAS_CHILD_WITH_LATER_SIBLINGS_HINT)) {
      return true;
    }
    node = node->GetFlattenedTreeParent();
  }
  return false;
}
