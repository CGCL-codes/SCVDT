  ~AutoFailConsumeBody()
  {
    AssertIsOnMainThread();

    if (mBodyWrapper) {
      if (mBodyWrapper->Body()->mWorkerPrivate) {
        RefPtr<FailConsumeBodyWorkerRunnable<Derived>> r =
          new FailConsumeBodyWorkerRunnable<Derived>(mBodyWrapper);
        if (!r->Dispatch()) {
          MOZ_CRASH("We are going to leak");
        }
      } else {
        mBodyWrapper->Body()->ContinueConsumeBody(mBodyWrapper,
                                                  NS_ERROR_FAILURE, 0,
                                                  nullptr);
      }
    }
  }
