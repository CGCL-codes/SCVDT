bool
ServiceWorkerVisible(JSContext* aCx, JSObject* aObj)
{
  if (NS_IsMainThread()) {
    return Preferences::GetBool("dom.serviceWorkers.enabled", false);
  }

  ServiceWorkerGlobalScope* scope = nullptr;
  nsresult rv = UNWRAP_OBJECT(ServiceWorkerGlobalScope, aObj, scope);
  return NS_SUCCEEDED(rv);
}
