static void*
ContextToFP(EMULATOR_CONTEXT* context)
{
# if defined(__x86_64__)
    return (void*)context->thread.__rbp;
# elif defined(__i386__)
    return (void*)context->thread.uts.ts32.__ebp;
# elif defined(__arm__)
    return (void*)context->thread.__fp;
# else
#  error Unsupported architecture
# endif
}
