SkTypeface* SkCreateTypefaceFromCairoFTFontWithFontconfig(cairo_scaled_font_t* scaledFont, FcPattern* pattern)
{
    cairo_font_face_t* fontFace = cairo_scaled_font_get_font_face(scaledFont);
    SkASSERT(cairo_font_face_status(fontFace) == CAIRO_STATUS_SUCCESS);
    SkASSERT(cairo_font_face_get_type(fontFace) == CAIRO_FONT_TYPE_FT);

    SkTypeface* typeface = SkTypefaceCache::FindByProcAndRef(FindByCairoFontFace, fontFace);
    if (!typeface) {
        typeface = new SkCairoFTTypeface(fontFace, pattern);
        SkTypefaceCache::Add(typeface);
    }

    return typeface;
}
