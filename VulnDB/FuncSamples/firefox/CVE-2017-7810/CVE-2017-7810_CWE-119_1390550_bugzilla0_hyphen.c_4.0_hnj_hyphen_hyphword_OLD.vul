void hnj_hyphen_hyphword(const char * word, int l, const char * hyphens, 
    char * hyphword, char *** rep, int ** pos, int ** cut)
{
  int hyphenslen = l + 5;

  int i, j;
  for (i = 0, j = 0; i < l; i++, j++) {
    if (hyphens[i]&1) {
      hyphword[j] = word[i];
      if (*rep && *pos && *cut && (*rep)[i]) {
        size_t offset = j - (*pos)[i] + 1;
        strncpy(hyphword + offset, (*rep)[i], hyphenslen - offset - 1);
        hyphword[hyphenslen-1] = '\0';
        j += strlen((*rep)[i]) - (*pos)[i];
        i += (*cut)[i] - (*pos)[i];
      } else hyphword[++j] = '=';
    } else hyphword[j] = word[i];
  }
  hyphword[j] = '\0';
}
