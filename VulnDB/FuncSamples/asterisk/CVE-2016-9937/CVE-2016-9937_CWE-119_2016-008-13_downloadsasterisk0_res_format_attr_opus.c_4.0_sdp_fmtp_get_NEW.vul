static void sdp_fmtp_get(const char *attributes, const char *name, int *attr)
{
	const char *kvp = attributes;
	int val;

	if (ast_strlen_zero(attributes)) {
		return;
	}

	/* This logic goes through each attribute in the fmtp line looking for the
	 * requested named attribute.
	 */
	while (*kvp) {
		/* Skip any preceeding blanks as some implementations separate attributes using spaces too */
		kvp = ast_skip_blanks(kvp);

		/* If we are at at the requested attribute get its value and return */
		if (!strncmp(kvp, name, strlen(name)) && kvp[strlen(name)] == '=') {
			if (sscanf(kvp, "%*[^=]=%30d", &val) == 1) {
				*attr = val;
				break;
			}
		}

		/* Move on to the next attribute if possible */
		kvp = strchr(kvp, ';');
		if (!kvp) {
			break;
		}

		kvp++;
	}
}
