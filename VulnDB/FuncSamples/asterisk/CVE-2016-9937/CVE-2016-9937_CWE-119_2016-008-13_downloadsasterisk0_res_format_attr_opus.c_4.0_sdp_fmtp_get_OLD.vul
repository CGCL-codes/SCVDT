static void sdp_fmtp_get(const char *attributes, const char *name, int *attr)
{
	const char *kvp = "";
	int val;

	if (attributes && !(kvp = strstr(attributes, name))) {
		return;
	}

	/*
	 * If the named attribute is not at the start of the given attributes, and
	 * the preceding character is not a space or semicolon then it's not the
	 * attribute we are looking for. It's an attribute with the name embedded
	 * within it (e.g. ptime in maxptime, stereo in sprop-stereo).
	 */
	if (kvp != attributes && *(kvp - 1) != ' ' && *(kvp - 1) != ';') {
		/* Keep searching as it might still be in the attributes string */
		sdp_fmtp_get(strchr(kvp, ';'), name, attr);
	/*
	 * Otherwise it's a match, so retrieve the value and set the attribute.
	 */
	} else if (sscanf(kvp, "%*[^=]=%30d", &val) == 1) {
		*attr = val;
	}
}
