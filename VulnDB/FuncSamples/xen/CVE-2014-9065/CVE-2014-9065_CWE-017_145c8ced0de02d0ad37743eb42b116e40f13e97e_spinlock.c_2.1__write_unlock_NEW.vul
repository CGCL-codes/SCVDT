void _write_unlock(rwlock_t *lock)
{
    preempt_enable();
    if ( cmpxchg(&lock->lock, RW_WRITE_FLAG, 0) != RW_WRITE_FLAG )
        BUG();
}
