static int vmx_set_guest_pat(struct vcpu *v, u64 gpat)
{
    if ( !cpu_has_vmx_pat || !paging_mode_hap(v->domain) )
        return 0;

    vmx_vmcs_enter(v);
    __vmwrite(GUEST_PAT, gpat);
#ifdef __i386__
    __vmwrite(GUEST_PAT_HIGH, gpat >> 32);
#endif
    vmx_vmcs_exit(v);
    return 1;
}
