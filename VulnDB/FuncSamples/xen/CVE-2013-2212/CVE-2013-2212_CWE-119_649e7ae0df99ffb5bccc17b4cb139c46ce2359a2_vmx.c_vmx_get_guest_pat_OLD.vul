static int vmx_get_guest_pat(struct vcpu *v, u64 *gpat)
{
    if ( !cpu_has_vmx_pat || !paging_mode_hap(v->domain) )
        return 0;

    vmx_vmcs_enter(v);
    *gpat = __vmread(GUEST_PAT);
#ifdef __i386__
    *gpat |= (u64)__vmread(GUEST_PAT_HIGH) << 32;
#endif
    vmx_vmcs_exit(v);
    return 1;
}
