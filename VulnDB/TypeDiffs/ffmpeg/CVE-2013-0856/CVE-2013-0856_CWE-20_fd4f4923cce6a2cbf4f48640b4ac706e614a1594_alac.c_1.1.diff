diff --git a/libavcodec/alac.c b/libavcodec/alac.c
index 5653e9aff5d..f032ceb9cca 100644
--- a/libavcodec/alac.c
+++ b/libavcodec/alac.c
@@ -224,7 +224,7 @@ static void lpc_prediction(int32_t *error_buffer, int32_t *buffer_out,
     }
 
     /* read warm-up samples */
-    for (i = 1; i <= lpc_order; i++)
+    for (i = 1; i <= lpc_order && i < nb_samples; i++)
         buffer_out[i] = sign_extend(buffer_out[i - 1] + error_buffer[i], bps);
 
     /* NOTE: 4 and 8 are very common cases that could be optimized. */
