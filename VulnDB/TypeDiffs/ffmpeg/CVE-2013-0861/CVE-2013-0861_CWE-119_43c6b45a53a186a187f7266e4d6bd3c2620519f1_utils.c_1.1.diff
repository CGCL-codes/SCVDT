diff --git a/libavcodec/utils.c b/libavcodec/utils.c
index 8c0aa9818ef..12265a95ea2 100644
--- a/libavcodec/utils.c
+++ b/libavcodec/utils.c
@@ -1809,7 +1809,7 @@ int attribute_align_arg avcodec_decode_audio4(AVCodecContext *avctx,
      * extended_data are doing it correctly */
     if (*got_frame_ptr) {
         planar   = av_sample_fmt_is_planar(frame->format);
-        channels = av_get_channel_layout_nb_channels(frame->channel_layout);
+        channels = frame->channels;
         if (!(planar && channels > AV_NUM_DATA_POINTERS))
             frame->extended_data = frame->data;
     } else {
