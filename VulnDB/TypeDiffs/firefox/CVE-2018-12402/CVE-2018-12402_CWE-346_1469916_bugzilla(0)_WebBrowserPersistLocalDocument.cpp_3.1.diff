diff -r 5d23b6e0b74d -r 9a2b02fe351b dom/webbrowserpersist/WebBrowserPersistLocalDocument.cpp
--- a/dom/webbrowserpersist/WebBrowserPersistLocalDocument.cpp	Tue Jul 03 15:15:46 2018 -0400
+++ b/dom/webbrowserpersist/WebBrowserPersistLocalDocument.cpp	Fri Jun 22 15:41:39 2018 +0100
@@ -184,6 +184,14 @@
     return history->GetPostData(aStream);
 }
 
+NS_IMETHODIMP
+WebBrowserPersistLocalDocument::GetPrincipal(nsIPrincipal** aPrincipal)
+{
+  nsCOMPtr<nsIPrincipal> nodePrincipal = mDocument->NodePrincipal();
+  nodePrincipal.forget(aPrincipal);
+  return NS_OK;
+}
+
 already_AddRefed<nsISHEntry>
 WebBrowserPersistLocalDocument::GetHistory()
 {
