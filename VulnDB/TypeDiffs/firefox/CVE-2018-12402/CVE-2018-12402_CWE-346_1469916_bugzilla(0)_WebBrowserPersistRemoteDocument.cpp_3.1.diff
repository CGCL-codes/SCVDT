diff -r 5d23b6e0b74d -r 9a2b02fe351b dom/webbrowserpersist/WebBrowserPersistRemoteDocument.cpp
--- a/dom/webbrowserpersist/WebBrowserPersistRemoteDocument.cpp	Tue Jul 03 15:15:46 2018 -0400
+++ b/dom/webbrowserpersist/WebBrowserPersistRemoteDocument.cpp	Fri Jun 22 15:41:39 2018 +0100
@@ -9,6 +9,9 @@
 #include "WebBrowserPersistResourcesParent.h"
 #include "WebBrowserPersistSerializeParent.h"
 #include "mozilla/Unused.h"
+#include "mozilla/ipc/BackgroundUtils.h"
+
+#include "nsIPrincipal.h"
 
 namespace mozilla {
 
@@ -23,6 +26,8 @@
 , mAttrs(aAttrs)
 , mPostData(aPostData)
 {
+  nsresult rv;
+  mPrincipal = ipc::PrincipalInfoToPrincipal(mAttrs.principal(), &rv);
 }
 
 WebBrowserPersistRemoteDocument::~WebBrowserPersistRemoteDocument()
@@ -133,6 +138,14 @@
 }
 
 NS_IMETHODIMP
+WebBrowserPersistRemoteDocument::GetPrincipal(nsIPrincipal** aPrincipal)
+{
+    nsCOMPtr<nsIPrincipal> nodePrincipal = mPrincipal;
+    nodePrincipal.forget(aPrincipal);
+    return NS_OK;
+}
+
+NS_IMETHODIMP
 WebBrowserPersistRemoteDocument::ReadResources(nsIWebBrowserPersistResourceVisitor* aVisitor)
 {
     if (!mActor) {
