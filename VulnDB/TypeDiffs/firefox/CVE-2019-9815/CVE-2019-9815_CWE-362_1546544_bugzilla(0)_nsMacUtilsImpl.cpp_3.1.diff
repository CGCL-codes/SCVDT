diff -r cd1ccb74af7c -r 64ac5acae26b xpcom/base/nsMacUtilsImpl.cpp
--- a/xpcom/base/nsMacUtilsImpl.cpp	Tue May 07 22:16:14 2019 +0000
+++ b/xpcom/base/nsMacUtilsImpl.cpp	Tue May 07 22:16:28 2019 +0000
@@ -303,3 +303,15 @@
   return (rv == 0) && (oldVal != 0);
 }
 #endif
+
+// Returns 0 on error.
+/* static */
+uint32_t nsMacUtilsImpl::GetPhysicalCPUCount() {
+  uint32_t oldVal = 0;
+  size_t oldValSize = sizeof(oldVal);
+  int rv = sysctlbyname("hw.physicalcpu_max", &oldVal, &oldValSize, NULL, 0);
+  if (rv == -1) {
+    return 0;
+  }
+  return oldVal;
+}
