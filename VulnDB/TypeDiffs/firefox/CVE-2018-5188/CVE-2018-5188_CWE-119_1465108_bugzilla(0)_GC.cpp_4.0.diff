diff -r 03405847ada4 -r 8adb9f8f8993 js/src/gc/GC.cpp
--- a/js/src/gc/GC.cpp	Wed May 30 01:22:44 2018 -0700
+++ b/js/src/gc/GC.cpp	Thu May 10 10:09:23 2018 +0100
@@ -2818,7 +2818,7 @@
         for (size_t i = 0; i < bgTaskCount && !bgArenas.done(); i++) {
             bgTasks[i].emplace(rt, &bgArenas, lock);
             startTask(*bgTasks[i], gcstats::PhaseKind::COMPACT_UPDATE_CELLS, lock);
-            tasksStarted = i;
+            tasksStarted++;
         }
     }
 
@@ -2829,6 +2829,8 @@
 
         for (size_t i = 0; i < tasksStarted; i++)
             joinTask(*bgTasks[i], gcstats::PhaseKind::COMPACT_UPDATE_CELLS, lock);
+        for (size_t i = tasksStarted; i < MaxCellUpdateBackgroundTasks; i++)
+            MOZ_ASSERT(bgTasks[i].isNothing());
     }
 }
 
