diff -r b6f094b0dcf2 -r eb37293b1520 js/src/builtin/TestingFunctions.cpp
--- a/js/src/builtin/TestingFunctions.cpp	Mon May 21 09:13:47 2018 -0700
+++ b/js/src/builtin/TestingFunctions.cpp	Fri Apr 06 15:33:32 2018 -0700
@@ -2787,7 +2787,7 @@
         Rooted<CloneBufferObject*> obj(cx, Create(cx));
         if (!obj)
             return nullptr;
-        auto data = js::MakeUnique<JSStructuredCloneData>();
+        auto data = js::MakeUnique<JSStructuredCloneData>(buffer->scope());
         if (!data) {
             ReportOutOfMemory(cx);
             return nullptr;
@@ -2809,11 +2809,6 @@
         MOZ_ASSERT(!data());
         setReservedSlot(DATA_SLOT, PrivateValue(aData));
         setReservedSlot(SYNTHETIC_SLOT, BooleanValue(synthetic));
-
-        // For testing only, and will be unnecessary once the scope is moved
-        // into JSStructuredCloneData.
-        if (synthetic)
-            aData->IgnoreTransferables();
     }
 
     // Discard an owned clone buffer.
@@ -2851,7 +2846,7 @@
             return false;
         }
 
-        auto buf = js::MakeUnique<JSStructuredCloneData>();
+        auto buf = js::MakeUnique<JSStructuredCloneData>(JS::StructuredCloneScope::DifferentProcess);
         if (!buf || !buf->Init(nbytes)) {
             ReportOutOfMemory(cx);
             return false;
