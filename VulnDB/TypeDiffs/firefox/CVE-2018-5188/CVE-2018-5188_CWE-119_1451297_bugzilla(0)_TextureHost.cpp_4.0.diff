diff -r 5ff34e06b8e6 -r a341ae7a49c0 gfx/layers/composite/TextureHost.cpp
--- a/gfx/layers/composite/TextureHost.cpp	Thu May 17 17:15:22 2018 -0400
+++ b/gfx/layers/composite/TextureHost.cpp	Tue May 22 11:25:49 2018 -0400
@@ -292,7 +292,9 @@
               const YCbCrDescriptor& ycbcr = desc.get_YCbCrDescriptor();
               reqSize =
                 ImageDataSerializer::ComputeYCbCrBufferSize(ycbcr.ySize(), ycbcr.yStride(),
-                                                            ycbcr.cbCrSize(), ycbcr.cbCrStride());
+                                                            ycbcr.cbCrSize(), ycbcr.cbCrStride(),
+                                                            ycbcr.yOffset(), ycbcr.cbOffset(),
+                                                            ycbcr.crOffset());
               break;
             }
             case BufferDescriptor::TRGBDescriptor: {
@@ -305,7 +307,7 @@
               MOZ_CRASH("GFX: Bad descriptor");
           }
 
-          if (bufSize < reqSize) {
+          if (reqSize == 0 || bufSize < reqSize) {
             NS_ERROR("A client process gave a shmem too small to fit for its descriptor!");
             return nullptr;
           }
