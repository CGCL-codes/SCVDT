diff -r 27d0c44a5757 -r 30b4121ee4c1 toolkit/components/extensions/WebExtensionPolicy.cpp
--- a/toolkit/components/extensions/WebExtensionPolicy.cpp	Tue Feb 06 15:00:25 2018 +0000
+++ b/toolkit/components/extensions/WebExtensionPolicy.cpp	Fri Jan 26 19:54:34 2018 -0800
@@ -403,11 +403,13 @@
     return false;
   }
 
-  if (mHasActiveTabPermission && aDoc.ShouldMatchActiveTabPermission()) {
+  URLInfo urlinfo(aDoc.PrincipalURL());
+  if (mHasActiveTabPermission && aDoc.ShouldMatchActiveTabPermission() &&
+      MatchPattern::MatchesAllURLs(urlinfo)) {
     return true;
   }
 
-  return MatchesURI(aDoc.PrincipalURL());
+  return MatchesURI(urlinfo);
 }
 
 bool
