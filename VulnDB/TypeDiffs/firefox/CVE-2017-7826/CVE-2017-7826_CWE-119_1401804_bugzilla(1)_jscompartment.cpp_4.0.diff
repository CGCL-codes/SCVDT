diff -r 0e04c7294567 -r d0134315fc7d js/src/jscompartment.cpp
--- a/js/src/jscompartment.cpp	Wed Sep 27 15:21:35 2017 -0400
+++ b/js/src/jscompartment.cpp	Wed Sep 27 18:02:12 2017 +0100
@@ -442,6 +442,10 @@
         return true;
     }
 
+    // Ensure that the wrappee is exposed in case we are creating a new wrapper
+    // for a gray object.
+    ExposeObjectToActiveJS(obj);
+
     // Create a new wrapper for the object.
     auto wrap = cx->runtime()->wrapObjectCallbacks->wrap;
     RootedObject wrapper(cx, wrap(cx, existing, obj));
