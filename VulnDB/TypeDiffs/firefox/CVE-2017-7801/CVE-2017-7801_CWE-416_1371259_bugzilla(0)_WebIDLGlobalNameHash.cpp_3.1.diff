diff -r d44b343011f7 -r e3d205dc31f3 dom/bindings/WebIDLGlobalNameHash.cpp
--- a/dom/bindings/WebIDLGlobalNameHash.cpp	Tue Jul 11 05:55:27 2017 -0700
+++ b/dom/bindings/WebIDLGlobalNameHash.cpp	Mon Jul 10 18:06:18 2017 -0400
@@ -219,8 +219,14 @@
   }
 
   {
+    // It's safe to pass "&global" here, because we've already unwrapped it, but
+    // for general sanity better to not have debug code even having the
+    // appearance of mutating things that opt code uses.
+#ifdef DEBUG
+    JS::Rooted<JSObject*> temp(aCx, global);
     DebugOnly<nsGlobalWindow*> win;
-    MOZ_ASSERT(NS_SUCCEEDED(UNWRAP_OBJECT(Window, global, win)));
+    MOZ_ASSERT(NS_SUCCEEDED(UNWRAP_OBJECT(Window, &temp, win)));
+#endif
   }
 
   if (checkEnabledForScope && !checkEnabledForScope(aCx, global)) {
