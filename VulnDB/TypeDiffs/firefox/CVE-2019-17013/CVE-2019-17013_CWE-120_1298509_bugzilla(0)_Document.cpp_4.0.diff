diff -r 75cbd70ee065 -r 908c9c793e92 dom/base/Document.cpp
--- a/dom/base/Document.cpp	Mon Sep 02 08:54:40 2019 +0000
+++ b/dom/base/Document.cpp	Fri Aug 30 11:52:32 2019 +0000
@@ -514,6 +514,19 @@
   }
 }
 
+void IdentifierMapEntry::ClearAndNotify() {
+  Element* currentElement = mIdContentList->SafeElementAt(0);
+  mIdContentList.Clear();
+  if (currentElement) {
+    FireChangeCallbacks(currentElement, nullptr);
+  }
+  mNameContentList = nullptr;
+  if (mImageElement) {
+    SetImageElement(nullptr);
+  }
+  mChangeCallbacks = nullptr;
+}
+
 namespace dom {
 
 class SimpleHTMLCollection final : public nsSimpleContentList,
@@ -10987,6 +11000,10 @@
   mStyledLinksCleared = true;
 #endif
   mStyledLinks.Clear();
+  // Notify ID change listeners before clearing the identifier map.
+  for (auto iter = mIdentifierMap.Iter(); !iter.Done(); iter.Next()) {
+    iter.Get()->ClearAndNotify();
+  }
   mIdentifierMap.Clear();
   mComposedShadowRoots.Clear();
   mResponsiveContent.Clear();
