diff -r f75ad2573f47 -r 701bfdada717 js/src/vm/NativeObject.cpp
--- a/js/src/vm/NativeObject.cpp	Thu Nov 30 07:56:00 2017 -0500
+++ b/js/src/vm/NativeObject.cpp	Wed Nov 29 16:03:12 2017 +0100
@@ -996,6 +996,8 @@
 NativeObject::shrinkElements(JSContext* cx, uint32_t reqCapacity)
 {
     MOZ_ASSERT(canHaveNonEmptyElements());
+    MOZ_ASSERT(reqCapacity >= getDenseInitializedLength());
+
     if (denseElementsAreCopyOnWrite())
         MOZ_CRASH();
 
