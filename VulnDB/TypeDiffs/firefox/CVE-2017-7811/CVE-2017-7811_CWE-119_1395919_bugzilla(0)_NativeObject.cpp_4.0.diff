diff -r a52bc131f20b -r 90cac1d73acc js/src/vm/NativeObject.cpp
--- a/js/src/vm/NativeObject.cpp	Wed Sep 06 17:40:39 2017 +0800
+++ b/js/src/vm/NativeObject.cpp	Thu Sep 07 12:51:45 2017 +0200
@@ -1266,7 +1266,8 @@
     MOZ_ASSERT(!obj->group()->unknownProperties());
 
     // First copy the dynamic flags.
-    MarkObjectGroupFlags(cx, obj, oldGroup->flags() & OBJECT_FLAG_DYNAMIC_MASK);
+    MarkObjectGroupFlags(cx, obj, oldGroup->flags() &
+                         (OBJECT_FLAG_DYNAMIC_MASK & ~OBJECT_FLAG_UNKNOWN_PROPERTIES));
 
     // Now update all property types. If the object has many properties, this
     // function may be slow so we mark all properties as unknown.
