diff -r 977a731c6f05 -r 43eb913e5974 layout/style/ServoKeyframeRule.cpp
--- a/layout/style/ServoKeyframeRule.cpp	Tue Nov 28 14:28:58 2017 +0000
+++ b/layout/style/ServoKeyframeRule.cpp	Tue Nov 28 17:06:51 2017 -0600
@@ -35,7 +35,10 @@
     return NS_OK;
   }
 
-  void DropReference() { mRule = nullptr; }
+  void DropReference() {
+    mRule = nullptr;
+    mDecls->SetOwningRule(nullptr);
+  }
 
   DeclarationBlock* GetCSSDeclaration(Operation aOperation) final
   {
@@ -83,7 +86,9 @@
   }
 
 private:
-  virtual ~ServoKeyframeDeclaration() {}
+  virtual ~ServoKeyframeDeclaration() {
+    MOZ_ASSERT(!mRule, "Backpointer should have been cleared");
+  }
 
   ServoKeyframeRule* mRule;
   RefPtr<ServoDeclarationBlock> mDecls;
@@ -104,6 +109,9 @@
 
 ServoKeyframeRule::~ServoKeyframeRule()
 {
+  if (mDeclaration) {
+    mDeclaration->DropReference();
+  }
 }
 
 NS_IMPL_ADDREF_INHERITED(ServoKeyframeRule, dom::CSSKeyframeRule)
