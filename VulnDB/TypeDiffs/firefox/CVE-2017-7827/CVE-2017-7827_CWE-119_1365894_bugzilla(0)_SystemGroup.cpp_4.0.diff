diff -r 238145ba52b8 -r a4dfb0e4ad97 xpcom/threads/SystemGroup.cpp
--- a/xpcom/threads/SystemGroup.cpp	Mon Oct 09 10:03:20 2017 +0100
+++ b/xpcom/threads/SystemGroup.cpp	Mon Oct 09 13:40:12 2017 -0400
@@ -16,7 +16,7 @@
 {
 public:
   SystemGroupImpl();
-  ~SystemGroupImpl() {}
+  NS_INLINE_DECL_THREADSAFE_REFCOUNTING(SystemGroupImpl)
 
   static void InitStatic();
   static void ShutdownStatic();
@@ -24,20 +24,12 @@
 
   static bool Initialized() { return !!sSingleton; }
 
-  NS_METHOD_(MozExternalRefCountType) AddRef(void)
-  {
-    return 2;
-  }
-  NS_METHOD_(MozExternalRefCountType) Release(void)
-  {
-    return 1;
-  }
-
 private:
-  static UniquePtr<SystemGroupImpl> sSingleton;
+  ~SystemGroupImpl() = default;
+  static StaticRefPtr<SystemGroupImpl> sSingleton;
 };
 
-UniquePtr<SystemGroupImpl> SystemGroupImpl::sSingleton;
+StaticRefPtr<SystemGroupImpl> SystemGroupImpl::sSingleton;
 
 SystemGroupImpl::SystemGroupImpl()
 {
@@ -49,7 +41,7 @@
 {
   MOZ_ASSERT(!sSingleton);
   MOZ_ASSERT(NS_IsMainThread());
-  sSingleton = MakeUnique<SystemGroupImpl>();
+  sSingleton = new SystemGroupImpl();
 }
 
 /* static */ void
