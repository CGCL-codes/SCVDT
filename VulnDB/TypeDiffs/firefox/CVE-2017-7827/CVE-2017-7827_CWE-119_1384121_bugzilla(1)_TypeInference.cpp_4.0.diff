diff -r 15f2fbd686f6 -r eab55565955d js/src/vm/TypeInference.cpp
--- a/js/src/vm/TypeInference.cpp	Wed Sep 20 09:57:18 2017 +0000
+++ b/js/src/vm/TypeInference.cpp	Wed Sep 20 12:13:54 2017 +0200
@@ -4428,6 +4428,8 @@
 /* static */ void
 JSScript::maybeSweepTypes(AutoClearTypeInferenceStateOnOOM* oom)
 {
+    MOZ_ASSERT(!TlsContext.get()->inUnsafeCallWithABI);
+
     if (!types_ || typesGeneration() == zone()->types.generation)
         return;
 
@@ -4611,6 +4613,7 @@
   : zone(zone), oom(false)
 {
     MOZ_RELEASE_ASSERT(CurrentThreadCanAccessZone(zone));
+    MOZ_ASSERT(!TlsContext.get()->inUnsafeCallWithABI);
     zone->types.setSweepingTypes(true);
 }
 
