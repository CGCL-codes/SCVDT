diff -r 71761ab92e6d -r 9cb5d9d656d2 toolkit/components/url-classifier/nsUrlClassifierDBService.cpp
--- a/toolkit/components/url-classifier/nsUrlClassifierDBService.cpp	Tue Sep 12 13:21:31 2017 -0700
+++ b/toolkit/components/url-classifier/nsUrlClassifierDBService.cpp	Tue Sep 05 17:14:54 2017 +0800
@@ -8,8 +8,6 @@
 #include "nsAppDirectoryServiceDefs.h"
 #include "nsArrayUtils.h"
 #include "nsCRT.h"
-#include "nsICryptoHash.h"
-#include "nsICryptoHMAC.h"
 #include "nsIDirectoryService.h"
 #include "nsIKeyModule.h"
 #include "nsIObserverService.h"
@@ -467,8 +465,6 @@
     return NS_ERROR_OUT_OF_MEMORY;
   }
 
-  mProtocolParser->Init(mCryptoHash);
-
   if (!table.IsEmpty()) {
     mProtocolParser->SetCurrentTable(table);
   }
@@ -809,7 +805,6 @@
     mClassifier = nullptr;
   }
 
-  mCryptoHash = nullptr;
   LOG(("urlclassifier db closed\n"));
 
   return NS_OK;
@@ -944,9 +939,6 @@
   }
 
   nsresult rv;
-  mCryptoHash = do_CreateInstance(NS_CRYPTO_HASH_CONTRACTID, &rv);
-  NS_ENSURE_SUCCESS(rv, rv);
-
   nsAutoPtr<Classifier> classifier(new (fallible) Classifier());
   if (!classifier) {
     return NS_ERROR_OUT_OF_MEMORY;
