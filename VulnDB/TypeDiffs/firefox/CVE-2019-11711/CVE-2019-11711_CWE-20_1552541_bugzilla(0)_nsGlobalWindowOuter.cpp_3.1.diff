diff -r 59e67467da70 -r 9b3c45bd2e77 dom/base/nsGlobalWindowOuter.cpp
--- a/dom/base/nsGlobalWindowOuter.cpp	Tue Jun 04 10:51:46 2019 +0000
+++ b/dom/base/nsGlobalWindowOuter.cpp	Wed May 22 21:18:27 2019 +0000
@@ -1537,10 +1537,8 @@
     return true;
   }
 
-  bool equal;
-  if (NS_SUCCEEDED(mDoc->NodePrincipal()->Equals(aNewDocument->NodePrincipal(),
-                                                 &equal)) &&
-      equal) {
+  if (BasePrincipal::Cast(mDoc->NodePrincipal())
+          ->FastEqualsConsideringDomain(aNewDocument->NodePrincipal())) {
     // The origin is the same.
     return true;
   }
