diff -r 31fb2dec46ba -r 8fdd1dda7efc security/sandbox/win/src/sandboxbroker/sandboxBroker.cpp
--- a/security/sandbox/win/src/sandboxbroker/sandboxBroker.cpp	Mon Jan 08 10:47:06 2018 -0500
+++ b/security/sandbox/win/src/sandboxbroker/sandboxBroker.cpp	Mon Jan 08 10:07:16 2018 +0100
@@ -179,6 +179,7 @@
 bool
 SandboxBroker::LaunchApp(const wchar_t *aPath,
                          const wchar_t *aArguments,
+                         base::EnvironmentMap& aEnvironment,
                          GeckoProcessType aProcessType,
                          const bool aEnableLogging,
                          void **aProcessHandle)
@@ -265,7 +266,7 @@
   PROCESS_INFORMATION targetInfo = {0};
   sandbox::ResultCode last_warning = sandbox::SBOX_ALL_OK;
   DWORD last_error = ERROR_SUCCESS;
-  result = sBrokerService->SpawnTarget(aPath, aArguments, mPolicy,
+  result = sBrokerService->SpawnTarget(aPath, aArguments, aEnvironment, mPolicy,
                                        &last_warning, &last_error, &targetInfo);
   if (sandbox::SBOX_ALL_OK != result) {
     nsAutoCString key;
