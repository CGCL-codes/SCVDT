diff -r 30b4121ee4c1 -r 70bf6bd7b101 layout/base/nsCSSFrameConstructor.cpp
--- a/layout/base/nsCSSFrameConstructor.cpp	Fri Jan 26 19:54:34 2018 -0800
+++ b/layout/base/nsCSSFrameConstructor.cpp	Thu Feb 15 11:21:55 2018 +0100
@@ -8533,7 +8533,7 @@
       return true;
     }
 
-    FlattenedChildIterator iter(aChild);
+    StyleChildrenIterator iter(aChild);
     for (nsIContent* c = iter.GetNextChild(); c; c = iter.GetNextChild()) {
       if (c->GetPrimaryFrame() || GetDisplayContentsStyleFor(c)) {
         LAYOUT_PHASE_TEMP_EXIT();
