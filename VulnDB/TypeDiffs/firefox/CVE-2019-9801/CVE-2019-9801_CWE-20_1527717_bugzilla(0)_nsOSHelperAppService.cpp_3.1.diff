diff -r 971f22f74c69 -r bb9e3868a7bf uriloader/exthandler/win/nsOSHelperAppService.cpp
--- a/uriloader/exthandler/win/nsOSHelperAppService.cpp	Sat Feb 16 09:00:26 2019 -0800
+++ b/uriloader/exthandler/win/nsOSHelperAppService.cpp	Fri Feb 15 00:36:26 2019 +0000
@@ -83,6 +83,29 @@
                                                 AL_EFFECTIVE, &pResult);
     if (SUCCEEDED(hr)) {
       CoTaskMemFree(pResult);
+      nsCOMPtr<nsIWindowsRegKey> regKey =
+          do_CreateInstance("@mozilla.org/windows-registry-key;1");
+      if (!regKey) {
+        return NS_ERROR_NOT_AVAILABLE;
+      }
+
+      nsresult rv = regKey->Open(nsIWindowsRegKey::ROOT_KEY_CLASSES_ROOT,
+                                 nsDependentString(scheme.get()),
+                                 nsIWindowsRegKey::ACCESS_QUERY_VALUE);
+      if (NS_FAILED(rv)) {
+        // Open will fail if the registry key path doesn't exist.
+        return NS_OK;
+      }
+
+      bool hasValue;
+      rv = regKey->HasValue(NS_LITERAL_STRING("URL Protocol"), &hasValue);
+      if (NS_FAILED(rv)) {
+        return NS_ERROR_FAILURE;
+      }
+      if (!hasValue) {
+        return NS_OK;
+      }
+
       *aHandlerExists = true;
     }
   }
