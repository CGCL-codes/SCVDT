diff -r a95052dd0043 -r 0f09554ca8cb dom/html/nsHTMLDocument.cpp
--- a/dom/html/nsHTMLDocument.cpp	Tue Feb 26 17:46:15 2019 +0000
+++ b/dom/html/nsHTMLDocument.cpp	Fri Mar 01 16:53:47 2019 +0000
@@ -1321,6 +1321,9 @@
     // document again otherwise the document could have a non-zero onload block
     // count without the onload blocker request being in the loadgroup.
     EnsureOnloadBlocker();
+
+    // Throw away loaded modules created for the previous global.
+    ScriptLoader()->ClearModuleMap();
   }
 
   // The open occurred after the document finished loading.
