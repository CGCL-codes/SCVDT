diff -r b069f99a8ca9 -r 853c2a64f47e dom/xslt/xslt/txMozillaXMLOutput.cpp
--- a/dom/xslt/xslt/txMozillaXMLOutput.cpp	Fri Nov 03 16:58:59 2017 +0100
+++ b/dom/xslt/xslt/txMozillaXMLOutput.cpp	Mon Oct 30 12:43:00 2017 +0100
@@ -777,7 +777,7 @@
 
 nsresult
 txMozillaXMLOutput::createResultDocument(const nsAString& aName, int32_t aNsID,
-                                         nsIDOMDocument* aSourceDocument,
+                                         nsIDocument* aSourceDocument,
                                          bool aLoadedAsData)
 {
     nsresult rv;
@@ -800,18 +800,16 @@
                nsIDocument::READYSTATE_UNINITIALIZED, "Bad readyState");
     mDocument->SetReadyStateInternal(nsIDocument::READYSTATE_LOADING);
     mDocument->SetMayStartLayout(false);
-    nsCOMPtr<nsIDocument> source = do_QueryInterface(aSourceDocument);
-    NS_ENSURE_STATE(source);
     bool hasHadScriptObject = false;
     nsIScriptGlobalObject* sgo =
-      source->GetScriptHandlingObject(hasHadScriptObject);
+      aSourceDocument->GetScriptHandlingObject(hasHadScriptObject);
     NS_ENSURE_STATE(sgo || !hasHadScriptObject);
 
     mCurrentNode = mDocument;
     mNodeInfoManager = mDocument->NodeInfoManager();
 
     // Reset and set up the document
-    URIUtils::ResetWithSource(mDocument, source);
+    URIUtils::ResetWithSource(mDocument, aSourceDocument);
 
     // Make sure we set the script handling object after resetting with the
     // source, so that we have the right principal.
