diff -r 858276d87233 -r e3b4b0f2a73c netwerk/protocol/http/HttpChannelChild.cpp
--- a/netwerk/protocol/http/HttpChannelChild.cpp	Thu Jan 11 09:19:48 2018 -0800
+++ b/netwerk/protocol/http/HttpChannelChild.cpp	Thu Jan 04 18:56:46 2018 -0500
@@ -644,6 +644,7 @@
                 nsresult aStatus) override
   {
     mChannel->SendDivertOnStopRequest(aStatus);
+    mChannel->SendDivertComplete();
     return NS_OK;
   }
 
@@ -1884,7 +1885,11 @@
   // received from the parent channel, nor dequeued from the ChannelEventQueue.
   mFlushedForDiversion = true;
 
-  SendDivertComplete();
+  // If we're synthesized, it's up to the SyntheticDiversionListener to invoke
+  // SendDivertComplete after it has sent the DivertOnStopRequestMessage.
+  if (!mSynthesizedResponse) {
+    SendDivertComplete();
+  }
 }
 
 void
