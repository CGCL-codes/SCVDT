diff -r 39d71149faea -r 1ce74c61c5c3 dom/base/nsDocument.cpp
--- a/dom/base/nsDocument.cpp	Sat Nov 04 11:01:09 2017 +0100
+++ b/dom/base/nsDocument.cpp	Wed Nov 01 11:24:17 2017 +0100
@@ -8172,6 +8172,8 @@
 nsViewportInfo
 nsDocument::GetViewportInfo(const ScreenIntSize& aDisplaySize)
 {
+  MOZ_ASSERT(mPresShell);
+
   // Compute the CSS-to-LayoutDevice pixel scale as the product of the
   // widget scale and the full zoom.
   nsPresContext* context = mPresShell->GetPresContext();
