diff -r 935393b713cb -r 32bb2e9efd34 js/src/vm/TypeInference.cpp
--- a/js/src/vm/TypeInference.cpp	Mon Dec 18 14:42:21 2017 +0200
+++ b/js/src/vm/TypeInference.cpp	Wed Dec 13 14:13:43 2017 -0600
@@ -4442,6 +4442,7 @@
     // only do this if nothing has been compiled for the script, which will be
     // the case unless the script has been compiled since we started sweeping.
     if (types.sweepReleaseTypes &&
+        !types.keepTypeScripts &&
         !hasBaselineScript() &&
         !hasIonScript())
     {
@@ -4509,6 +4510,7 @@
     sweepCompilerOutputs(zone->group(), nullptr),
     sweepReleaseTypes(zone->group(), false),
     sweepingTypes(zone->group(), false),
+    keepTypeScripts(zone->group(), false),
     activeAnalysis(zone->group(), nullptr)
 {
 }
@@ -4518,6 +4520,7 @@
     js_delete(compilerOutputs.ref());
     js_delete(sweepCompilerOutputs.ref());
     MOZ_RELEASE_ASSERT(!sweepingTypes);
+    MOZ_ASSERT(!keepTypeScripts);
 }
 
 void
