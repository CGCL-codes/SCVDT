diff -r bda9a66dc358 -r faa0174ca76e js/src/vm/TypeInference.cpp
--- a/js/src/vm/TypeInference.cpp	Wed Apr 25 09:00:17 2018 +0300
+++ b/js/src/vm/TypeInference.cpp	Wed Apr 25 09:02:12 2018 +0300
@@ -3329,6 +3329,8 @@
 
     AutoEnterAnalysis enter(cx);
 
+    script->maybeSweepTypes(nullptr);
+
     MOZ_ASSERT(types == TypeScript::BytecodeTypes(script, pc));
     MOZ_ASSERT(!types->hasType(type));
 
