diff -r b5c478da01df -r 596faf466bbc editor/libeditor/StyleSheetTransactions.cpp
--- a/editor/libeditor/StyleSheetTransactions.cpp	Fri Mar 24 13:38:00 2017 +1300
+++ b/editor/libeditor/StyleSheetTransactions.cpp	Tue Mar 21 19:00:36 2017 +0900
@@ -44,9 +44,9 @@
  * AddStyleSheetTransaction
  ******************************************************************************/
 
-AddStyleSheetTransaction::AddStyleSheetTransaction(EditorBase& aEditor,
+AddStyleSheetTransaction::AddStyleSheetTransaction(EditorBase& aEditorBase,
                                                    StyleSheet* aSheet)
-  : mEditor(aEditor)
+  : mEditorBase(&aEditorBase)
   , mSheet(aSheet)
 {
   MOZ_ASSERT(aSheet);
@@ -54,6 +54,7 @@
 
 NS_IMPL_CYCLE_COLLECTION_INHERITED(AddStyleSheetTransaction,
                                    EditTransactionBase,
+                                   mEditorBase,
                                    mSheet)
 
 NS_INTERFACE_MAP_BEGIN_CYCLE_COLLECTION(AddStyleSheetTransaction)
@@ -62,18 +63,20 @@
 NS_IMETHODIMP
 AddStyleSheetTransaction::DoTransaction()
 {
-  NS_ENSURE_TRUE(mSheet, NS_ERROR_NOT_INITIALIZED);
-
-  AddStyleSheet(mEditor, mSheet);
+  if (NS_WARN_IF(!mEditorBase) || NS_WARN_IF(!mSheet)) {
+    return NS_ERROR_NOT_INITIALIZED;
+  }
+  AddStyleSheet(*mEditorBase, mSheet);
   return NS_OK;
 }
 
 NS_IMETHODIMP
 AddStyleSheetTransaction::UndoTransaction()
 {
-  NS_ENSURE_TRUE(mSheet, NS_ERROR_NOT_INITIALIZED);
-
-  RemoveStyleSheet(mEditor, mSheet);
+  if (NS_WARN_IF(!mEditorBase) || NS_WARN_IF(!mSheet)) {
+    return NS_ERROR_NOT_INITIALIZED;
+  }
+  RemoveStyleSheet(*mEditorBase, mSheet);
   return NS_OK;
 }
 
@@ -88,9 +91,10 @@
  * RemoveStyleSheetTransaction
  ******************************************************************************/
 
-RemoveStyleSheetTransaction::RemoveStyleSheetTransaction(EditorBase& aEditor,
-                                                         StyleSheet* aSheet)
-  : mEditor(aEditor)
+RemoveStyleSheetTransaction::RemoveStyleSheetTransaction(
+                               EditorBase& aEditorBase,
+                               StyleSheet* aSheet)
+  : mEditorBase(&aEditorBase)
   , mSheet(aSheet)
 {
   MOZ_ASSERT(aSheet);
@@ -98,6 +102,7 @@
 
 NS_IMPL_CYCLE_COLLECTION_INHERITED(RemoveStyleSheetTransaction,
                                    EditTransactionBase,
+                                   mEditorBase,
                                    mSheet)
 
 NS_INTERFACE_MAP_BEGIN_CYCLE_COLLECTION(RemoveStyleSheetTransaction)
@@ -106,18 +111,20 @@
 NS_IMETHODIMP
 RemoveStyleSheetTransaction::DoTransaction()
 {
-  NS_ENSURE_TRUE(mSheet, NS_ERROR_NOT_INITIALIZED);
-
-  RemoveStyleSheet(mEditor, mSheet);
+  if (NS_WARN_IF(!mEditorBase) || NS_WARN_IF(!mSheet)) {
+    return NS_ERROR_NOT_INITIALIZED;
+  }
+  RemoveStyleSheet(*mEditorBase, mSheet);
   return NS_OK;
 }
 
 NS_IMETHODIMP
 RemoveStyleSheetTransaction::UndoTransaction()
 {
-  NS_ENSURE_TRUE(mSheet, NS_ERROR_NOT_INITIALIZED);
-
-  AddStyleSheet(mEditor, mSheet);
+  if (NS_WARN_IF(!mEditorBase) || NS_WARN_IF(!mSheet)) {
+    return NS_ERROR_NOT_INITIALIZED;
+  }
+  AddStyleSheet(*mEditorBase, mSheet);
   return NS_OK;
 }
 
