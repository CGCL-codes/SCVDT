diff -r a088ee43f0f0 -r 8987f5c03017 js/src/wasm/WasmBaselineCompile.cpp
--- a/js/src/wasm/WasmBaselineCompile.cpp	Wed Jun 21 15:16:56 2017 +0200
+++ b/js/src/wasm/WasmBaselineCompile.cpp	Wed Jun 21 12:39:23 2017 +0200
@@ -2341,6 +2341,10 @@
         // frame size. Flush the constant pool in case it needs to be patched.
         MOZ_ASSERT(maxFramePushed_ >= localSize_);
         masm.flush();
+
+        // Precondition for patching.
+        if (masm.oom())
+            return false;
         masm.patchAdd32ToPtr(stackAddOffset_, Imm32(-int32_t(maxFramePushed_ - localSize_)));
 
         // Since we just overflowed the stack, to be on the safe side, pop the
