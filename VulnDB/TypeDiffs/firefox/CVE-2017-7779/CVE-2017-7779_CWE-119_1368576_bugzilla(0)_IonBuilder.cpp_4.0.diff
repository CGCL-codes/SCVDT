diff -r fd90d75e1b51 -r 9c6ee0bd191b js/src/jit/IonBuilder.cpp
--- a/js/src/jit/IonBuilder.cpp	Tue Jun 06 12:24:31 2017 +0000
+++ b/js/src/jit/IonBuilder.cpp	Tue Jun 06 15:05:08 2017 +0200
@@ -1216,6 +1216,11 @@
         osrBlock->insertBefore(osrBlock->lastIns(), barrier);
         osrBlock->rewriteSlot(slot, barrier);
         def = barrier;
+
+        // If the TypeSet is more precise than |type|, adjust |type| for the
+        // code below.
+        if (type == MIRType::Value)
+            type = barrier->type();
     } else if (type == MIRType::Null ||
                type == MIRType::Undefined ||
                type == MIRType::MagicOptimizedArguments)
