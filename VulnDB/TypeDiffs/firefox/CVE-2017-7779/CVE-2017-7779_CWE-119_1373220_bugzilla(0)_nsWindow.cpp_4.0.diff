diff -r ed5cfbc47793 -r 74382cf3e203 widget/windows/nsWindow.cpp
--- a/widget/windows/nsWindow.cpp	Wed Jul 12 14:41:19 2017 -0500
+++ b/widget/windows/nsWindow.cpp	Wed Jul 12 19:32:48 2017 -0700
@@ -1249,13 +1249,14 @@
 void
 nsWindow::SetParent(nsIWidget *aNewParent)
 {
-  mParent = aNewParent;
-
   nsCOMPtr<nsIWidget> kungFuDeathGrip(this);
   nsIWidget* parent = GetParent();
   if (parent) {
     parent->RemoveChild(this);
   }
+
+  mParent = aNewParent;
+
   if (aNewParent) {
     ReparentNativeWidget(aNewParent);
     aNewParent->AddChild(this);
