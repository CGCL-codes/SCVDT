diff -r 37bd4e06eed2 -r 4d29ca8acec1 dom/base/nsJSUtils.cpp
--- a/dom/base/nsJSUtils.cpp	Mon Nov 12 02:00:17 2018 -0800
+++ b/dom/base/nsJSUtils.cpp	Mon Nov 12 10:42:56 2018 +0000
@@ -97,7 +97,8 @@
 
   // Compile.
   JS::Rooted<JSFunction*> fun(cx);
-  JS::SourceBufferHolder source(PromiseFlatString(aBody).get(), aBody.Length(),
+  const nsString& bodyString = PromiseFlatString(aBody);
+  JS::SourceBufferHolder source(bodyString.get(), aBody.Length(),
                                 JS::SourceBufferHolder::NoOwnership);
   if (!JS::CompileFunction(cx, aScopeChain, aOptions,
                            PromiseFlatCString(aName).get(),
