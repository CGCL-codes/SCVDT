diff -r 4c893cb98224 -r bd79850d10f8 media/webrtc/trunk/webrtc/modules/video_coding/rtp_frame_reference_finder.cc
--- a/media/webrtc/trunk/webrtc/modules/video_coding/rtp_frame_reference_finder.cc	Fri Jun 01 08:10:25 2018 +0900
+++ b/media/webrtc/trunk/webrtc/modules/video_coding/rtp_frame_reference_finder.cc	Fri Jun 08 19:49:40 2018 -0700
@@ -434,8 +434,11 @@
       LOG(LS_WARNING) << "Received keyframe without scalability structure";
 
     frame->num_references = 0;
-    GofInfo info = gof_info_.find(codec_header.tl0_pic_idx)->second;
-    FrameReceivedVp9(frame->picture_id, &info);
+    auto gof_info_it = gof_info_.find(codec_header.tl0_pic_idx);
+    if (gof_info_it == gof_info_.end())
+      return;
+
+    FrameReceivedVp9(frame->picture_id, &gof_info_it->second);
     CompletedFrameVp9(std::move(frame));
     return;
   }
@@ -508,6 +511,12 @@
   size_t gof_idx = diff % info.gof->num_frames_in_gof;
   size_t temporal_idx = info.gof->temporal_idx[gof_idx];
 
+  if (temporal_idx >= kMaxTemporalLayers) {
+    LOG(LS_WARNING) << "At most " << kMaxTemporalLayers << " temporal "
+                    << "layers are supported.";
+    return true;
+  }
+
   // For every reference this frame has, check if there is a frame missing in
   // the interval (|ref_pid|, |picture_id|) in any of the lower temporal
   // layers. If so, we are missing a required frame.
