diff -r ea180e6624d8 -r 9f52abcf637e layout/painting/FrameLayerBuilder.cpp
--- a/layout/painting/FrameLayerBuilder.cpp	Tue Jul 03 23:47:48 2018 +0000
+++ b/layout/painting/FrameLayerBuilder.cpp	Wed Jun 27 11:48:22 2018 +0100
@@ -5048,11 +5048,14 @@
 
   if (layer->Manager() == mRetainingManager) {
     DisplayItemData *data = aItem.mDisplayItemData;
-    if (data) {
-      if (!data->mUsed) {
-        data->BeginUpdate(layer, aItem.mLayerState, aItem.mItem, aItem.mReused, aItem.mMerged);
+    if (data && !data->mUsed) {
+      data->BeginUpdate(layer, aItem.mLayerState, aItem.mItem, aItem.mReused, aItem.mMerged);
+    } else {
+      if (data && data->mUsed) {
+        // If the DID has already been used (by a previously merged frame,
+        // which is not merged this paint) we must create a new DID for the item.
+        aItem.mItem->SetDisplayItemData(nullptr);
       }
-    } else {
       data = StoreDataForFrame(aItem.mItem, layer, aItem.mLayerState, nullptr);
     }
     data->mInactiveManager = tempManager;
