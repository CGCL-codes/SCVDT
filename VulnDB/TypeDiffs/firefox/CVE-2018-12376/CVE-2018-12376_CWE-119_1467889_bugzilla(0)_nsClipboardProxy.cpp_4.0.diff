diff -r 4a79d4e9efff -r f7b6f9fd2de5 widget/nsClipboardProxy.cpp
--- a/widget/nsClipboardProxy.cpp	Thu Jun 28 14:33:32 2018 -0500
+++ b/widget/nsClipboardProxy.cpp	Mon Aug 06 19:01:21 2018 +0300
@@ -99,7 +99,7 @@
         nsCOMPtr<nsIInputStream> stream;
 
         NS_NewCStringInputStream(getter_AddRefs(stream),
-                                 nsDependentCString(data.get<char>(), data.Size<char>()));
+                                 nsDependentCSubstring(data.get<char>(), data.Size<char>()));
 
         rv = aTransferable->SetTransferData(flavor.get(), stream, sizeof(nsISupports*));
         NS_ENSURE_SUCCESS(rv, rv);
@@ -110,7 +110,7 @@
           do_CreateInstance(NS_SUPPORTS_CSTRING_CONTRACTID, &rv);
         NS_ENSURE_SUCCESS(rv, rv);
 
-        rv = dataWrapper->SetData(nsDependentCString(data.get<char>(), data.Size<char>()));
+        rv = dataWrapper->SetData(nsDependentCSubstring(data.get<char>(), data.Size<char>()));
         NS_ENSURE_SUCCESS(rv, rv);
 
         rv = aTransferable->SetTransferData(item.flavor().get(), dataWrapper,
