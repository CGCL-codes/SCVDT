diff -r 4a79d4e9efff -r f7b6f9fd2de5 dom/ipc/ContentChild.cpp
--- a/dom/ipc/ContentChild.cpp	Thu Jun 28 14:33:32 2018 -0500
+++ b/dom/ipc/ContentChild.cpp	Mon Aug 06 19:01:21 2018 +0300
@@ -3278,7 +3278,7 @@
             variant->SetAsAString(data);
           } else if (item.data().type() == IPCDataTransferData::TShmem) {
             Shmem data = item.data().get_Shmem();
-            variant->SetAsACString(nsDependentCString(data.get<char>(), data.Size<char>()));
+            variant->SetAsACString(nsDependentCSubstring(data.get<char>(), data.Size<char>()));
             Unused << DeallocShmem(data);
           } else if (item.data().type() == IPCDataTransferData::TIPCBlob) {
             RefPtr<BlobImpl> blobImpl =
