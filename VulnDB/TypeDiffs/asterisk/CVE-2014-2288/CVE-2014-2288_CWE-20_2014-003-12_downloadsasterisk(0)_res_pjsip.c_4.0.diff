Index: res/res_pjsip.c
===================================================================
--- res/res_pjsip.c	(revision 409828)
+++ res/res_pjsip.c	(working copy)
@@ -1850,7 +1850,7 @@
 	}
 	AST_RWLIST_UNLOCK(&supplements);
 
-	if (tsx->status_code == 401 || tsx->status_code == 407) {
+	if ((tsx->status_code == 401 || tsx->status_code == 407) && req_data->endpoint) {
 		if (!ast_sip_create_request_with_auth(&req_data->endpoint->outbound_auths, challenge, tsx, &tdata)) {
 			pjsip_endpt_send_request(ast_sip_get_pjsip_endpoint(), tdata, -1, req_data->token, req_data->callback);
 		}