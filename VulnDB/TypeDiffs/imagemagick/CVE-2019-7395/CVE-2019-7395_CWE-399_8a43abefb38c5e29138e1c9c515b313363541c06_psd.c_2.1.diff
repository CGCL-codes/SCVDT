diff --git a/coders/psd.c b/coders/psd.c
index 95dd4e6bb2..7bbd3af4ea 100644
--- a/coders/psd.c
+++ b/coders/psd.c
@@ -2782,6 +2782,8 @@ static size_t WritePSDChannel(const PSDInfo *psd_info,
       if (deflateInit(&stream,level) != Z_OK)
         {
           quantum_info=DestroyQuantumInfo(quantum_info);
+          compressed_pixels=(unsigned char *) RelinquishMagickMemory(
+            compressed_pixels);
           return(0);
         }
     }
