diff -rN -u old-imagemagick/magick/image.c new-imagemagick/magick/image.c
--- old-imagemagick/magick/image.c	2006-01-04 01:23:29.000000000 +0100
+++ new-imagemagick/magick/image.c	2006-01-04 01:23:31.000000000 +0100
@@ -2881,8 +2881,16 @@
             char
               format[MaxTextExtent];
 
+	    /* Extract first numeric format specifier */
             (void) CopyMagickString(format,p,MaxTextExtent);
+	    if (q-p+1 < MaxTextExtent)
+		    format[q-p+1]='\0';
+	    /* Expand format */
             (void) FormatMagickString(p,MaxTextExtent,format,image_info->scene);
+	    /* Copy rest of string verbatim without further expansion */
+	    (void) ConcatenateMagickString(filename,
+	                                   image_info->filename+(q-filename)+1,
+					   MaxTextExtent);
             break;
           }
       }
