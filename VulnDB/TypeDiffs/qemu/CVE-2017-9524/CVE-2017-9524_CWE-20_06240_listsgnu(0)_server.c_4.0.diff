diff --git a/nbd/server.c b/nbd/server.c
index 0c4f456..d8dfac8 100644
--- a/nbd/server.c
+++ b/nbd/server.c
@@ -1601,16 +1601,14 @@ static coroutine_fn void nbd_co_client_start(void 
*opaque)

     if (exp) {
         nbd_export_get(exp);
-    }
-    if (nbd_negotiate(data)) {
-        client_close(client);
-        goto out;
-    }
-    qemu_co_mutex_init(&client->send_lock);
-
-    if (exp) {
         QTAILQ_INSERT_TAIL(&exp->clients, client, next);
     }
+    qemu_co_mutex_init(&client->send_lock);
+
+    if (nbd_negotiate(data)) {
+        client_close(client);
+        goto out;
+    }

     nbd_client_receive_next_request(client);

