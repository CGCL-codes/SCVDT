--- tar.c	2019-02-08 12:13:02.000000000 +0100
+++ tar_patched.c	2019-02-08 12:13:23.000000000 +0100
@@ -764,7 +764,7 @@
 	header.typeflag = entry->tar_type;
 
 	if (entry->link) {
-		strncpy(header.linkname, entry->link, strlen(entry->link));
+		strncpy(header.linkname, entry->link, strlen(header->linkname));
 	}
 
 	strncpy(header.magic, "ustar", sizeof("ustar")-1);
