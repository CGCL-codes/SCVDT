diff --git a/ui/qt/wireshark_application.cpp b/ui/qt/wireshark_application.cpp
index 20c81e5..c3f027b 100644
--- a/ui/qt/wireshark_application.cpp
+++ b/ui/qt/wireshark_application.cpp
@@ -65,10 +65,12 @@
 #include "ui/software_update.h"
 #include "ui/last_open_dir.h"
 #include "ui/recent_utils.h"
-#include <wsutil/utf8_entities.h>
+
+#include "wsutil/utf8_entities.h"
 
 #ifdef _WIN32
 #  include "ui/win32/console_win32.h"
+#  include "wsutil/file_util.h"
 #endif /* _WIN32 */
 
 #include <QAction>
@@ -85,11 +87,6 @@
 #include <QUrl>
 #include <QColorDialog>
 
-#ifdef Q_OS_WIN
-#include <QDebug>
-#include <QLibrary>
-#endif
-
 #ifdef _MSC_VER
 #pragma warning(pop)
 #endif
@@ -558,13 +555,7 @@ WiresharkApplication::WiresharkApplication(int &argc,  char **argv) :
 
 #ifdef Q_OS_WIN
     /* RichEd20.DLL is needed for native file dialog filter entries. */
-    if (QLibrary::isLibrary("riched20.dll")) {
-        QLibrary riched20("riched20.dll");
-        riched20.load();
-        if (!riched20.isLoaded()) {
-            qDebug() << riched20.errorString();
-        }
-    }
+    ws_load_library("riched20.dll");
 #endif // Q_OS_WIN
 
 #if (QT_VERSION >= QT_VERSION_CHECK(5, 1, 0))
-- 
2.7.4

