diff --git a/net/atm/proc.c b/net/atm/proc.c
index d6a57195592a0..21efeff6a44b7 100644
--- a/net/atm/proc.c
+++ b/net/atm/proc.c
@@ -257,6 +257,9 @@ static int arp_seq_open(struct inode *inode, struct file *file)
 	struct seq_file *seq;
 	int rc = -EAGAIN;
 
+	if (!clip_tbl_hook)
+		goto out;
+
 	state = kmalloc(sizeof(*state), GFP_KERNEL);
 	if (!state) {
 		rc = -ENOMEM;
