--- trunk/Source/core/dom/Element.cpp	2013/06/23 22:36:40	152937
+++ trunk/Source/core/dom/Element.cpp	2013/06/24 06:50:00	152938
@@ -1809,6 +1809,7 @@
     setAttributeInternal(index, attrNode->qualifiedName(), attrNode->value(), NotInSynchronizationOfLazyAttribute);
 
     attrNode->attachToElement(this);
+    treeScope()->adoptIfNeeded(attrNode);
     ensureAttrNodeListForElement(this)->append(attrNode);
 
     return oldAttrNode.release();
