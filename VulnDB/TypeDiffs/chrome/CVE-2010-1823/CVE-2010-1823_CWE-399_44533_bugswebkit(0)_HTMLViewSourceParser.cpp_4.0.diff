diff --git a/WebCore/html/HTMLViewSourceParser.cpp b/WebCore/html/HTMLViewSourceParser.cpp
index 2d69fe66ff0ccf1f69356e9eda4783fa21122550..fe4bdba71b14781c603ae531c5d4dfcc90c79a03 100644
--- a/WebCore/html/HTMLViewSourceParser.cpp
+++ b/WebCore/html/HTMLViewSourceParser.cpp
@@ -86,7 +86,7 @@ void HTMLViewSourceParser::updateTokenizerState()
         return;
 
     AtomicString tagName(m_token.name().data(), m_token.name().size());
-    m_tokenizer.setState(HTMLTreeBuilder::adjustedLexerState(m_tokenizer.state(), tagName, m_document->frame()));
+    m_tokenizer.setState(HTMLTreeBuilder::adjustedLexerState(m_tokenizer.state(), tagName, document()->frame()));
     if (tagName == HTMLNames::scriptTag) {
         // The tree builder handles scriptTag separately from the other tokenizer
         // state adjustments, so we need to handle it separately too.
