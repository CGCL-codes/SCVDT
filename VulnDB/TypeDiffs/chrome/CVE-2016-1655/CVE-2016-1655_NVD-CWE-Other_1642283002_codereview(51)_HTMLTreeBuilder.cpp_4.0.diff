Index: third_party/WebKit/Source/core/html/parser/HTMLTreeBuilder.cpp
diff --git a/third_party/WebKit/Source/core/html/parser/HTMLTreeBuilder.cpp b/third_party/WebKit/Source/core/html/parser/HTMLTreeBuilder.cpp
index 2ce0a69d690179cb0116ec49bc6a81b25a0b2f15..372389c8681d17bbec1fe8c8bae9fba64bbb5943 100644
--- a/third_party/WebKit/Source/core/html/parser/HTMLTreeBuilder.cpp
+++ b/third_party/WebKit/Source/core/html/parser/HTMLTreeBuilder.cpp
@@ -188,6 +188,11 @@ public:
         skipLeading<isNotHTMLSpace<UChar>>();
     }
 
+    void skipRemaining()
+    {
+        m_current = m_end;
+    }
+
     String takeRemaining()
     {
         ASSERT(!isEmpty());
@@ -2288,6 +2293,10 @@ ReprocessBuffer:
         if (buffer.isEmpty())
             return;
         defaultForBeforeHTML();
+        if (m_parser->isStopped()) {
+            buffer.skipRemaining();
+            return;
+        }
         // Fall through.
     }
     case BeforeHeadMode: {
