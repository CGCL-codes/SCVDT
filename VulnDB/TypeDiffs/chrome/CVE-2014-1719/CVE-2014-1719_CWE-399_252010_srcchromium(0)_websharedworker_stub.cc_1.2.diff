--- trunk/src/content/worker/websharedworker_stub.cc	2014/02/19 08:38:48	252009
+++ trunk/src/content/worker/websharedworker_stub.cc	2014/02/19 08:41:01	252010
@@ -102,11 +102,11 @@
 }
 
 void WebSharedWorkerStub::OnTerminateWorkerContext() {
-  impl_->terminateWorkerContext();
-
+  running_ = false;
   // Call the client to make sure context exits.
   EnsureWorkerContextTerminates();
-  running_ = false;
+  // This may call "delete this" via WorkerScriptLoadFailed and Shutdown.
+  impl_->terminateWorkerContext();
 }
 
 void WebSharedWorkerStub::WorkerScriptLoaded() {
