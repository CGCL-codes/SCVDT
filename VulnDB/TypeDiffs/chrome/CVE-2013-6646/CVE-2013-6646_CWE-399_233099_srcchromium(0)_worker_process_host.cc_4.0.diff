--- trunk/src/content/browser/worker_host/worker_process_host.cc	2013/11/05 22:08:44	233098
+++ trunk/src/content/browser/worker_host/worker_process_host.cc	2013/11/05 22:13:37	233099
@@ -323,6 +323,8 @@
     IPC_MESSAGE_HANDLER(WorkerProcessHostMsg_AllowDatabase, OnAllowDatabase)
     IPC_MESSAGE_HANDLER(WorkerProcessHostMsg_AllowFileSystem, OnAllowFileSystem)
     IPC_MESSAGE_HANDLER(WorkerProcessHostMsg_AllowIndexedDB, OnAllowIndexedDB)
+    IPC_MESSAGE_HANDLER(WorkerProcessHostMsg_ForceKillWorker,
+                        OnForceKillWorkerProcess)
     IPC_MESSAGE_UNHANDLED(handled = false)
   IPC_END_MESSAGE_MAP_EX()
 
@@ -393,6 +395,14 @@
       url, name, resource_context_, GetRenderViewIDsForWorker(worker_route_id));
 }
 
+void WorkerProcessHost::OnForceKillWorkerProcess() {
+  if (process_ && process_launched_)
+    base::KillProcess(
+          process_->GetData().handle, RESULT_CODE_NORMAL_EXIT, false);
+  else
+    RecordAction(UserMetricsAction("WorkerProcess_BadProcessToKill"));
+}
+
 void WorkerProcessHost::RelayMessage(
     const IPC::Message& message,
     WorkerMessageFilter* filter,
