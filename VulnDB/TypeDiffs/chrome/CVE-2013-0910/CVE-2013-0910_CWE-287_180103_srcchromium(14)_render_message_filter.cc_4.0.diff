--- trunk/src/content/browser/renderer_host/render_message_filter.cc	2013/02/01 06:26:35	180102
+++ trunk/src/content/browser/renderer_host/render_message_filter.cc	2013/02/01 06:29:31	180103
@@ -657,7 +657,7 @@
   for (size_t i = 0; i < all_plugins.size(); ++i) {
     // Copy because the filter can mutate.
     webkit::WebPluginInfo plugin(all_plugins[i]);
-    if (!filter || filter->ShouldUsePlugin(child_process_id,
+    if (!filter || filter->IsPluginEnabled(child_process_id,
                                            routing_id,
                                            resource_context_,
                                            GURL(),
@@ -704,8 +704,10 @@
     const FilePath& path,
     IPC::Message* reply_msg) {
   plugin_service_->OpenChannelToPpapiPlugin(
-      path, profile_data_directory_, new OpenChannelToPpapiPluginCallback(
-          this, resource_context_, reply_msg));
+      render_process_id_,
+      path,
+      profile_data_directory_,
+      new OpenChannelToPpapiPluginCallback(this, resource_context_, reply_msg));
 }
 
 void RenderMessageFilter::OnDidCreateOutOfProcessPepperInstance(
@@ -755,7 +757,9 @@
                                                      int request_id,
                                                      const FilePath& path) {
   plugin_service_->OpenChannelToPpapiBroker(
-      path, new OpenChannelToPpapiBrokerCallback(this, routing_id, request_id));
+      render_process_id_,
+      path,
+      new OpenChannelToPpapiBrokerCallback(this, routing_id, request_id));
 }
 
 void RenderMessageFilter::OnGenerateRoutingID(int* route_id) {
