Index: content/browser/renderer_host/render_message_filter.cc
===================================================================
--- content/browser/renderer_host/render_message_filter.cc	(revision 180039)
+++ content/browser/renderer_host/render_message_filter.cc	(working copy)
@@ -663,7 +663,7 @@
   for (size_t i = 0; i < all_plugins.size(); ++i) {
     // Copy because the filter can mutate.
     webkit::WebPluginInfo plugin(all_plugins[i]);
-    if (!filter || filter->ShouldUsePlugin(child_process_id,
+    if (!filter || filter->IsPluginEnabled(child_process_id,
                                            routing_id,
                                            resource_context_,
                                            GURL(),
@@ -710,8 +710,10 @@
     const FilePath& path,
     IPC::Message* reply_msg) {
   plugin_service_->OpenChannelToPpapiPlugin(
-      path, profile_data_directory_, new OpenChannelToPpapiPluginCallback(
-          this, resource_context_, reply_msg));
+      render_process_id_,
+      path,
+      profile_data_directory_,
+      new OpenChannelToPpapiPluginCallback(this, resource_context_, reply_msg));
 }
 
 void RenderMessageFilter::OnDidCreateOutOfProcessPepperInstance(
@@ -761,7 +763,9 @@
                                                      int request_id,
                                                      const FilePath& path) {
   plugin_service_->OpenChannelToPpapiBroker(
-      path, new OpenChannelToPpapiBrokerCallback(this, routing_id, request_id));
+      render_process_id_,
+      path,
+      new OpenChannelToPpapiBrokerCallback(this, routing_id, request_id));
 }
 
 void RenderMessageFilter::OnGenerateRoutingID(int* route_id) {
