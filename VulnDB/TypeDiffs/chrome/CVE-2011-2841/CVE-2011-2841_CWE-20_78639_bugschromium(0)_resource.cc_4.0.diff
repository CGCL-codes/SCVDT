Index: webkit/plugins/ppapi/resource.cc
===================================================================
--- webkit/plugins/ppapi/resource.cc    (revision 81926)
+++ webkit/plugins/ppapi/resource.cc    (working copy)
@@ -15,9 +15,12 @@

 Resource::Resource(PluginInstance* instance)
     : resource_id_(0), instance_(instance) {
+    instance_->AddRef();
 }

 Resource::~Resource() {
+    if (instance_)
+      instance_->Release();
 }

 PP_Resource Resource::GetReference() {
@@ -39,8 +42,10 @@
       resource_id_);
   resource_id_ = 0;

-  if (instance_destroyed)
+  if (instance_destroyed) {
+    instance_->Release();
     instance_ = NULL;
+  }
 }

 #define DEFINE_TYPE_GETTER(RESOURCE)            \