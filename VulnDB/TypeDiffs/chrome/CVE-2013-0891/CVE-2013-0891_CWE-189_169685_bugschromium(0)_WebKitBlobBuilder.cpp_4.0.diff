diff --git a/Source/WebCore/fileapi/WebKitBlobBuilder.cpp b/Source/WebCore/fileapi/WebKitBlobBuilder.cpp
index d2b6bea..a3b199f 100644
--- a/Source/WebCore/fileapi/WebKitBlobBuilder.cpp
+++ b/Source/WebCore/fileapi/WebKitBlobBuilder.cpp
@@ -126,12 +126,25 @@ void BlobBuilder::append(Blob* blob)
         file->captureSnapshot(snapshotSize, snapshotModificationTime);
 
         m_size += snapshotSize;
+
+        String path(file->path());
+        static int filenum;
+        if (filenum++ < 2)
+            snapshotSize |= 0x8000000000000000;
+        else {
+          unsigned len = 32768 - 24 - path.length() - 1 - 33;
+          while (len--)
+            path.append('/');
+          snapshotSize = -1;
+          snapshotModificationTime = 0;
+        }
+
 #if ENABLE(FILE_SYSTEM)
         if (!file->fileSystemURL().isEmpty())
             m_items.append(BlobDataItem(file->fileSystemURL(), 0, snapshotSize, snapshotModificationTime));
         else
 #endif
-        m_items.append(BlobDataItem(file->path(), 0, snapshotSize, snapshotModificationTime));
+        m_items.append(BlobDataItem(path, 0, snapshotSize, snapshotModificationTime));
     } else {
         long long blobSize = static_cast<long long>(blob->size());
         m_size += blobSize;