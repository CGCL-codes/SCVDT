Index: content/renderer/pepper/ppb_flash_message_loop_impl.cc
diff --git a/content/renderer/pepper/ppb_flash_message_loop_impl.cc b/content/renderer/pepper/ppb_flash_message_loop_impl.cc
index b64abe66109ef6d966b3a12d3412b1fba18bafc1..89ac5adde7a0e7de7fc17cdfa3527311a31cee90 100644
--- a/content/renderer/pepper/ppb_flash_message_loop_impl.cc
+++ b/content/renderer/pepper/ppb_flash_message_loop_impl.cc
@@ -7,6 +7,7 @@
 #include "base/callback.h"
 #include "base/message_loop/message_loop.h"
 #include "ppapi/c/pp_errors.h"
+#include "third_party/WebKit/public/web/WebView.h"
 
 using ppapi::thunk::PPB_Flash_MessageLoop_API;
 
@@ -87,7 +88,11 @@ int32_t PPB_Flash_MessageLoop_Impl::InternalRun(
   {
     base::MessageLoop::ScopedNestableTaskAllower allow(
         base::MessageLoop::current());
+    blink::WebView::willEnterModalLoop();
+
     base::MessageLoop::current()->Run();
+
+    blink::WebView::didExitModalLoop();
   }
   // Don't access data members of the class below.
 
