--- trunk/Source/web/WebDOMFileSystem.cpp	2015/06/09 11:11:15	196754
+++ trunk/Source/web/WebDOMFileSystem.cpp	2015/06/09 11:34:24	196755
@@ -116,11 +116,13 @@
     return m_private->rootURL();
 }
 
-v8::Local<v8::Value> WebDOMFileSystem::toV8Value(v8::Local<v8::Object> creationContext, v8::Isolate* isolate)
+v8::Local<v8::Value> WebDOMFileSystem::toV8Value(v8::Local<v8::Object> /* creationContext */, v8::Isolate* isolate)
 {
+    // We no longer use |creationContext| because it's often misused and points
+    // to a context faked by user script.
     if (!m_private.get())
         return v8::Local<v8::Value>();
-    return toV8(m_private.get(), creationContext, isolate);
+    return toV8(m_private.get(), isolate->GetCurrentContext()->Global(), isolate);
 }
 
 v8::Local<v8::Value> WebDOMFileSystem::createV8Entry(
@@ -132,9 +134,9 @@
     if (!m_private.get())
         return v8::Local<v8::Value>();
     if (entryType == EntryTypeDirectory)
-        return toV8(DirectoryEntry::create(m_private.get(), path), creationContext, isolate);
+        return toV8(DirectoryEntry::create(m_private.get(), path), isolate->GetCurrentContext()->Global(), isolate);
     ASSERT(entryType == EntryTypeFile);
-    return toV8(FileEntry::create(m_private.get(), path), creationContext, isolate);
+    return toV8(FileEntry::create(m_private.get(), path), isolate->GetCurrentContext()->Global(), isolate);
 }
 
 WebDOMFileSystem::WebDOMFileSystem(DOMFileSystem* domFileSystem)
