diff --git a/chrome/browser/extensions/api/web_request/web_request_api_helpers.cc b/chrome/browser/extensions/api/web_request/web_request_api_helpers.cc
index 6d51b2e..24842e8 100644
--- a/chrome/browser/extensions/api/web_request/web_request_api_helpers.cc
+++ b/chrome/browser/extensions/api/web_request/web_request_api_helpers.cc
@@ -12,6 +12,7 @@
 #include "chrome/common/url_constants.h"
 #include "net/base/net_log.h"
 #include "net/http/http_util.h"
+#include "net/url_request/url_request.h"
 
 namespace extension_web_request_api_helpers {
 
@@ -581,8 +582,17 @@ bool HasWebRequestScheme(const GURL& url) {
 
 }  // namespace
 
-bool HideRequestForURL(const GURL& url) {
-  return IsSensitiveURL(url) || !HasWebRequestScheme(url);
+bool HideRequest(net::URLRequest* request) {
+  const GURL& url = request->url();
+  const GURL& first_party_url = request->first_party_for_cookies();
+  bool hide = false;
+  if (first_party_url.is_valid()) {
+    hide = IsSensitiveURL(first_party_url) ||
+           !HasWebRequestScheme(first_party_url);
+  }
+  if (!hide)
+    hide = IsSensitiveURL(url) || !HasWebRequestScheme(url);
+  return hide;
 }
 
 #define ARRAYEND(array) (array + arraysize(array))
