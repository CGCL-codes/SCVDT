Index: /trunk/WebCore/platform/image-decoders/gif/GIFImageDecoder.cpp

===================================================================

--- /trunk/WebCore/platform/image-decoders/gif/GIFImageDecoder.cpp	(revision 52832)

+++ /trunk/WebCore/platform/image-decoders/gif/GIFImageDecoder.cpp	(revision 52833)

@@ -332,5 +332,5 @@

 }

 

-void GIFImageDecoder::haveDecodedRow(unsigned frameIndex,

+bool GIFImageDecoder::haveDecodedRow(unsigned frameIndex,

                                      unsigned char* rowBuffer,

                                      unsigned char* rowEnd,

@@ -347,5 +347,5 @@

     // Sanity-check the arguments.

     if ((rowBuffer == 0) || (y >= size().height()))

-        return;

+        return true;

 

     // Get the colormap.

@@ -354,10 +354,10 @@

     m_reader->getColorMap(colorMap, colorMapSize);

     if (!colorMap)

-        return;

+        return true;

 

     // Initialize the frame if necessary.

     RGBA32Buffer& buffer = m_frameBufferCache[frameIndex];

     if ((buffer.status() == RGBA32Buffer::FrameEmpty) && !initFrameBuffer(frameIndex))

-        return;

+        return false;

 

     // Write one row's worth of data into the frame.  There is no guarantee that

@@ -387,4 +387,6 @@

     if (repeatCount > 1)

         buffer.copyRowNTimes(m_reader->frameXOffset(), x, y, std::min(y + static_cast<int>(repeatCount), size().height()));

+

+    return true;

 }

 

