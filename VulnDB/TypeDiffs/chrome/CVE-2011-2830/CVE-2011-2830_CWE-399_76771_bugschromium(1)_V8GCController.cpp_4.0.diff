Index: WebCore/bindings/v8/V8GCController.cpp
===================================================================
--- WebCore/bindings/v8/V8GCController.cpp      (revision 89132)
+++ WebCore/bindings/v8/V8GCController.cpp      (working copy)
@@ -289,35 +289,12 @@
 static GroupId calculateGroupId(StyleBase* styleBase)
 {
     ASSERT(styleBase);
-    StyleBase* current = styleBase;
-    StyleSheet* styleSheet = 0;
-    while (true) {
-        // Special case: CSSStyleDeclarations might be either inline and in this case
-        // we need to group them with their node or regular ones.
-        if (current->isMutableStyleDeclaration()) {
-            CSSMutableStyleDeclaration* cssMutableStyleDeclaration = static_cast<CSSMutableStyleDeclaration*>(current);
-            if (cssMutableStyleDeclaration->isInlineStyleDeclaration())
-                return calculateGroupId(cssMutableStyleDeclaration->node());
-            // Either we have no parent, or this parent is a CSSRule.
-            ASSERT(cssMutableStyleDeclaration->parent() == cssMutableStyleDeclaration->parentRule());
-        }
+    while (styleBase->parent())
+        styleBase = styleBase->parent();
 
-        if (current->isStyleSheet())
-            styleSheet = static_cast<StyleSheet*>(current);
-
-        StyleBase* parent = current->parent();
-        if (!parent)
-            break;
-        current = parent;
-    }
-
-    if (styleSheet) {
-        if (Node* ownerNode = styleSheet->ownerNode())
-            return calculateGroupId(ownerNode);
-        return GroupId(styleSheet);
-    }
-
-    return GroupId(current);
+    if (Node* node = styleBase->node())
+        return calculateGroupId(node);
+    return styleBase;
 }