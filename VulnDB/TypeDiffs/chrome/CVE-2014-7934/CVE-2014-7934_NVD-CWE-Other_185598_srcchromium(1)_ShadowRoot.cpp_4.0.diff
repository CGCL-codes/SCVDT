--- trunk/Source/core/dom/shadow/ShadowRoot.cpp	2014/11/19 14:29:21	185597
+++ trunk/Source/core/dom/shadow/ShadowRoot.cpp	2014/11/19 14:47:23	185598
@@ -175,13 +175,18 @@
 
 void ShadowRoot::removedFrom(ContainerNode* insertionPoint)
 {
-    if (insertionPoint->inDocument() && m_registeredWithParentShadowRoot) {
-        ShadowRoot* root = host()->containingShadowRoot();
-        if (!root)
-            root = insertionPoint->containingShadowRoot();
-        if (root)
-            root->removeChildShadowRoot();
-        m_registeredWithParentShadowRoot = false;
+    if (insertionPoint->inDocument()) {
+        if (ScopedStyleResolver* resolver = scopedStyleResolver())
+            insertionPoint->document().styleEngine()->removeScopedStyleResolver(resolver);
+
+        if (m_registeredWithParentShadowRoot) {
+            ShadowRoot* root = host()->containingShadowRoot();
+            if (!root)
+                root = insertionPoint->containingShadowRoot();
+            if (root)
+                root->removeChildShadowRoot();
+            m_registeredWithParentShadowRoot = false;
+        }
     }
 
     DocumentFragment::removedFrom(insertionPoint);
