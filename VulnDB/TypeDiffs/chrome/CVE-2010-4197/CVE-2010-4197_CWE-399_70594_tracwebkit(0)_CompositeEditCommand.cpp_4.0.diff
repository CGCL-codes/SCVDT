Index: /trunk/WebCore/editing/CompositeEditCommand.cpp

===================================================================

--- /trunk/WebCore/editing/CompositeEditCommand.cpp	(revision 70593)

+++ /trunk/WebCore/editing/CompositeEditCommand.cpp	(revision 70594)

@@ -1185,4 +1185,6 @@

     RefPtr<Node> node;

     for (node = start; node && node->parent() != end; node = node->parent()) {

+        if (!node->parent()->isElementNode())

+            break;

         VisiblePosition positionInParent(Position(node->parent(), 0), DOWNSTREAM);

         VisiblePosition positionInNode(Position(node, 0), DOWNSTREAM);

