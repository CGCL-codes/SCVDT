diff --git a/third_party/libxml/src/parser.c b/third_party/libxml/src/parser.c
index 0677030..309dc45 100644
--- a/third_party/libxml/src/parser.c
+++ b/third_party/libxml/src/parser.c
@@ -9826,6 +9826,7 @@ xmlParseEndTag2(xmlParserCtxtPtr ctxt, const xmlChar *prefix,
     SKIP(2);
 
     if ((tlen > 0) && (xmlStrncmp(ctxt->input->cur, ctxt->name, tlen) == 0)) {
+        tlen = strnlen(ctxt->name, tlen);
         if (ctxt->input->cur[tlen] == '>') {
 	    ctxt->input->cur += tlen + 1;
 	    ctxt->input->col += tlen + 1;
-- 
2.8.0.rc3.226.g39d4020

