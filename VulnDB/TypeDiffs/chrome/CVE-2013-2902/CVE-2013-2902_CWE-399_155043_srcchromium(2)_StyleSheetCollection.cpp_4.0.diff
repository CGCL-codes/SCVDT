--- trunk/Source/core/dom/StyleSheetCollection.cpp	2013/07/27 02:40:01	155042
+++ trunk/Source/core/dom/StyleSheetCollection.cpp	2013/07/27 02:45:44	155043
@@ -97,14 +97,14 @@
         Node* n = *it;
         StyleSheet* sheet = 0;
         CSSStyleSheet* activeSheet = 0;
-        if (n->nodeType() == Node::PROCESSING_INSTRUCTION_NODE) {
+        if (n->nodeType() == Node::PROCESSING_INSTRUCTION_NODE && !document()->isHTMLDocument()) {
             // Processing instruction (XML documents only).
             // We don't support linking to embedded CSS stylesheets, see <https://bugs.webkit.org/show_bug.cgi?id=49281> for discussion.
             ProcessingInstruction* pi = static_cast<ProcessingInstruction*>(n);
             // Don't apply XSL transforms to already transformed documents -- <rdar://problem/4132806>
             if (pi->isXSL() && !document()->transformSourceDocument()) {
                 // Don't apply XSL transforms until loading is finished.
-                if (!document()->parsing())
+                if (!document()->parsing() && !pi->isLoading())
                     document()->applyXSLTransform(pi);
                 return;
             }
