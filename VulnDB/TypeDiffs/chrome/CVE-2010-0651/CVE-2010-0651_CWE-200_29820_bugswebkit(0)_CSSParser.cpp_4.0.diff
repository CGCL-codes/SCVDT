Index: WebCore/css/CSSParser.cpp
===================================================================
--- WebCore/css/CSSParser.cpp	(revision 50101)
+++ WebCore/css/CSSParser.cpp	(working copy)
@@ -139,6 +139,7 @@
     , m_currentShorthand(0)
     , m_implicitShorthand(false)
     , m_hasFontFaceOnlyValues(false)
+    , m_hadGoodCSSRule(false)
     , m_defaultNamespace(starAtom)
     , m_data(0)
     , yy_start(1)
@@ -5160,6 +5161,12 @@
     return keyframePtr;
 }
 
+void
+CSSParser::invalidBlockHit() {
+    if (m_styleSheet && !m_hadGoodCSSRule)
+        m_styleSheet->setHasGoodCSSHeader(false);
+}
+
 static int cssPropertyID(const UChar* propertyName, unsigned length)
 {
     if (!length)
