Index: /trunk/WebCore/css/CSSParser.cpp

===================================================================

--- /trunk/WebCore/css/CSSParser.cpp	(revision 52783)

+++ /trunk/WebCore/css/CSSParser.cpp	(revision 52784)

@@ -140,4 +140,5 @@

     , m_implicitShorthand(false)

     , m_hasFontFaceOnlyValues(false)

+    , m_hadSyntacticallyValidCSSRule(false)

     , m_defaultNamespace(starAtom)

     , m_data(0)

@@ -5234,4 +5235,10 @@

 }

 

+void CSSParser::invalidBlockHit()

+{

+    if (m_styleSheet && !m_hadSyntacticallyValidCSSRule)

+        m_styleSheet->setHasSyntacticallyValidCSSHeader(false);

+}

+

 static int cssPropertyID(const UChar* propertyName, unsigned length)

 {

