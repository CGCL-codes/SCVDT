diff --git a/util/decompile.c b/util/decompile.c
index a303d6b..1126ef0 100644
--- a/util/decompile.c
+++ b/util/decompile.c
@@ -2387,7 +2387,7 @@ decompileIF(int n, SWF_ACTION *actions, int maxn)
 #define SOME_IF_DEBUG 0	/* coders only */
 		int has_else_or_break= ((sact->Actions[sact->numActions-1].SWF_ACTIONRECORD.ActionCode == SWFACTION_JUMP) &&
 			(sact->Actions[sact->numActions-1].SWF_ACTIONJUMP.BranchOffset > 0 )) ? 1:0;
-		int has_lognot=(actions[n-1].SWF_ACTIONRECORD.ActionCode == SWFACTION_LOGICALNOT) ? 1:0;
+		int has_lognot=(OpCode(actions, n-1, maxn) == SWFACTION_LOGICALNOT) ? 1:0;
 		int else_action_cnt=0,is_logor=0,is_logand=0,sbi,sbe;
 
 		/* before emitting any "if"/"else" characters let's check 
